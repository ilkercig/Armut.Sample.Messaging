2017-12-18 10:46:48.625 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 10:46:48.662 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 10:46:48.669 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 10:46:48.677 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 10:46:48.679 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 10:46:48.682 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 10:46:48.684 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 10:46:48.685 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 10:46:48.688 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 10:46:48.691 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 10:46:48.691 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 10:46:48.924 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 10:46:49.043 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 10:46:49.065 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 10:46:49.084 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.739 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.739 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.740 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.742 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.743 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.748 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 10:46:49.787 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 10:46:49.787 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.787 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.816 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 10:46:49.824 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 10:46:49.843 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 10:46:49.848 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.848 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.860 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 10:46:49.864 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 10:46:49.869 +03:00 [Debug] A data reader was disposed.
2017-12-18 10:46:49.870 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.870 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:46:49.874 +03:00 [Debug] Hosting starting
2017-12-18 10:46:49.922 +03:00 [Debug] Hosting started
2017-12-18 10:46:49.922 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 10:46:49.922 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 10:46:49.922 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 10:46:49.937 +03:00 [Debug] Connection id ""0HLA5TDVLSE74"" started.
2017-12-18 10:46:49.937 +03:00 [Debug] Connection id ""0HLA5TDVLSE75"" started.
2017-12-18 10:46:49.958 +03:00 [Debug] Connection id ""0HLA5TDVLSE74"" reset.
2017-12-18 10:46:49.958 +03:00 [Debug] Connection id ""0HLA5TDVLSE74"" disconnecting.
2017-12-18 10:46:49.963 +03:00 [Debug] Connection id ""0HLA5TDVLSE74"" sending FIN.
2017-12-18 10:46:49.971 +03:00 [Debug] Connection id ""0HLA5TDVLSE74"" stopped.
2017-12-18 10:46:49.999 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 10:46:50.058 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 10:46:50.124 +03:00 [Debug] Request did not match any routes.
2017-12-18 10:46:50.131 +03:00 [Debug] Connection id ""0HLA5TDVLSE75"" completed keep alive response.
2017-12-18 10:46:50.132 +03:00 [Information] Request finished in 134.6216ms 404 
2017-12-18 10:46:50.166 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 10:46:50.168 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 10:46:50.169 +03:00 [Debug] Request did not match any routes.
2017-12-18 10:46:50.170 +03:00 [Debug] Connection id ""0HLA5TDVLSE75"" completed keep alive response.
2017-12-18 10:46:50.170 +03:00 [Information] Request finished in 3.7447ms 404 
2017-12-18 10:46:58.202 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=hakki  0
2017-12-18 10:46:58.202 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 10:46:58.203 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 10:46:58.250 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 10:46:58.255 +03:00 [Information] Dark Throne
2017-12-18 10:46:58.288 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "hakki"]) - ModelState is Valid
2017-12-18 10:47:00.368 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 10:47:00.373 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 10:47:00.375 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 10:47:00.394 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 10:47:00.395 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:47:00.395 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:47:00.396 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 10:47:00.422 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 10:47:00.422 +03:00 [Debug] A data reader was disposed.
2017-12-18 10:47:00.422 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:47:00.422 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 10:47:00.423 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 10:47:00.429 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 10:47:00.429 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 10:47:00.429 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 10:47:00.483 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2230.2879ms
2017-12-18 10:47:00.484 +03:00 [Debug] Connection id ""0HLA5TDVLSE75"" completed keep alive response.
2017-12-18 10:47:00.484 +03:00 [Information] Request finished in 2282.483ms 404 application/json; charset=utf-8
2017-12-18 11:20:07.972 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 11:20:08.024 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 11:20:08.035 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 11:20:08.050 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 11:20:08.053 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:20:08.054 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 11:20:08.055 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:20:08.056 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 11:20:08.058 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 11:20:08.062 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 11:20:08.063 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 11:20:08.284 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 11:20:08.398 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 11:20:08.422 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 11:20:08.443 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.203 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.203 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.203 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.206 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.207 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.211 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:20:09.310 +03:00 [Information] Executed DbCommand ("99"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:20:09.310 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.310 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.349 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:20:09.361 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:20:09.381 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 11:20:09.385 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.385 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.396 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:20:09.404 +03:00 [Information] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:20:09.408 +03:00 [Debug] A data reader was disposed.
2017-12-18 11:20:09.409 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.409 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:20:09.413 +03:00 [Debug] Hosting starting
2017-12-18 11:20:09.461 +03:00 [Debug] Hosting started
2017-12-18 11:20:09.461 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 11:20:09.461 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 11:20:09.461 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 11:20:09.595 +03:00 [Debug] Connection id ""0HLA5U0JK40D0"" started.
2017-12-18 11:20:09.595 +03:00 [Debug] Connection id ""0HLA5U0JK40CV"" started.
2017-12-18 11:20:09.617 +03:00 [Debug] Connection id ""0HLA5U0JK40D0"" reset.
2017-12-18 11:20:09.617 +03:00 [Debug] Connection id ""0HLA5U0JK40D0"" disconnecting.
2017-12-18 11:20:09.619 +03:00 [Debug] Connection id ""0HLA5U0JK40D0"" sending FIN.
2017-12-18 11:20:09.629 +03:00 [Debug] Connection id ""0HLA5U0JK40D0"" stopped.
2017-12-18 11:20:09.656 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 11:20:09.715 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:20:09.780 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:20:09.786 +03:00 [Debug] Connection id ""0HLA5U0JK40CV"" completed keep alive response.
2017-12-18 11:20:09.787 +03:00 [Information] Request finished in 132.6721ms 404 
2017-12-18 11:20:09.812 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 11:20:09.813 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:20:09.813 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:20:09.813 +03:00 [Debug] Connection id ""0HLA5U0JK40CV"" completed keep alive response.
2017-12-18 11:20:09.813 +03:00 [Information] Request finished in 0.6837ms 404 
2017-12-18 11:37:48.399 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 11:37:48.436 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 11:37:48.443 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 11:37:48.453 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 11:37:48.455 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:37:48.455 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 11:37:48.456 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:37:48.457 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 11:37:48.459 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 11:37:48.462 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 11:37:48.463 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 11:37:48.740 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 11:37:48.872 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 11:37:48.901 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 11:37:48.922 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.607 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.607 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.607 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.610 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.610 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.615 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:37:49.653 +03:00 [Information] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:37:49.653 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.653 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.686 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:37:49.700 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:37:49.725 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 11:37:49.731 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.731 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.747 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:37:49.751 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:37:49.756 +03:00 [Debug] A data reader was disposed.
2017-12-18 11:37:49.757 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.757 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:37:49.761 +03:00 [Debug] Hosting starting
2017-12-18 11:37:49.810 +03:00 [Debug] Hosting started
2017-12-18 11:37:49.810 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 11:37:49.810 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 11:37:49.810 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 11:37:49.995 +03:00 [Debug] Connection id ""0HLA5UAFKS4QJ"" started.
2017-12-18 11:37:49.995 +03:00 [Debug] Connection id ""0HLA5UAFKS4QI"" started.
2017-12-18 11:37:50.017 +03:00 [Debug] Connection id ""0HLA5UAFKS4QJ"" reset.
2017-12-18 11:37:50.017 +03:00 [Debug] Connection id ""0HLA5UAFKS4QJ"" disconnecting.
2017-12-18 11:37:50.019 +03:00 [Debug] Connection id ""0HLA5UAFKS4QJ"" sending FIN.
2017-12-18 11:37:50.024 +03:00 [Debug] Connection id ""0HLA5UAFKS4QJ"" stopped.
2017-12-18 11:37:50.069 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 11:37:50.138 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:37:50.223 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:37:50.229 +03:00 [Debug] Connection id ""0HLA5UAFKS4QI"" completed keep alive response.
2017-12-18 11:37:50.229 +03:00 [Information] Request finished in 163.8139ms 404 
2017-12-18 11:37:50.267 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 11:37:50.269 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:37:50.270 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:37:50.270 +03:00 [Debug] Connection id ""0HLA5UAFKS4QI"" completed keep alive response.
2017-12-18 11:37:50.270 +03:00 [Information] Request finished in 3.8084ms 404 
2017-12-18 11:48:04.220 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 11:48:04.280 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 11:48:04.287 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 11:48:04.303 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 11:48:04.305 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:48:04.305 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 11:48:04.306 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 11:48:04.307 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 11:48:04.309 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 11:48:04.312 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 11:48:04.312 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 11:48:04.544 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 11:48:04.671 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 11:48:04.695 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 11:48:04.717 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.323 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.323 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.324 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.325 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.326 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.330 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:48:05.367 +03:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 11:48:05.367 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.367 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.397 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:48:05.405 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 11:48:05.425 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 11:48:05.430 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.430 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.442 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:48:05.445 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 11:48:05.451 +03:00 [Debug] A data reader was disposed.
2017-12-18 11:48:05.451 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.451 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:05.456 +03:00 [Debug] Hosting starting
2017-12-18 11:48:05.511 +03:00 [Debug] Hosting started
2017-12-18 11:48:05.511 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 11:48:05.511 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 11:48:05.511 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 11:48:05.557 +03:00 [Debug] Connection id ""0HLA5UG73AQ46"" started.
2017-12-18 11:48:05.557 +03:00 [Debug] Connection id ""0HLA5UG73AQ47"" started.
2017-12-18 11:48:05.577 +03:00 [Debug] Connection id ""0HLA5UG73AQ47"" reset.
2017-12-18 11:48:05.577 +03:00 [Debug] Connection id ""0HLA5UG73AQ47"" disconnecting.
2017-12-18 11:48:05.578 +03:00 [Debug] Connection id ""0HLA5UG73AQ47"" sending FIN.
2017-12-18 11:48:05.587 +03:00 [Debug] Connection id ""0HLA5UG73AQ47"" stopped.
2017-12-18 11:48:05.613 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 11:48:05.682 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:48:05.750 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:48:05.756 +03:00 [Debug] Connection id ""0HLA5UG73AQ46"" completed keep alive response.
2017-12-18 11:48:05.757 +03:00 [Information] Request finished in 145.6586ms 404 
2017-12-18 11:48:05.786 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 11:48:05.787 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:48:05.787 +03:00 [Debug] Request did not match any routes.
2017-12-18 11:48:05.788 +03:00 [Debug] Connection id ""0HLA5UG73AQ46"" completed keep alive response.
2017-12-18 11:48:05.788 +03:00 [Information] Request finished in 2.0373ms 404 
2017-12-18 11:48:13.763 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=hakki  0
2017-12-18 11:48:13.763 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 11:48:13.764 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 11:48:13.809 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 11:48:13.814 +03:00 [Information] Dark Throne
2017-12-18 11:48:13.846 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "hakki"]) - ModelState is Valid
2017-12-18 11:48:13.849 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 11:48:13.858 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 11:48:13.861 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 11:48:13.883 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 11:48:13.884 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:13.884 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:13.886 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 11:48:13.909 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 11:48:13.909 +03:00 [Debug] A data reader was disposed.
2017-12-18 11:48:13.909 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:13.909 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 11:48:13.911 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 11:48:13.916 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 11:48:13.916 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 11:48:13.916 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 11:48:13.982 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 170.1795ms
2017-12-18 11:48:13.983 +03:00 [Debug] Connection id ""0HLA5UG73AQ46"" completed keep alive response.
2017-12-18 11:48:13.983 +03:00 [Information] Request finished in 220.6485ms 404 application/json; charset=utf-8
2017-12-18 12:01:29.223 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 12:01:29.284 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 12:01:29.301 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 12:01:29.311 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 12:01:29.314 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:01:29.315 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 12:01:29.316 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:01:29.317 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 12:01:29.319 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 12:01:29.323 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 12:01:29.324 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 12:01:29.562 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 12:01:29.688 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 12:01:29.726 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:01:29.750 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.435 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.435 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.436 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.438 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.438 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.443 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:01:30.481 +03:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:01:30.482 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.482 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.510 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:01:30.518 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:01:30.539 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:01:30.544 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.544 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.560 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:01:30.564 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:01:30.569 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:01:30.569 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.569 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:30.574 +03:00 [Debug] Hosting starting
2017-12-18 12:01:30.618 +03:00 [Debug] Hosting started
2017-12-18 12:01:30.618 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 12:01:30.618 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 12:01:30.618 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 12:01:30.811 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" started.
2017-12-18 12:01:30.811 +03:00 [Debug] Connection id ""0HLA5UNN2QS2B"" started.
2017-12-18 12:01:30.834 +03:00 [Debug] Connection id ""0HLA5UNN2QS2B"" reset.
2017-12-18 12:01:30.834 +03:00 [Debug] Connection id ""0HLA5UNN2QS2B"" disconnecting.
2017-12-18 12:01:30.835 +03:00 [Debug] Connection id ""0HLA5UNN2QS2B"" sending FIN.
2017-12-18 12:01:30.840 +03:00 [Debug] Connection id ""0HLA5UNN2QS2B"" stopped.
2017-12-18 12:01:30.887 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 12:01:31.042 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:31.115 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:01:31.122 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:31.122 +03:00 [Information] Request finished in 237.3228ms 404 
2017-12-18 12:01:31.161 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 12:01:31.163 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:31.164 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:01:31.164 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:31.164 +03:00 [Information] Request finished in 3.2578ms 404 
2017-12-18 12:01:37.231 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=hakki  0
2017-12-18 12:01:37.231 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:37.232 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:01:37.275 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:01:37.280 +03:00 [Information] Dark Throne
2017-12-18 12:01:37.309 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "hakki"]) - ModelState is Valid
2017-12-18 12:01:37.314 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:01:37.318 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:01:37.320 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:01:37.335 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:01:37.335 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:37.336 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:37.337 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:37.357 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:37.358 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:01:37.358 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:37.358 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:37.360 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:01:37.364 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:01:37.365 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:01:37.365 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:01:37.417 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 139.1107ms
2017-12-18 12:01:37.417 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:37.417 +03:00 [Information] Request finished in 186.6361ms 404 application/json; charset=utf-8
2017-12-18 12:01:38.708 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=hakki  0
2017-12-18 12:01:38.708 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:38.708 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:01:38.708 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:01:38.709 +03:00 [Information] Dark Throne
2017-12-18 12:01:38.709 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "hakki"]) - ModelState is Valid
2017-12-18 12:01:38.709 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:01:38.710 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:38.710 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:38.710 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:38.711 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:38.711 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:01:38.711 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:38.711 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:38.711 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:01:38.711 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:01:38.711 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:01:38.711 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:01:38.712 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 3.4389ms
2017-12-18 12:01:38.712 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:38.712 +03:00 [Information] Request finished in 4.3062ms 404 application/json; charset=utf-8
2017-12-18 12:01:42.233 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=hasdasdas  0
2017-12-18 12:01:42.233 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:42.233 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:01:42.233 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:01:42.233 +03:00 [Information] Dark Throne
2017-12-18 12:01:42.233 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "hasdasdas"]) - ModelState is Valid
2017-12-18 12:01:42.234 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:01:42.234 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:42.234 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:42.234 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:42.234 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:42.234 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:01:42.234 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:42.234 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:42.235 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:01:42.235 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:01:42.235 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:01:42.235 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:01:42.235 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.7575ms
2017-12-18 12:01:42.235 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:42.235 +03:00 [Information] Request finished in 2.2106ms 404 application/json; charset=utf-8
2017-12-18 12:01:46.056 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=%20%20hasdasdas  0
2017-12-18 12:01:46.056 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:01:46.056 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:01:46.056 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:01:46.056 +03:00 [Information] Dark Throne
2017-12-18 12:01:46.057 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", "  hasdasdas"]) - ModelState is Valid
2017-12-18 12:01:46.057 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:01:46.057 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:46.057 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:46.057 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:46.057 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:01:46.058 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:01:46.058 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:46.058 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:01:46.058 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:01:46.058 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:01:46.058 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:01:46.058 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:01:46.058 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.4782ms
2017-12-18 12:01:46.058 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:01:46.058 +03:00 [Information] Request finished in 1.8918ms 404 application/json; charset=utf-8
2017-12-18 12:02:05.173 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=lili&receiver=%20eqweqweqwe  0
2017-12-18 12:02:05.173 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:02:05.173 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:02:05.173 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:02:05.173 +03:00 [Information] Dark Throne
2017-12-18 12:02:05.174 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["lili", " eqweqweqwe"]) - ModelState is Valid
2017-12-18 12:02:05.174 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:02:05.174 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:05.174 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:05.174 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:05.175 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:05.175 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:02:05.175 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:05.175 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:05.175 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:02:05.175 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:02:05.175 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:02:05.175 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:02:05.175 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.4719ms
2017-12-18 12:02:05.175 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:02:05.175 +03:00 [Information] Request finished in 2.018ms 404 application/json; charset=utf-8
2017-12-18 12:02:13.441 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqwe%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=%20eqweqweqwe  0
2017-12-18 12:02:13.441 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:02:13.441 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:02:13.441 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:02:13.441 +03:00 [Information] Dark Throne
2017-12-18 12:02:13.442 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqweouqweouqweoqwei", " eqweqweqwe"]) - ModelState is Valid
2017-12-18 12:02:13.442 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:02:13.442 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:13.442 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:13.442 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:13.443 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:13.443 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:02:13.443 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:13.443 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:13.443 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:02:13.443 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:02:13.443 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:02:13.443 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:02:13.443 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.5694ms
2017-12-18 12:02:13.443 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:02:13.443 +03:00 [Information] Request finished in 2.0134ms 404 application/json; charset=utf-8
2017-12-18 12:02:20.042 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=%20eqweqweqwe  0
2017-12-18 12:02:20.043 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:02:20.043 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:02:20.043 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:02:20.043 +03:00 [Information] Dark Throne
2017-12-18 12:02:20.043 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", " eqweqweqwe"]) - ModelState is Valid
2017-12-18 12:02:20.043 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:02:20.043 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:20.043 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:20.044 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:20.044 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:20.044 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:02:20.044 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:20.044 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:20.044 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:02:20.044 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:02:20.044 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:02:20.044 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:02:20.044 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.5289ms
2017-12-18 12:02:20.044 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:02:20.044 +03:00 [Information] Request finished in 1.9947ms 404 application/json; charset=utf-8
2017-12-18 12:02:22.885 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=%20eqweqweqwe  0
2017-12-18 12:02:22.885 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:02:22.885 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:02:22.885 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:02:22.885 +03:00 [Information] Dark Throne
2017-12-18 12:02:22.885 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", " eqweqweqwe"]) - ModelState is Valid
2017-12-18 12:02:22.885 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:02:22.886 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:22.886 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:22.886 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:22.886 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:02:22.886 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:02:22.886 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:22.886 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:02:22.886 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 12:02:22.886 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:02:22.886 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:02:22.886 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:02:22.886 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1.5265ms
2017-12-18 12:02:22.887 +03:00 [Debug] Connection id ""0HLA5UNN2QS2A"" completed keep alive response.
2017-12-18 12:02:22.887 +03:00 [Information] Request finished in 1.9039ms 404 application/json; charset=utf-8
2017-12-18 12:03:14.017 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 12:03:14.050 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 12:03:14.056 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 12:03:14.064 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 12:03:14.065 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:03:14.066 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 12:03:14.067 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:03:14.067 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 12:03:14.069 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 12:03:14.072 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 12:03:14.073 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 12:03:14.341 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 12:03:14.464 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 12:03:14.489 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:03:14.510 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.155 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.155 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.155 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.157 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.157 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.161 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:03:15.198 +03:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:03:15.199 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.199 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.227 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:03:15.236 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:03:15.257 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:03:15.262 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.262 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.274 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:03:15.278 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:03:15.282 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:03:15.283 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.283 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:15.287 +03:00 [Debug] Hosting starting
2017-12-18 12:03:15.333 +03:00 [Debug] Hosting started
2017-12-18 12:03:15.333 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 12:03:15.333 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 12:03:15.333 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 12:03:15.547 +03:00 [Debug] Connection id ""0HLA5UOM9LR06"" started.
2017-12-18 12:03:15.547 +03:00 [Debug] Connection id ""0HLA5UOM9LR07"" started.
2017-12-18 12:03:15.567 +03:00 [Debug] Connection id ""0HLA5UOM9LR07"" reset.
2017-12-18 12:03:15.567 +03:00 [Debug] Connection id ""0HLA5UOM9LR07"" disconnecting.
2017-12-18 12:03:15.572 +03:00 [Debug] Connection id ""0HLA5UOM9LR07"" sending FIN.
2017-12-18 12:03:15.578 +03:00 [Debug] Connection id ""0HLA5UOM9LR07"" stopped.
2017-12-18 12:03:15.603 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 12:03:15.660 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:03:15.726 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:03:15.732 +03:00 [Debug] Connection id ""0HLA5UOM9LR06"" completed keep alive response.
2017-12-18 12:03:15.732 +03:00 [Information] Request finished in 130.6936ms 404 
2017-12-18 12:03:15.760 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 12:03:15.760 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:03:15.760 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:03:15.761 +03:00 [Debug] Connection id ""0HLA5UOM9LR06"" completed keep alive response.
2017-12-18 12:03:15.761 +03:00 [Information] Request finished in 0.6743ms 404 
2017-12-18 12:03:28.091 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=ilkercig  0
2017-12-18 12:03:28.092 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:03:28.093 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:03:28.139 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:03:28.144 +03:00 [Information] Dark Throne
2017-12-18 12:03:28.172 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", "ilkercig"]) - ModelState is Valid
2017-12-18 12:03:28.179 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:03:28.184 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:03:28.185 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:03:28.200 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:03:28.201 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.201 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.202 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:28.224 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:28.245 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:03:28.245 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.245 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.251 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.251 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.252 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:28.252 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:28.252 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:03:28.252 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.252 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.285 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.285 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.286 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:03:28.303 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 12:03:28.309 +03:00 [Error] Failed executing DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
System.Data.SqlClient.SqlException (0x80131904): Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:e93f1305-6345-4175-9f60-089c057b5aa9
Error Number:207,State:1,Class:16
2017-12-18 12:03:28.345 +03:00 [Debug] Disposing transaction.
2017-12-18 12:03:28.346 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.346 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:28.353 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 12:03:40.681 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 12539.4563ms
2017-12-18 12:03:40.682 +03:00 [Error] An unhandled exception has occurred while executing the request
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Insert(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 40
   at Armut.Sample.Messaging.Controllers.MessageController.SendMessage(String body, String receiver) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 62
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 12:03:40.773 +03:00 [Debug] Connection id ""0HLA5UOM9LR06"" completed keep alive response.
2017-12-18 12:03:40.773 +03:00 [Information] Request finished in 12681.4116ms 500 text/html; charset=utf-8
2017-12-18 12:03:54.130 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=ilkercig  0
2017-12-18 12:03:54.130 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:03:54.130 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:03:54.130 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:03:54.131 +03:00 [Information] Dark Throne
2017-12-18 12:03:54.131 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", "ilkercig"]) - ModelState is Valid
2017-12-18 12:03:54.131 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:03:54.132 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:54.132 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:54.132 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:54.132 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:03:54.133 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:03:54.133 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:03:54.133 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.194 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.194 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.194 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:02.194 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:02.194 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:04:02.194 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.194 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.574 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.574 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.575 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:02.575 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:02.577 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:04:02.577 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:02.577 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:08.404 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:08.404 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:08.404 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:08.405 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:04:08.405 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:04:08.405 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:08.405 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:33.537 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:33.537 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:33.538 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:04:33.538 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 12:04:33.540 +03:00 [Error] Failed executing DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
System.Data.SqlClient.SqlException (0x80131904): Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:e93f1305-6345-4175-9f60-089c057b5aa9
Error Number:207,State:1,Class:16
2017-12-18 12:04:33.544 +03:00 [Debug] Disposing transaction.
2017-12-18 12:04:33.544 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:33.544 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:04:33.549 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid column name 'SenderId'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 12:07:20.240 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 12:07:20.276 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 12:07:20.285 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 12:07:20.297 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 12:07:20.299 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:07:20.299 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 12:07:20.300 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:07:20.300 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 12:07:20.302 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 12:07:20.305 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 12:07:20.305 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 12:07:20.598 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 12:07:20.710 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 12:07:20.735 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:07:20.760 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.845 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.845 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.846 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.847 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.848 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.852 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:07:20.878 +03:00 [Information] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:07:20.878 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.879 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.905 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:07:20.913 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:07:20.935 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:07:20.939 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.939 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.950 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:07:20.954 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:07:20.960 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:20.960 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:20.960 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.103 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.103 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.104 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:07:21.122 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 450), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 450), @p10='?' (Size = 4000), @p11='?' (Size = 100), @p12='?' (Size = 450), @p13='?' (Size = 4000), @p14='?' (Size = 100), @p15='?' (Size = 450), @p16='?' (Size = 4000), @p17='?' (Size = 100), @p18='?' (Size = 450), @p19='?' (Size = 4000), @p20='?' (Size = 100), @p21='?' (Size = 450), @p22='?' (Size = 4000), @p23='?' (Size = 100), @p24='?' (Size = 450), @p25='?' (Size = 4000), @p26='?' (Size = 100), @p27='?' (Size = 450), @p28='?' (Size = 4000), @p29='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([UserID] int, [_Position] [int]);
MERGE [User] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4),
(@p15, @p16, @p17, 5),
(@p18, @p19, @p20, 6),
(@p21, @p22, @p23, 7),
(@p24, @p25, @p26, 8),
(@p27, @p28, @p29, 9)) AS i ([EmailAddress], [Password], [UserName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([EmailAddress], [Password], [UserName])
VALUES (i.[EmailAddress], i.[Password], i.[UserName])
OUTPUT INSERTED.[UserID], i._Position
INTO @inserted0;

SELECT [t].[UserID] FROM [User] t
INNER JOIN @inserted0 i ON ([t].[UserID] = [i].[UserID])
ORDER BY [i].[_Position];"
2017-12-18 12:07:21.147 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 450), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 450), @p10='?' (Size = 4000), @p11='?' (Size = 100), @p12='?' (Size = 450), @p13='?' (Size = 4000), @p14='?' (Size = 100), @p15='?' (Size = 450), @p16='?' (Size = 4000), @p17='?' (Size = 100), @p18='?' (Size = 450), @p19='?' (Size = 4000), @p20='?' (Size = 100), @p21='?' (Size = 450), @p22='?' (Size = 4000), @p23='?' (Size = 100), @p24='?' (Size = 450), @p25='?' (Size = 4000), @p26='?' (Size = 100), @p27='?' (Size = 450), @p28='?' (Size = 4000), @p29='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([UserID] int, [_Position] [int]);
MERGE [User] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4),
(@p15, @p16, @p17, 5),
(@p18, @p19, @p20, 6),
(@p21, @p22, @p23, 7),
(@p24, @p25, @p26, 8),
(@p27, @p28, @p29, 9)) AS i ([EmailAddress], [Password], [UserName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([EmailAddress], [Password], [UserName])
VALUES (i.[EmailAddress], i.[Password], i.[UserName])
OUTPUT INSERTED.[UserID], i._Position
INTO @inserted0;

SELECT [t].[UserID] FROM [User] t
INNER JOIN @inserted0 i ON ([t].[UserID] = [i].[UserID])
ORDER BY [i].[_Position];"
2017-12-18 12:07:21.152 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:21.153 +03:00 [Debug] Committing transaction.
2017-12-18 12:07:21.153 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.153 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.153 +03:00 [Debug] Disposing transaction.
2017-12-18 12:07:21.174 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.174 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.175 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:07:21.176 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?' (Size = 500), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (Size = 500), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (Size = 500), @p16='?', @p17='?', @p18='?', @p19='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([MessageID] int, [_Position] [int]);
MERGE [Message] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3)) AS i ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (i.[Body], i.[ReceiveTime], i.[ReceiverId], i.[SenderId], i.[SentTime])
OUTPUT INSERTED.[MessageID], i._Position
INTO @inserted0;

SELECT [t].[MessageID], [t].[Read] FROM [Message] t
INNER JOIN @inserted0 i ON ([t].[MessageID] = [i].[MessageID])
ORDER BY [i].[_Position];"
2017-12-18 12:07:21.189 +03:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?' (Size = 500), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (Size = 500), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (Size = 500), @p16='?', @p17='?', @p18='?', @p19='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([MessageID] int, [_Position] [int]);
MERGE [Message] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, 0),
(@p5, @p6, @p7, @p8, @p9, 1),
(@p10, @p11, @p12, @p13, @p14, 2),
(@p15, @p16, @p17, @p18, @p19, 3)) AS i ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (i.[Body], i.[ReceiveTime], i.[ReceiverId], i.[SenderId], i.[SentTime])
OUTPUT INSERTED.[MessageID], i._Position
INTO @inserted0;

SELECT [t].[MessageID], [t].[Read] FROM [Message] t
INNER JOIN @inserted0 i ON ([t].[MessageID] = [i].[MessageID])
ORDER BY [i].[_Position];"
2017-12-18 12:07:21.191 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:21.192 +03:00 [Debug] Committing transaction.
2017-12-18 12:07:21.192 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.192 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.192 +03:00 [Debug] Disposing transaction.
2017-12-18 12:07:21.201 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.201 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.201 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:07:21.202 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5);"
2017-12-18 12:07:21.204 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5);"
2017-12-18 12:07:21.204 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:21.205 +03:00 [Debug] Committing transaction.
2017-12-18 12:07:21.205 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.205 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:21.205 +03:00 [Debug] Disposing transaction.
2017-12-18 12:07:21.208 +03:00 [Debug] Hosting starting
2017-12-18 12:07:21.251 +03:00 [Debug] Hosting started
2017-12-18 12:07:21.251 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 12:07:21.251 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 12:07:21.251 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 12:07:21.415 +03:00 [Debug] Connection id ""0HLA5UQVIEHA7"" started.
2017-12-18 12:07:21.415 +03:00 [Debug] Connection id ""0HLA5UQVIEHA6"" started.
2017-12-18 12:07:21.435 +03:00 [Debug] Connection id ""0HLA5UQVIEHA6"" reset.
2017-12-18 12:07:21.435 +03:00 [Debug] Connection id ""0HLA5UQVIEHA6"" disconnecting.
2017-12-18 12:07:21.436 +03:00 [Debug] Connection id ""0HLA5UQVIEHA6"" sending FIN.
2017-12-18 12:07:21.445 +03:00 [Debug] Connection id ""0HLA5UQVIEHA6"" stopped.
2017-12-18 12:07:21.470 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 12:07:21.522 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:07:21.585 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:07:21.591 +03:00 [Debug] Connection id ""0HLA5UQVIEHA7"" completed keep alive response.
2017-12-18 12:07:21.591 +03:00 [Information] Request finished in 122.6055ms 404 
2017-12-18 12:07:21.623 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 12:07:21.624 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:07:21.624 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:07:21.625 +03:00 [Debug] Connection id ""0HLA5UQVIEHA7"" completed keep alive response.
2017-12-18 12:07:21.625 +03:00 [Information] Request finished in 1.6817ms 404 
2017-12-18 12:07:26.381 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=ilkercig  0
2017-12-18 12:07:26.381 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:07:26.382 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 12:07:26.425 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 12:07:26.430 +03:00 [Information] Dark Throne
2017-12-18 12:07:26.460 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", "ilkercig"]) - ModelState is Valid
2017-12-18 12:07:26.465 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:07:26.469 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:07:26.471 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 12:07:26.485 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:07:26.486 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:26.486 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:26.486 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:07:26.487 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:07:26.489 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:26.489 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:26.489 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.600 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.601 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.601 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:07:28.602 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 12:07:28.602 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:28.602 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.602 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.603 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.603 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.603 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 12:07:28.604 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 12:07:28.606 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 12:07:28.606 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:07:28.608 +03:00 [Debug] Committing transaction.
2017-12-18 12:07:28.609 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.609 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:07:28.609 +03:00 [Debug] Disposing transaction.
2017-12-18 12:07:28.609 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 12:07:28.613 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 12:07:28.614 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 12:07:28.614 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 12:07:28.662 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2233.9056ms
2017-12-18 12:07:28.663 +03:00 [Debug] Connection id ""0HLA5UQVIEHA7"" completed keep alive response.
2017-12-18 12:07:28.663 +03:00 [Information] Request finished in 2282.6469ms 200 application/json; charset=utf-8
2017-12-18 12:31:47.278 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 12:31:47.312 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 12:31:47.318 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 12:31:47.326 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 12:31:47.328 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:31:47.328 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 12:31:47.329 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 12:31:47.330 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 12:31:47.332 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 12:31:47.335 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 12:31:47.335 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 12:31:47.567 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 12:31:47.685 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 12:31:47.707 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 12:31:47.728 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.816 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.816 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.816 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.818 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.819 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.824 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:31:47.851 +03:00 [Information] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 12:31:47.852 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.852 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.879 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:31:47.886 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 12:31:47.906 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 12:31:47.911 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.911 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.922 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:31:47.926 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 12:31:47.931 +03:00 [Debug] A data reader was disposed.
2017-12-18 12:31:47.932 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.932 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 12:31:47.936 +03:00 [Debug] Hosting starting
2017-12-18 12:31:47.985 +03:00 [Debug] Hosting started
2017-12-18 12:31:47.985 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 12:31:47.985 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 12:31:47.985 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 12:31:48.086 +03:00 [Debug] Connection id ""0HLA5V8KLNCFH"" started.
2017-12-18 12:31:48.086 +03:00 [Debug] Connection id ""0HLA5V8KLNCFG"" started.
2017-12-18 12:31:48.107 +03:00 [Debug] Connection id ""0HLA5V8KLNCFG"" reset.
2017-12-18 12:31:48.107 +03:00 [Debug] Connection id ""0HLA5V8KLNCFG"" disconnecting.
2017-12-18 12:31:48.109 +03:00 [Debug] Connection id ""0HLA5V8KLNCFG"" sending FIN.
2017-12-18 12:31:48.116 +03:00 [Debug] Connection id ""0HLA5V8KLNCFG"" stopped.
2017-12-18 12:31:48.141 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 12:31:48.193 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:31:48.262 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:31:48.269 +03:00 [Debug] Connection id ""0HLA5V8KLNCFH"" completed keep alive response.
2017-12-18 12:31:48.270 +03:00 [Information] Request finished in 130.8222ms 404 
2017-12-18 12:31:48.305 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 12:31:48.306 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 12:31:48.306 +03:00 [Debug] Request did not match any routes.
2017-12-18 12:31:48.307 +03:00 [Debug] Connection id ""0HLA5V8KLNCFH"" completed keep alive response.
2017-12-18 12:31:48.307 +03:00 [Information] Request finished in 1.755ms 404 
2017-12-18 13:38:47.027 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 13:38:47.057 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 13:38:47.062 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 13:38:47.069 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 13:38:47.071 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:38:47.071 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 13:38:47.072 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:38:47.073 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 13:38:47.075 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 13:38:47.077 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 13:38:47.078 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 13:38:47.171 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 13:38:47.262 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 13:38:47.281 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 13:38:47.287 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.967 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.967 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.967 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.969 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.970 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:47.974 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:38:48.006 +03:00 [Information] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:38:48.007 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.007 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.030 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:38:48.038 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:38:48.054 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 13:38:48.057 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.057 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.067 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:38:48.071 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:38:48.075 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:38:48.075 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.075 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:38:48.080 +03:00 [Debug] Hosting starting
2017-12-18 13:38:48.111 +03:00 [Debug] Hosting started
2017-12-18 13:38:48.111 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 13:38:48.111 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 13:38:48.111 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 13:38:48.180 +03:00 [Debug] Connection id ""0HLA60E2OAJ46"" started.
2017-12-18 13:38:48.198 +03:00 [Debug] Connection id ""0HLA60E2OAJ46"" reset.
2017-12-18 13:38:48.198 +03:00 [Debug] Connection id ""0HLA60E2OAJ46"" disconnecting.
2017-12-18 13:38:48.199 +03:00 [Debug] Connection id ""0HLA60E2OAJ46"" sending FIN.
2017-12-18 13:38:48.201 +03:00 [Debug] Connection id ""0HLA60E2OAJ46"" stopped.
2017-12-18 13:49:48.132 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 13:49:48.166 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 13:49:48.174 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 13:49:48.182 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 13:49:48.184 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:49:48.184 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 13:49:48.185 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:49:48.186 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 13:49:48.188 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 13:49:48.190 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 13:49:48.191 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 13:49:48.424 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 13:49:48.551 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 13:49:48.574 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 13:49:48.592 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.179 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.179 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.179 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.181 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.182 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.186 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:49:49.245 +03:00 [Information] Executed DbCommand ("60"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:49:49.246 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.246 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.272 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:49:49.280 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:49:49.300 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 13:49:49.304 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.304 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.319 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:49:49.323 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:49:49.329 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:49:49.329 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.329 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:49:49.334 +03:00 [Debug] Hosting starting
2017-12-18 13:49:49.385 +03:00 [Debug] Hosting started
2017-12-18 13:49:49.386 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 13:49:49.386 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 13:49:49.386 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 13:49:49.413 +03:00 [Debug] Connection id ""0HLA60K7QB4D3"" started.
2017-12-18 13:49:49.413 +03:00 [Debug] Connection id ""0HLA60K7QB4D2"" started.
2017-12-18 13:49:49.433 +03:00 [Debug] Connection id ""0HLA60K7QB4D2"" reset.
2017-12-18 13:49:49.433 +03:00 [Debug] Connection id ""0HLA60K7QB4D2"" disconnecting.
2017-12-18 13:49:49.438 +03:00 [Debug] Connection id ""0HLA60K7QB4D2"" sending FIN.
2017-12-18 13:49:49.443 +03:00 [Debug] Connection id ""0HLA60K7QB4D2"" stopped.
2017-12-18 13:49:49.470 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 13:49:49.533 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 13:49:49.603 +03:00 [Debug] Request did not match any routes.
2017-12-18 13:49:49.610 +03:00 [Debug] Connection id ""0HLA60K7QB4D3"" completed keep alive response.
2017-12-18 13:49:49.610 +03:00 [Information] Request finished in 142.2958ms 404 
2017-12-18 13:49:49.646 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 13:49:49.646 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 13:49:49.646 +03:00 [Debug] Request did not match any routes.
2017-12-18 13:49:49.646 +03:00 [Debug] Connection id ""0HLA60K7QB4D3"" completed keep alive response.
2017-12-18 13:49:49.647 +03:00 [Information] Request finished in 0.6825ms 404 
2017-12-18 13:51:18.191 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 13:51:18.225 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 13:51:18.232 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 13:51:18.239 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 13:51:18.241 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:51:18.242 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 13:51:18.242 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 13:51:18.243 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 13:51:18.245 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 13:51:18.248 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 13:51:18.249 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 13:51:18.499 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 13:51:18.614 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 13:51:18.637 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 13:51:18.658 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.301 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.301 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.301 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.303 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.303 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.308 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:51:19.348 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 13:51:19.348 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.348 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.375 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:51:19.383 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 13:51:19.403 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 13:51:19.408 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.408 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.423 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:51:19.427 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 13:51:19.432 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:51:19.433 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.433 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:19.438 +03:00 [Debug] Hosting starting
2017-12-18 13:51:19.488 +03:00 [Debug] Hosting started
2017-12-18 13:51:19.488 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 13:51:19.488 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 13:51:19.488 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 13:51:19.499 +03:00 [Debug] Connection id ""0HLA60L2LF338"" started.
2017-12-18 13:51:19.499 +03:00 [Debug] Connection id ""0HLA60L2LF337"" started.
2017-12-18 13:51:19.520 +03:00 [Debug] Connection id ""0HLA60L2LF337"" reset.
2017-12-18 13:51:19.520 +03:00 [Debug] Connection id ""0HLA60L2LF337"" disconnecting.
2017-12-18 13:51:19.521 +03:00 [Debug] Connection id ""0HLA60L2LF337"" sending FIN.
2017-12-18 13:51:19.532 +03:00 [Debug] Connection id ""0HLA60L2LF337"" stopped.
2017-12-18 13:51:19.560 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 13:51:19.622 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 13:51:19.697 +03:00 [Debug] Request did not match any routes.
2017-12-18 13:51:19.703 +03:00 [Debug] Connection id ""0HLA60L2LF338"" completed keep alive response.
2017-12-18 13:51:19.704 +03:00 [Information] Request finished in 145.8962ms 404 
2017-12-18 13:51:19.733 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 13:51:19.734 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 13:51:19.734 +03:00 [Debug] Request did not match any routes.
2017-12-18 13:51:19.734 +03:00 [Debug] Connection id ""0HLA60L2LF338"" completed keep alive response.
2017-12-18 13:51:19.734 +03:00 [Information] Request finished in 0.7084ms 404 
2017-12-18 13:51:25.215 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=qweqweqwe%C4%B1oqwehwqehq%C5%9Fkwehjqweqwqeqwopeuqwoe%C4%B1hqweo%C4%B1uyqqqweqwe%%%%%%%%%5we%C4%9Fo%C4%B1uqwe%C4%9Fo%C4%B1uqwe%C4%9Foqwei&receiver=ilkercig  0
2017-12-18 13:51:25.215 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 13:51:25.216 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 13:51:25.260 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 13:51:25.265 +03:00 [Information] Dark Throne
2017-12-18 13:51:25.295 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["qweqweqweoqwehwqehqkwehjqweqwqeqwopeuqwoehqweouyqqqweqwe%%%%%%%%%5weouqweouqweoqwei", "ilkercig"]) - ModelState is Valid
2017-12-18 13:51:25.300 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 13:51:25.305 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 13:51:25.307 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 13:51:25.322 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 13:51:25.322 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.322 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.324 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 13:51:25.345 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 13:51:25.365 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:51:25.365 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.365 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.371 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.372 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.372 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 13:51:25.372 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 13:51:25.372 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:51:25.372 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.372 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.404 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.404 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.405 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 13:51:25.419 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 13:51:25.422 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 13:51:25.427 +03:00 [Debug] A data reader was disposed.
2017-12-18 13:51:25.428 +03:00 [Debug] Committing transaction.
2017-12-18 13:51:25.428 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.428 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 13:51:25.428 +03:00 [Debug] Disposing transaction.
2017-12-18 13:51:25.429 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 13:51:25.433 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 13:51:25.434 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 13:51:25.434 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 13:51:25.497 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 234.2388ms
2017-12-18 13:51:25.498 +03:00 [Debug] Connection id ""0HLA60L2LF338"" completed keep alive response.
2017-12-18 13:51:25.498 +03:00 [Information] Request finished in 282.912ms 200 application/json; charset=utf-8
2017-12-18 15:30:50.686 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:30:50.722 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:30:50.734 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:30:50.745 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:30:50.747 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:30:50.747 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:30:50.748 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:30:50.749 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:30:50.751 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:30:50.754 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:30:50.755 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:30:51.074 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:30:51.223 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:30:51.264 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:30:51.295 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.193 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.193 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.194 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.197 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.198 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.204 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:30:52.245 +03:00 [Information] Executed DbCommand ("42"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:30:52.245 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.245 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.278 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:30:52.287 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:30:52.312 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:30:52.318 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.318 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.332 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:30:52.335 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:30:52.339 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:30:52.339 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.339 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:30:52.344 +03:00 [Debug] Hosting starting
2017-12-18 15:30:52.490 +03:00 [Debug] Hosting started
2017-12-18 15:30:52.490 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:30:52.490 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:30:52.490 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:30:52.686 +03:00 [Debug] Connection id ""0HLA62CMQ6OFG"" started.
2017-12-18 15:30:52.686 +03:00 [Debug] Connection id ""0HLA62CMQ6OFH"" started.
2017-12-18 15:30:52.708 +03:00 [Debug] Connection id ""0HLA62CMQ6OFH"" reset.
2017-12-18 15:30:52.709 +03:00 [Debug] Connection id ""0HLA62CMQ6OFH"" disconnecting.
2017-12-18 15:30:52.710 +03:00 [Debug] Connection id ""0HLA62CMQ6OFH"" sending FIN.
2017-12-18 15:30:52.719 +03:00 [Debug] Connection id ""0HLA62CMQ6OFH"" stopped.
2017-12-18 15:30:52.758 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:30:52.829 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:30:52.915 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:30:52.925 +03:00 [Debug] Connection id ""0HLA62CMQ6OFG"" completed keep alive response.
2017-12-18 15:30:52.926 +03:00 [Information] Request finished in 170.0355ms 404 
2017-12-18 15:30:52.962 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:30:52.962 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:30:52.962 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:30:52.962 +03:00 [Debug] Connection id ""0HLA62CMQ6OFG"" completed keep alive response.
2017-12-18 15:30:52.963 +03:00 [Information] Request finished in 0.7118ms 404 
2017-12-18 15:31:08.649 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 15:31:08.650 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:31:08.651 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:31:08.661 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"ec8700af-a2f7-40bc-a6a7-434fe55b9e4a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:31:08.688 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 15:31:08.698 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 6.4504ms
2017-12-18 15:31:08.699 +03:00 [Error] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Armut.Sample.Messaging.Repository.IBlockingRepository' while attempting to activate 'Armut.Sample.Messaging.Controllers.BlockingController'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 15:31:08.794 +03:00 [Debug] Connection id ""0HLA62CMQ6OFG"" completed keep alive response.
2017-12-18 15:31:08.794 +03:00 [Information] Request finished in 144.545ms 500 text/html; charset=utf-8
2017-12-18 15:32:01.713 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:32:01.773 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:32:01.780 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:32:01.789 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:32:01.791 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:32:01.792 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:32:01.793 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:32:01.793 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:32:01.795 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:32:01.799 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:32:01.800 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:32:02.062 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:32:02.195 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:32:02.220 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:32:02.243 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.064 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.064 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.065 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.067 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.068 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.073 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:32:03.114 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:32:03.114 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.114 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.148 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:32:03.156 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:32:03.178 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:32:03.183 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.183 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.197 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:32:03.204 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:32:03.209 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:32:03.210 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.210 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:03.218 +03:00 [Debug] Hosting starting
2017-12-18 15:32:03.282 +03:00 [Debug] Hosting started
2017-12-18 15:32:03.282 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:32:03.282 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:32:03.282 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:32:03.396 +03:00 [Debug] Connection id ""0HLA62DBSHSED"" started.
2017-12-18 15:32:03.396 +03:00 [Debug] Connection id ""0HLA62DBSHSEC"" started.
2017-12-18 15:32:03.417 +03:00 [Debug] Connection id ""0HLA62DBSHSEC"" reset.
2017-12-18 15:32:03.417 +03:00 [Debug] Connection id ""0HLA62DBSHSEC"" disconnecting.
2017-12-18 15:32:03.418 +03:00 [Debug] Connection id ""0HLA62DBSHSEC"" sending FIN.
2017-12-18 15:32:03.423 +03:00 [Debug] Connection id ""0HLA62DBSHSEC"" stopped.
2017-12-18 15:32:03.468 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:32:03.531 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:32:03.608 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:32:03.615 +03:00 [Debug] Connection id ""0HLA62DBSHSED"" completed keep alive response.
2017-12-18 15:32:03.616 +03:00 [Information] Request finished in 149.6878ms 404 
2017-12-18 15:32:03.648 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:32:03.649 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:32:03.649 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:32:03.652 +03:00 [Debug] Connection id ""0HLA62DBSHSED"" completed keep alive response.
2017-12-18 15:32:03.653 +03:00 [Information] Request finished in 4.7611ms 404 
2017-12-18 15:32:06.241 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 15:32:06.241 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:32:06.242 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:32:06.252 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"cdf7ccf8-bf2b-4794-8b5b-4566dc78830a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:32:06.275 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 15:32:06.285 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 15:32:09.516 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:32:09.520 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:32:09.522 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:32:09.538 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:32:09.538 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:09.538 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:09.540 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:32:09.561 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:32:09.581 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:32:09.581 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:32:09.581 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:46.760 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:33:46.796 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:33:46.802 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:33:46.811 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:33:46.813 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:33:46.813 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:33:46.814 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:33:46.814 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:33:46.817 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:33:46.820 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:33:46.820 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:33:47.121 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:33:47.250 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:33:47.283 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:33:47.303 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.951 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.951 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.951 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.954 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.954 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:47.958 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:33:47.999 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:33:48.000 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.000 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.028 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:33:48.036 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:33:48.058 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:33:48.062 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.062 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.075 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:33:48.080 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:33:48.089 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:33:48.089 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.089 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:48.095 +03:00 [Debug] Hosting starting
2017-12-18 15:33:48.166 +03:00 [Debug] Hosting started
2017-12-18 15:33:48.167 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:33:48.167 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:33:48.167 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:33:48.257 +03:00 [Debug] Connection id ""0HLA62EB4IHSQ"" started.
2017-12-18 15:33:48.257 +03:00 [Debug] Connection id ""0HLA62EB4IHSP"" started.
2017-12-18 15:33:48.280 +03:00 [Debug] Connection id ""0HLA62EB4IHSP"" reset.
2017-12-18 15:33:48.280 +03:00 [Debug] Connection id ""0HLA62EB4IHSP"" disconnecting.
2017-12-18 15:33:48.282 +03:00 [Debug] Connection id ""0HLA62EB4IHSP"" sending FIN.
2017-12-18 15:33:48.291 +03:00 [Debug] Connection id ""0HLA62EB4IHSP"" stopped.
2017-12-18 15:33:48.332 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:33:48.398 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:33:48.485 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:33:48.496 +03:00 [Debug] Connection id ""0HLA62EB4IHSQ"" completed keep alive response.
2017-12-18 15:33:48.496 +03:00 [Information] Request finished in 166.6727ms 404 
2017-12-18 15:33:48.555 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:33:48.556 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:33:48.556 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:33:48.558 +03:00 [Debug] Connection id ""0HLA62EB4IHSQ"" completed keep alive response.
2017-12-18 15:33:48.558 +03:00 [Information] Request finished in 3.0966ms 404 
2017-12-18 15:33:55.088 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 15:33:55.088 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:33:55.089 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:33:55.098 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"7003f25c-6ffb-424f-857d-2b44c664ec1c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:33:55.124 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 15:33:55.136 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 15:33:59.161 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:33:59.165 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:33:59.168 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:33:59.184 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:33:59.185 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:59.185 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:59.186 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:33:59.209 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:33:59.230 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:33:59.230 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:33:59.230 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.090 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName 
}
"'
2017-12-18 15:34:10.091 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName 
}
"'
2017-12-18 15:34:10.106 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:34:10.106 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.106 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.107 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.111 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.112 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:10.112 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.112 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.125 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.125 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.126 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.126 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.126 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:10.126 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.126 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.143 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.144 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.144 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.144 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:10.144 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:10.144 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:10.144 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:43.834 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:34:43.870 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:34:43.877 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:34:43.884 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:34:43.886 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:34:43.887 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:34:43.888 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:34:43.888 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:34:43.890 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:34:43.893 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:34:43.893 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:34:44.130 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:34:44.274 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:34:44.303 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:34:44.326 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.062 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.062 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.062 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.064 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.064 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.069 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:34:45.113 +03:00 [Information] Executed DbCommand ("44"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:34:45.113 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.113 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.143 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:34:45.151 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:34:45.175 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:34:45.179 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.179 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.190 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:34:45.194 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:34:45.199 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:45.199 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.199 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:45.203 +03:00 [Debug] Hosting starting
2017-12-18 15:34:45.251 +03:00 [Debug] Hosting started
2017-12-18 15:34:45.251 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:34:45.251 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:34:45.251 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:34:45.253 +03:00 [Debug] Connection id ""0HLA62ES44D34"" started.
2017-12-18 15:34:45.276 +03:00 [Debug] Connection id ""0HLA62ES44D35"" started.
2017-12-18 15:34:45.276 +03:00 [Debug] Connection id ""0HLA62ES44D36"" started.
2017-12-18 15:34:45.281 +03:00 [Debug] Connection id ""0HLA62ES44D35"" reset.
2017-12-18 15:34:45.281 +03:00 [Debug] Connection id ""0HLA62ES44D35"" disconnecting.
2017-12-18 15:34:45.284 +03:00 [Debug] Connection id ""0HLA62ES44D35"" sending FIN.
2017-12-18 15:34:45.286 +03:00 [Debug] Connection id ""0HLA62ES44D35"" stopped.
2017-12-18 15:34:45.328 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 15:34:45.328 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:34:45.412 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:34:45.412 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:34:45.489 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:34:45.490 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:34:45.497 +03:00 [Debug] Connection id ""0HLA62ES44D34"" completed keep alive response.
2017-12-18 15:34:45.498 +03:00 [Information] Request finished in 171.4492ms 404 
2017-12-18 15:34:45.530 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"4984d1e6-5f94-4141-b7b6-4e013cc19e9b"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:34:45.550 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:34:45.550 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:34:45.551 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:34:45.551 +03:00 [Debug] Connection id ""0HLA62ES44D34"" completed keep alive response.
2017-12-18 15:34:45.551 +03:00 [Information] Request finished in 1.013ms 404 
2017-12-18 15:34:45.577 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 15:34:45.588 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 15:34:46.855 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:34:46.862 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:34:46.864 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:34:46.880 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:34:46.880 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.881 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.883 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:34:46.905 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:34:46.926 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:46.926 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.926 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.936 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 15:34:46.940 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 15:34:46.941 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 15:34:46.941 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 15:34:46.985 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName 
}
"'
2017-12-18 15:34:46.986 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName 
}
"'
2017-12-18 15:34:46.998 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:34:46.998 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.998 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:46.999 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:47.001 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 15:34:47.010 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:34:47.010 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:47.010 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:34:47.017 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 1437.376ms
2017-12-18 15:34:47.018 +03:00 [Debug] Connection id ""0HLA62ES44D36"" completed keep alive response.
2017-12-18 15:34:47.018 +03:00 [Information] Request finished in 1693.0585ms 200 application/json; charset=utf-8
2017-12-18 15:45:15.295 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:45:15.340 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:45:15.347 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:45:15.355 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:45:15.357 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:45:15.357 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:45:15.358 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:45:15.359 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:45:15.361 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:45:15.364 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:45:15.365 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:45:15.613 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:45:15.748 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:45:15.786 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:45:15.818 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.352 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.352 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.352 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.354 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.355 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.360 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:45:16.399 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:45:16.399 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.399 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.442 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:45:16.453 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:45:16.481 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:45:16.485 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.486 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.498 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:45:16.502 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:45:16.507 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:45:16.507 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.507 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:45:16.512 +03:00 [Debug] Hosting starting
2017-12-18 15:45:16.560 +03:00 [Debug] Hosting started
2017-12-18 15:45:16.560 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:45:16.560 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:45:16.560 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:45:16.766 +03:00 [Debug] Connection id ""0HLA62KOAMVJU"" started.
2017-12-18 15:45:16.766 +03:00 [Debug] Connection id ""0HLA62KOAMVJV"" started.
2017-12-18 15:45:16.795 +03:00 [Debug] Connection id ""0HLA62KOAMVJU"" reset.
2017-12-18 15:45:16.795 +03:00 [Debug] Connection id ""0HLA62KOAMVJU"" disconnecting.
2017-12-18 15:45:16.804 +03:00 [Debug] Connection id ""0HLA62KOAMVJU"" sending FIN.
2017-12-18 15:45:16.810 +03:00 [Debug] Connection id ""0HLA62KOAMVJU"" stopped.
2017-12-18 15:45:16.882 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:45:16.980 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:45:17.080 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:45:17.091 +03:00 [Debug] Connection id ""0HLA62KOAMVJV"" completed keep alive response.
2017-12-18 15:45:17.092 +03:00 [Information] Request finished in 212.8019ms 404 
2017-12-18 15:45:17.150 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:45:17.150 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:45:17.150 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:45:17.150 +03:00 [Debug] Connection id ""0HLA62KOAMVJV"" completed keep alive response.
2017-12-18 15:45:17.151 +03:00 [Information] Request finished in 0.7522ms 404 
2017-12-18 15:46:01.448 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22rick%22  0
2017-12-18 15:46:01.448 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:46:01.450 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:46:01.462 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"aff3757a-d3cc-42b6-87d3-e95ea01e4824"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:46:01.462 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"3605f31c-4454-44e5-ac9e-95546967e665"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:46:01.496 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 15:46:01.533 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"rick\""]) - ModelState is Valid
2017-12-18 15:46:04.014 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:46:04.019 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:46:04.021 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:46:04.039 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:46:04.040 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:04.040 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:04.041 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:04.062 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:04.062 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:46:04.063 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:04.063 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:09.464 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 15:46:09.469 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 15:46:09.469 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 15:46:09.469 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 15:46:09.522 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 8023.233ms
2017-12-18 15:46:09.523 +03:00 [Debug] Connection id ""0HLA62KOAMVJV"" completed keep alive response.
2017-12-18 15:46:09.523 +03:00 [Information] Request finished in 8074.7528ms 404 application/json; charset=utf-8
2017-12-18 15:46:36.202 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 15:46:36.202 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:46:36.202 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:46:36.202 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"aff3757a-d3cc-42b6-87d3-e95ea01e4824"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:46:36.202 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"3605f31c-4454-44e5-ac9e-95546967e665"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:46:36.203 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 15:46:36.203 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 15:46:37.946 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:46:37.947 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:37.947 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:37.948 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:37.951 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:37.972 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:46:37.972 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:37.972 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:39.530 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:39.530 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:39.530 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:39.530 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:46:39.530 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:46:39.530 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:39.530 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:46:41.332 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 15:46:41.337 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 15:46:41.337 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 5134.4223ms
2017-12-18 15:46:41.337 +03:00 [Debug] Connection id ""0HLA62KOAMVJV"" completed keep alive response.
2017-12-18 15:46:41.337 +03:00 [Information] Request finished in 5135.2655ms 200 
2017-12-18 15:47:19.324 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:47:19.360 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:47:19.368 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:47:19.376 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:47:19.379 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:47:19.379 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:47:19.380 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:47:19.381 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:47:19.383 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:47:19.386 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:47:19.387 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:47:19.641 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:47:19.766 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:47:19.788 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:47:19.809 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.472 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.472 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.472 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.474 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.475 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.480 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:47:20.520 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:47:20.520 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.520 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.553 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:47:20.562 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:47:20.583 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:47:20.588 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.588 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.600 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:47:20.604 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:47:20.609 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:47:20.609 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.609 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:20.614 +03:00 [Debug] Hosting starting
2017-12-18 15:47:20.666 +03:00 [Debug] Hosting started
2017-12-18 15:47:20.666 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:47:20.666 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:47:20.666 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:47:20.674 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" started.
2017-12-18 15:47:20.674 +03:00 [Debug] Connection id ""0HLA62LT8CRPP"" started.
2017-12-18 15:47:20.694 +03:00 [Debug] Connection id ""0HLA62LT8CRPP"" reset.
2017-12-18 15:47:20.694 +03:00 [Debug] Connection id ""0HLA62LT8CRPP"" disconnecting.
2017-12-18 15:47:20.696 +03:00 [Debug] Connection id ""0HLA62LT8CRPP"" sending FIN.
2017-12-18 15:47:20.703 +03:00 [Debug] Connection id ""0HLA62LT8CRPP"" stopped.
2017-12-18 15:47:20.745 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:47:20.813 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:47:20.881 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:47:20.888 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" completed keep alive response.
2017-12-18 15:47:20.889 +03:00 [Information] Request finished in 146.6708ms 404 
2017-12-18 15:47:20.928 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:47:20.928 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:47:20.928 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:47:20.928 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" completed keep alive response.
2017-12-18 15:47:20.928 +03:00 [Information] Request finished in 0.793ms 404 
2017-12-18 15:47:28.249 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 15:47:28.249 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:47:28.250 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:47:28.261 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"7ae57364-844c-4e1a-be4e-e2f42a33b05e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:47:28.261 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"bbea84dd-de40-4816-b660-d996e737d86a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:47:28.297 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 15:47:28.329 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 15:47:29.733 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:47:29.738 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:47:29.740 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:47:29.756 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:47:29.756 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.756 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.758 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:47:29.781 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:47:29.803 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:47:29.803 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.803 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.810 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.810 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.811 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:47:29.811 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:47:29.811 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:47:29.811 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.811 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.833 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.833 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.835 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 15:47:29.850 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 15:47:29.853 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 15:47:29.853 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:47:29.854 +03:00 [Debug] Committing transaction.
2017-12-18 15:47:29.854 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.854 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:47:29.854 +03:00 [Debug] Disposing transaction.
2017-12-18 15:47:29.855 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 15:47:29.858 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 15:47:29.862 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1562.4784ms
2017-12-18 15:47:29.864 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" completed keep alive response.
2017-12-18 15:47:29.864 +03:00 [Information] Request finished in 1614.9331ms 200 
2017-12-18 15:48:56.753 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" received FIN.
2017-12-18 15:48:56.753 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" disconnecting.
2017-12-18 15:48:56.753 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" sending FIN.
2017-12-18 15:48:56.753 +03:00 [Debug] Connection id ""0HLA62LT8CRPO"" stopped.
2017-12-18 15:51:46.918 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 15:51:46.968 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 15:51:46.976 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 15:51:46.989 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 15:51:46.992 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:51:46.992 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 15:51:46.993 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 15:51:46.994 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 15:51:46.996 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 15:51:46.999 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 15:51:47.000 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 15:51:47.274 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 15:51:47.399 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 15:51:47.426 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:51:47.454 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.135 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.136 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.136 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.138 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.139 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.143 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:51:48.180 +03:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 15:51:48.180 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.180 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.207 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:51:48.215 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 15:51:48.240 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:51:48.245 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.245 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.258 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:51:48.262 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 15:51:48.267 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:51:48.268 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.268 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:48.273 +03:00 [Debug] Hosting starting
2017-12-18 15:51:48.317 +03:00 [Debug] Hosting started
2017-12-18 15:51:48.317 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 15:51:48.317 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 15:51:48.317 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 15:51:48.382 +03:00 [Debug] Connection id ""0HLA62OD1EQDL"" started.
2017-12-18 15:51:48.382 +03:00 [Debug] Connection id ""0HLA62OD1EQDK"" started.
2017-12-18 15:51:48.404 +03:00 [Debug] Connection id ""0HLA62OD1EQDL"" reset.
2017-12-18 15:51:48.404 +03:00 [Debug] Connection id ""0HLA62OD1EQDL"" disconnecting.
2017-12-18 15:51:48.405 +03:00 [Debug] Connection id ""0HLA62OD1EQDL"" sending FIN.
2017-12-18 15:51:48.414 +03:00 [Debug] Connection id ""0HLA62OD1EQDL"" stopped.
2017-12-18 15:51:48.450 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 15:51:48.514 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:51:48.580 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:51:48.586 +03:00 [Debug] Connection id ""0HLA62OD1EQDK"" completed keep alive response.
2017-12-18 15:51:48.587 +03:00 [Information] Request finished in 139.6088ms 404 
2017-12-18 15:51:48.623 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 15:51:48.623 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:51:48.623 +03:00 [Debug] Request did not match any routes.
2017-12-18 15:51:48.623 +03:00 [Debug] Connection id ""0HLA62OD1EQDK"" completed keep alive response.
2017-12-18 15:51:48.623 +03:00 [Information] Request finished in 0.6873ms 404 
2017-12-18 15:51:53.624 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 15:51:53.625 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 15:51:53.626 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 15:51:53.635 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"918bc608-3eff-406e-a67f-bd638749a5d5"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:51:53.635 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Post (Armut.Sample.Messaging)"' with id '"59721b21-6aec-441b-be23-01753211554a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:51:53.635 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"cd9c8305-6dff-4180-bd9d-8872e698e402"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 15:51:53.673 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 15:51:53.705 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 15:51:53.707 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 15:51:53.713 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:51:53.716 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 15:51:53.733 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 15:51:53.734 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.734 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.735 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:51:53.757 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:51:53.777 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:51:53.778 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.778 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.784 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.784 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.785 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:51:53.785 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 15:51:53.785 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:51:53.785 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.785 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.805 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.806 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.806 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 15:51:53.823 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 15:51:53.826 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 15:51:53.827 +03:00 [Debug] A data reader was disposed.
2017-12-18 15:51:53.827 +03:00 [Debug] Committing transaction.
2017-12-18 15:51:53.828 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.828 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 15:51:53.828 +03:00 [Debug] Disposing transaction.
2017-12-18 15:51:53.828 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 15:51:53.832 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 15:51:53.835 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 160.2696ms
2017-12-18 15:51:53.837 +03:00 [Debug] Connection id ""0HLA62OD1EQDK"" completed keep alive response.
2017-12-18 15:51:53.837 +03:00 [Information] Request finished in 212.9058ms 200 
2017-12-18 16:31:21.569 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:31:21.602 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:31:21.608 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:31:21.616 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:31:21.618 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:31:21.619 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:31:21.619 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:31:21.620 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:31:21.622 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:31:21.625 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:31:21.625 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:31:21.718 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:31:21.810 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:31:21.830 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:31:21.836 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.519 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.519 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.520 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.521 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.521 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.525 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:31:22.559 +03:00 [Information] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:31:22.559 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.559 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.586 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:31:22.595 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:31:22.620 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:31:22.625 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.625 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.637 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:31:22.642 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:31:22.647 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:31:22.647 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.647 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:31:22.652 +03:00 [Debug] Hosting starting
2017-12-18 16:31:22.685 +03:00 [Debug] Hosting started
2017-12-18 16:31:22.685 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:31:22.685 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:31:22.685 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:31:22.734 +03:00 [Debug] Connection id ""0HLA63EGL1EIC"" started.
2017-12-18 16:31:22.776 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?username=ilkercig&body=bu%20benim%20ilk%20mesaj%C4%B1m  
2017-12-18 16:31:22.799 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:31:22.844 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:31:22.853 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"c25c86af-ee5a-400b-827d-58cc67eaf847"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:31:22.856 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:31:22.857 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:31:22.859 +03:00 [Debug] Connection id ""0HLA63EGL1EIC"" completed keep alive response.
2017-12-18 16:31:22.859 +03:00 [Information] Request finished in 84.6238ms 404 
2017-12-18 16:31:32.641 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?username=ilkercig&body=bu%20benim%20ilk%20mesaj%C4%B1m  
2017-12-18 16:31:32.642 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:31:32.642 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:31:32.642 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"c25c86af-ee5a-400b-827d-58cc67eaf847"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:31:32.642 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:31:32.642 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:31:32.642 +03:00 [Debug] Connection id ""0HLA63EGL1EIC"" completed keep alive response.
2017-12-18 16:31:32.642 +03:00 [Information] Request finished in 0.8784ms 404 
2017-12-18 16:31:50.581 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?username=ilkercig&body=bubenimilkmesaj%C4%B1m  
2017-12-18 16:31:50.581 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:31:50.581 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:31:50.581 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"c25c86af-ee5a-400b-827d-58cc67eaf847"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:31:50.581 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:31:50.581 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:31:50.581 +03:00 [Debug] Connection id ""0HLA63EGL1EIC"" completed keep alive response.
2017-12-18 16:31:50.581 +03:00 [Information] Request finished in 0.4144ms 404 
2017-12-18 16:32:16.787 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?body=heyheyhey&username=ilkercig  
2017-12-18 16:32:16.787 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:16.787 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:32:16.787 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"c25c86af-ee5a-400b-827d-58cc67eaf847"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:32:16.787 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:32:16.787 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:16.787 +03:00 [Debug] Connection id ""0HLA63EGL1EIC"" completed keep alive response.
2017-12-18 16:32:16.787 +03:00 [Information] Request finished in 0.3589ms 404 
2017-12-18 16:32:29.293 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:32:29.327 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:32:29.334 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:32:29.344 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:32:29.346 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:32:29.347 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:32:29.347 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:32:29.348 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:32:29.350 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:32:29.353 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:32:29.354 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:32:29.568 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:32:29.685 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:32:29.707 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:32:29.729 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.423 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.424 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.424 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.426 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.426 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.430 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:32:30.470 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:32:30.470 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.470 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.499 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:32:30.507 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:32:30.529 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:32:30.533 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.533 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.545 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:32:30.549 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:32:30.554 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:32:30.554 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.554 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:32:30.559 +03:00 [Debug] Hosting starting
2017-12-18 16:32:30.610 +03:00 [Debug] Hosting started
2017-12-18 16:32:30.610 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:32:30.610 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:32:30.610 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:32:30.678 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" started.
2017-12-18 16:32:30.678 +03:00 [Debug] Connection id ""0HLA63F4T0FF7"" started.
2017-12-18 16:32:30.700 +03:00 [Debug] Connection id ""0HLA63F4T0FF7"" reset.
2017-12-18 16:32:30.700 +03:00 [Debug] Connection id ""0HLA63F4T0FF7"" disconnecting.
2017-12-18 16:32:30.702 +03:00 [Debug] Connection id ""0HLA63F4T0FF7"" sending FIN.
2017-12-18 16:32:30.713 +03:00 [Debug] Connection id ""0HLA63F4T0FF7"" stopped.
2017-12-18 16:32:30.746 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 16:32:30.816 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:30.890 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:30.896 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:32:30.897 +03:00 [Information] Request finished in 152.9733ms 404 
2017-12-18 16:32:30.929 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 16:32:30.930 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:30.930 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:30.930 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:32:30.930 +03:00 [Information] Request finished in 0.7223ms 404 
2017-12-18 16:32:31.836 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?body=heyheyhey&username=ilkercig  
2017-12-18 16:32:31.836 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:31.838 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:32:31.847 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"a034796b-5065-49af-bba5-86a78b486a15"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:32:31.850 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:32:31.851 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:31.851 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:32:31.851 +03:00 [Information] Request finished in 15.1984ms 404 
2017-12-18 16:32:35.329 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?body=heyheyhey&username=ilkercig  
2017-12-18 16:32:35.329 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:35.329 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:32:35.329 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"a034796b-5065-49af-bba5-86a78b486a15"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:32:35.329 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:32:35.329 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:35.329 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:32:35.329 +03:00 [Information] Request finished in 0.5448ms 404 
2017-12-18 16:32:51.225 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/message/send?body=heyheyhey&receiver=ilkercig  
2017-12-18 16:32:51.225 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:32:51.225 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:32:51.225 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"a034796b-5065-49af-bba5-86a78b486a15"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:32:51.225 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:32:51.225 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:32:51.225 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:32:51.225 +03:00 [Information] Request finished in 0.3513ms 404 
2017-12-18 16:33:11.829 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=heyheyhey&receiver=ilkercig  0
2017-12-18 16:33:11.829 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:33:11.829 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:33:11.863 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 16:33:11.893 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["heyheyhey", "ilkercig"]) - ModelState is Valid
2017-12-18 16:33:28.306 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:33:28.310 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:33:28.312 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:33:28.327 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:33:28.328 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.328 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.329 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:28.352 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:28.372 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:28.372 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.372 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.380 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.380 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.381 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:28.381 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:28.381 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:28.381 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.381 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.390 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 16:33:28.391 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 16:33:28.403 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:33:28.403 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.403 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.403 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:33:28.406 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:33:28.406 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:28.406 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.406 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.447 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.448 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.449 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:33:28.464 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:33:28.468 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:33:28.473 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:28.474 +03:00 [Debug] Committing transaction.
2017-12-18 16:33:28.474 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.474 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:28.474 +03:00 [Debug] Disposing transaction.
2017-12-18 16:33:28.476 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:33:28.480 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:33:28.481 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:33:28.481 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:33:28.556 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 16689.7445ms
2017-12-18 16:33:28.557 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:33:28.557 +03:00 [Information] Request finished in 16728.439ms 200 application/json; charset=utf-8
2017-12-18 16:33:42.707 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=bunu%20da%20okumad%C4%B1n&receiver=ilkercig  0
2017-12-18 16:33:42.707 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:33:42.707 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:33:42.707 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 16:33:42.708 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["bunu da okumadn", "ilkercig"]) - ModelState is Valid
2017-12-18 16:33:45.327 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:33:45.328 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.328 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.328 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:45.328 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:45.329 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:45.329 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.329 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.329 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.329 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.329 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:45.329 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:33:45.329 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:45.329 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.329 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.330 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.330 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.330 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:33:45.330 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:33:45.330 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:45.330 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.330 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.331 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.331 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.332 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:33:45.332 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:33:45.332 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:33:45.333 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:33:45.336 +03:00 [Debug] Committing transaction.
2017-12-18 16:33:45.336 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.336 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:33:45.336 +03:00 [Debug] Disposing transaction.
2017-12-18 16:33:45.336 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:33:45.337 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:33:45.337 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:33:45.337 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:33:45.337 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2629.5936ms
2017-12-18 16:33:45.337 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:33:45.337 +03:00 [Information] Request finished in 2630.4204ms 200 application/json; charset=utf-8
2017-12-18 16:33:59.982 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=paso%20at%C4%B1yom%20okumuyon&receiver=ilkercig  0
2017-12-18 16:33:59.982 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:33:59.982 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 16:33:59.982 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 16:33:59.982 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["paso atyom okumuyon", "ilkercig"]) - ModelState is Valid
2017-12-18 16:34:01.824 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:34:01.824 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.824 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.824 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:34:01.824 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:34:01.825 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:34:01.825 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.825 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.825 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.825 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.825 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:34:01.826 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:34:01.826 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:34:01.826 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.826 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.826 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.826 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.826 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:34:01.826 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 16:34:01.826 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:34:01.826 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.826 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.827 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.827 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.827 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:34:01.827 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:34:01.828 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 16:34:01.828 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:34:01.830 +03:00 [Debug] Committing transaction.
2017-12-18 16:34:01.830 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.830 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:34:01.830 +03:00 [Debug] Disposing transaction.
2017-12-18 16:34:01.830 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:34:01.830 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:34:01.830 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:34:01.830 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:34:01.831 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1848.7515ms
2017-12-18 16:34:01.831 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:34:01.831 +03:00 [Information] Request finished in 1849.2668ms 200 application/json; charset=utf-8
2017-12-18 16:34:32.704 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view/unread  0
2017-12-18 16:34:32.704 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:34:32.704 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:34:32.704 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"ebbb177a-61a3-4d6c-a22b-fc52e168a379"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:34:32.704 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:34:32.704 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:34:32.704 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:34:32.704 +03:00 [Information] Request finished in 0.489ms 404 
2017-12-18 16:34:52.908 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view/unread?sender=ilkercig  0
2017-12-18 16:34:52.908 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:34:52.908 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:34:52.908 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"ebbb177a-61a3-4d6c-a22b-fc52e168a379"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:34:52.908 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:34:52.908 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:34:52.908 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:34:52.908 +03:00 [Information] Request finished in 0.403ms 404 
2017-12-18 16:35:02.602 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view/unread?sender=ilkercig  0
2017-12-18 16:35:02.602 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:35:02.602 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:35:02.602 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"ebbb177a-61a3-4d6c-a22b-fc52e168a379"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:35:02.602 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:35:02.602 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:35:02.602 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:35:02.602 +03:00 [Information] Request finished in 0.5162ms 404 
2017-12-18 16:35:16.694 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:35:16.694 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:35:16.694 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:35:16.696 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:35:16.696 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:35:18.360 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:35:18.360 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.361 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.361 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:18.363 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:18.363 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:35:18.363 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.363 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.363 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.363 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.363 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:18.364 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:18.364 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:35:18.364 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.364 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.369 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:35:18.371 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:35:18.376 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:35:18.377 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.377 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:18.377 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:35:18.388 +03:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:35:18.436 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16
2017-12-18 16:35:27.815 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:35:27.815 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:27.815 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:27.817 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 11120.9105ms
2017-12-18 16:35:27.818 +03:00 [Error] An unhandled exception has occurred while executing the request
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Update(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 47
   at Armut.Sample.Messaging.Controllers.MessageController.MarkMessageAsRead(Message message) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 131
   at Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender(String sender) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 118
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16
2017-12-18 16:35:27.903 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:35:27.903 +03:00 [Information] Request finished in 11209.3793ms 500 text/html; charset=utf-8
2017-12-18 16:35:30.359 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:35:30.359 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:35:30.359 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:35:30.359 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:35:30.359 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:35:31.729 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:35:31.729 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:31.729 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:31.729 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:31.730 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:31.730 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:35:31.730 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:31.730 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:33.407 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:33.407 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:33.407 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:33.408 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:35:33.408 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:35:33.408 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:33.408 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:37.041 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:37.041 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:35:37.041 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:35:37.042 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:35:59.374 +03:00 [Warning] Heartbeat took longer than "00:00:01" at "12/18/2017 13:35:51 +00:00".
2017-12-18 16:36:10.385 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16
2017-12-18 16:36:22.040 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:36:22.040 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:22.040 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:22.041 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 51682.3015ms
2017-12-18 16:36:22.042 +03:00 [Error] An unhandled exception has occurred while executing the request
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Update(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 47
   at Armut.Sample.Messaging.Controllers.MessageController.MarkMessageAsRead(Message message) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 131
   at Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender(String sender) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 118
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16
2017-12-18 16:36:22.099 +03:00 [Debug] Connection id ""0HLA63F4T0FF6"" completed keep alive response.
2017-12-18 16:36:22.099 +03:00 [Information] Request finished in 51740.199ms 500 text/html; charset=utf-8
2017-12-18 16:36:30.973 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:36:30.973 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:36:30.973 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:36:30.973 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:36:30.974 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:36:32.807 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:36:32.807 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.807 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.807 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:36:32.808 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:36:32.808 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:36:32.808 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.808 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.808 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.808 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.808 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:36:32.809 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:36:32.809 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:36:32.809 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.809 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.809 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.809 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:36:32.809 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:36:32.809 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:36:32.817 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:040c58ce-bfed-48d8-bd05-543ba86a795e
Error Number:3988,State:1,Class:16
2017-12-18 16:37:05.625 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:37:05.661 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:37:05.671 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:37:05.682 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:37:05.684 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:37:05.684 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:37:05.685 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:37:05.685 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:37:05.687 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:37:05.690 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:37:05.690 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:37:05.900 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:37:06.017 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:37:06.039 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:37:06.061 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.715 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.715 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.716 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.717 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.718 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.722 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:37:06.763 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:37:06.763 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.763 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.792 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:37:06.799 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:37:06.820 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:37:06.825 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.825 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.837 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:37:06.841 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:37:06.845 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:37:06.846 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.846 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:06.850 +03:00 [Debug] Hosting starting
2017-12-18 16:37:06.897 +03:00 [Debug] Hosting started
2017-12-18 16:37:06.898 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:37:06.898 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:37:06.898 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:37:06.939 +03:00 [Debug] Connection id ""0HLA63HN7KK50"" started.
2017-12-18 16:37:06.939 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" started.
2017-12-18 16:37:06.961 +03:00 [Debug] Connection id ""0HLA63HN7KK50"" reset.
2017-12-18 16:37:06.961 +03:00 [Debug] Connection id ""0HLA63HN7KK50"" disconnecting.
2017-12-18 16:37:06.987 +03:00 [Debug] Connection id ""0HLA63HN7KK50"" sending FIN.
2017-12-18 16:37:06.989 +03:00 [Debug] Connection id ""0HLA63HN7KK50"" stopped.
2017-12-18 16:37:07.022 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 16:37:07.082 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:37:07.147 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:37:07.153 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" completed keep alive response.
2017-12-18 16:37:07.153 +03:00 [Information] Request finished in 132.813ms 404 
2017-12-18 16:37:07.188 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 16:37:07.188 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:37:07.188 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:37:07.188 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" completed keep alive response.
2017-12-18 16:37:07.188 +03:00 [Information] Request finished in 0.665ms 404 
2017-12-18 16:37:14.555 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:37:14.555 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:37:14.557 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:37:14.616 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:37:14.653 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:37:16.623 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:37:16.628 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:37:16.630 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:37:16.647 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:37:16.648 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:16.648 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:16.649 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:37:16.674 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:37:16.697 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:37:16.697 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:16.697 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:19.579 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:19.579 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:19.580 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:37:19.580 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:37:19.580 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:37:19.580 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:19.580 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:40.252 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:37:40.253 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:37:40.258 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:37:40.893 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:40.894 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:37:40.895 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:37:40.904 +03:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:37:47.714 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:2e383cf7-8b7d-4006-aa10-139a0fa0f555
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:2e383cf7-8b7d-4006-aa10-139a0fa0f555
Error Number:3988,State:1,Class:16
2017-12-18 16:39:18.165 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" reset.
2017-12-18 16:39:18.167 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" disconnecting.
2017-12-18 16:39:18.167 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:39:18.167 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:39:18.167 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:39:18.168 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" sending FIN.
2017-12-18 16:39:18.172 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 123553.4388ms
2017-12-18 16:39:18.173 +03:00 [Error] An unhandled exception has occurred while executing the request
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Update(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 47
   at Armut.Sample.Messaging.Controllers.MessageController.MarkMessageAsRead(Message message) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 131
   at Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender(String sender) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\MessageController.cs:line 118
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
ClientConnectionId:2e383cf7-8b7d-4006-aa10-139a0fa0f555
Error Number:3988,State:1,Class:16
2017-12-18 16:39:18.258 +03:00 [Information] Request finished in 123703.3056ms 500 text/html; charset=utf-8
2017-12-18 16:39:18.259 +03:00 [Debug] Connection id ""0HLA63HN7KK51"" stopped.
2017-12-18 16:44:11.144 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:44:11.185 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:44:11.192 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:44:11.200 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:44:11.202 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:44:11.203 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:44:11.204 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:44:11.205 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:44:11.207 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:44:11.210 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:44:11.211 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:44:11.460 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:44:11.587 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:44:11.620 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:44:11.640 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.310 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.310 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.311 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.312 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.313 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.317 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:44:12.355 +03:00 [Information] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:44:12.355 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.355 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.385 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:44:12.394 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:44:12.418 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:44:12.423 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.423 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.437 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:44:12.440 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:44:12.446 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:44:12.446 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.446 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:12.451 +03:00 [Debug] Hosting starting
2017-12-18 16:44:12.498 +03:00 [Debug] Hosting started
2017-12-18 16:44:12.499 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:44:12.499 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:44:12.499 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:44:12.636 +03:00 [Debug] Connection id ""0HLA63LM3CJ68"" started.
2017-12-18 16:44:12.636 +03:00 [Debug] Connection id ""0HLA63LM3CJ69"" started.
2017-12-18 16:44:12.659 +03:00 [Debug] Connection id ""0HLA63LM3CJ68"" reset.
2017-12-18 16:44:12.659 +03:00 [Debug] Connection id ""0HLA63LM3CJ68"" disconnecting.
2017-12-18 16:44:12.660 +03:00 [Debug] Connection id ""0HLA63LM3CJ68"" sending FIN.
2017-12-18 16:44:12.668 +03:00 [Debug] Connection id ""0HLA63LM3CJ68"" stopped.
2017-12-18 16:44:12.706 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 16:44:12.778 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:44:12.859 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:44:12.865 +03:00 [Debug] Connection id ""0HLA63LM3CJ69"" completed keep alive response.
2017-12-18 16:44:12.865 +03:00 [Information] Request finished in 162.2505ms 404 
2017-12-18 16:44:12.896 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 16:44:12.896 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:44:12.896 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:44:12.896 +03:00 [Debug] Connection id ""0HLA63LM3CJ69"" completed keep alive response.
2017-12-18 16:44:12.896 +03:00 [Information] Request finished in 0.6855ms 404 
2017-12-18 16:44:17.655 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:44:17.655 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:44:17.658 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:44:17.700 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:44:17.733 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:44:22.325 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:44:22.329 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:44:22.331 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:44:22.347 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:44:22.347 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:22.347 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:22.349 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:44:22.371 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:44:22.392 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:44:22.392 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:22.392 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.495 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.495 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.496 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:44:23.496 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:44:23.496 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:44:23.496 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.496 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.498 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.499 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:44:23.501 +03:00 [Debug] Disposing transaction.
2017-12-18 16:44:23.501 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.501 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.503 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:44:23.504 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:44:23.508 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:44:23.509 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.509 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:44:23.509 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:44:23.515 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:44:23.580 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:6d215b41-ae05-4cb5-bba4-7d0dd8060e89
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:6d215b41-ae05-4cb5-bba4-7d0dd8060e89
Error Number:3988,State:1,Class:16
2017-12-18 16:47:25.843 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:47:25.878 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:47:25.886 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:47:25.895 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:47:25.897 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:47:25.897 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:47:25.898 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:47:25.899 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:47:25.901 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:47:25.904 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:47:25.904 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:47:26.097 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:47:26.216 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:47:26.241 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:47:26.264 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.951 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.951 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.951 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.954 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.955 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.959 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:47:26.997 +03:00 [Information] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:47:26.997 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:26.997 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:27.027 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:47:27.034 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:47:27.056 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:47:27.061 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:27.061 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:27.072 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:47:27.076 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:47:27.081 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:47:27.081 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:27.081 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:27.086 +03:00 [Debug] Hosting starting
2017-12-18 16:47:27.132 +03:00 [Debug] Hosting started
2017-12-18 16:47:27.132 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:47:27.132 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:47:27.132 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:47:27.375 +03:00 [Debug] Connection id ""0HLA63NG4IEIB"" started.
2017-12-18 16:47:27.375 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" started.
2017-12-18 16:47:27.398 +03:00 [Debug] Connection id ""0HLA63NG4IEIB"" reset.
2017-12-18 16:47:27.398 +03:00 [Debug] Connection id ""0HLA63NG4IEIB"" disconnecting.
2017-12-18 16:47:27.399 +03:00 [Debug] Connection id ""0HLA63NG4IEIB"" sending FIN.
2017-12-18 16:47:27.405 +03:00 [Debug] Connection id ""0HLA63NG4IEIB"" stopped.
2017-12-18 16:47:27.443 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 16:47:27.525 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:47:27.592 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:47:27.599 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:47:27.599 +03:00 [Information] Request finished in 158.2277ms 404 
2017-12-18 16:47:27.629 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 16:47:27.629 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:47:27.629 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:47:27.630 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:47:27.630 +03:00 [Information] Request finished in 0.7332ms 404 
2017-12-18 16:47:31.589 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=%22rick%22  
2017-12-18 16:47:31.589 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:47:31.591 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 16:47:31.601 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"8648c4c4-bff3-49e0-875c-af1fee70bb66"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:31.601 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"8080f464-b48d-47b6-8466-aca23d8dba3e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:31.625 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 16:47:31.635 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 16:47:31.637 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:47:31.641 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:47:31.643 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:47:31.659 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:47:31.659 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.660 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.661 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:31.686 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:31.710 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:47:31.710 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.710 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.721 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:47:31.725 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:47:31.725 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:47:31.725 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:47:31.769 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 16:47:31.770 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 16:47:31.784 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:47:31.785 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.785 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.785 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 16:47:31.789 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 16:47:31.800 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:47:31.801 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.801 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:31.809 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 181.13ms
2017-12-18 16:47:31.810 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:47:31.810 +03:00 [Information] Request finished in 221.4904ms 200 application/json; charset=utf-8
2017-12-18 16:47:42.761 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22rick%22  0
2017-12-18 16:47:42.761 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:47:42.761 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 16:47:42.762 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"b5aaa3d3-6714-4f33-a645-23c3c7943986"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:42.762 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"8080f464-b48d-47b6-8466-aca23d8dba3e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:42.776 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 16:47:42.797 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"rick\""]) - ModelState is Valid
2017-12-18 16:47:42.799 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:47:42.799 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:42.799 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:42.800 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:42.800 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:42.800 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:47:42.800 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:42.800 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:42.801 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 16:47:42.801 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:47:42.801 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:47:42.801 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:47:42.805 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 29.2439ms
2017-12-18 16:47:42.805 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:47:42.806 +03:00 [Information] Request finished in 44.3219ms 404 application/json; charset=utf-8
2017-12-18 16:47:53.866 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22ilkercig%22  0
2017-12-18 16:47:53.867 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:47:53.867 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 16:47:53.867 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"b5aaa3d3-6714-4f33-a645-23c3c7943986"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:53.867 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"8080f464-b48d-47b6-8466-aca23d8dba3e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:47:53.867 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 16:47:53.867 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"ilkercig\""]) - ModelState is Valid
2017-12-18 16:47:53.868 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:47:53.868 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:53.868 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:53.868 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:53.868 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:47:53.868 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:47:53.868 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:53.868 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:47:53.868 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 16:47:53.868 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:47:53.868 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:47:53.868 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:47:53.869 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1.7104ms
2017-12-18 16:47:53.869 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:47:53.869 +03:00 [Information] Request finished in 2.2335ms 404 application/json; charset=utf-8
2017-12-18 16:48:09.967 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22ilkercig%22  0
2017-12-18 16:48:09.967 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:48:09.967 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 16:48:09.967 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"b5aaa3d3-6714-4f33-a645-23c3c7943986"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:48:09.967 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"8080f464-b48d-47b6-8466-aca23d8dba3e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:48:09.967 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 16:48:09.967 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"ilkercig\""]) - ModelState is Valid
2017-12-18 16:48:20.934 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:48:20.935 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:20.935 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:20.935 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:20.935 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:20.935 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:48:20.935 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:20.936 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:20.936 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 16:48:20.936 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:48:20.936 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:48:20.936 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:48:20.936 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 10968.6486ms
2017-12-18 16:48:20.936 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:48:20.936 +03:00 [Information] Request finished in 10969.2167ms 404 application/json; charset=utf-8
2017-12-18 16:48:28.754 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 16:48:28.754 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:48:28.755 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 16:48:28.755 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"b5aaa3d3-6714-4f33-a645-23c3c7943986"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:48:28.755 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"8080f464-b48d-47b6-8466-aca23d8dba3e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:48:28.755 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 16:48:28.755 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 16:48:31.151 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:48:31.152 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.152 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.152 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:31.153 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:31.153 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:48:31.153 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.153 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.153 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.153 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.153 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:31.154 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:48:31.154 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:48:31.154 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.154 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.175 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.175 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.176 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:48:31.191 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 16:48:31.192 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 16:48:31.193 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:48:31.194 +03:00 [Debug] Committing transaction.
2017-12-18 16:48:31.194 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.194 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:48:31.194 +03:00 [Debug] Disposing transaction.
2017-12-18 16:48:31.194 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 16:48:31.196 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 16:48:31.196 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 2441.7891ms
2017-12-18 16:48:31.197 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:48:31.197 +03:00 [Information] Request finished in 2442.2513ms 200 
2017-12-18 16:49:12.362 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/message/view/unread?sender=ilkercig  0
2017-12-18 16:49:12.363 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:49:12.363 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:49:12.363 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"96e115bf-f868-4924-b70e-9414b1ff4685"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 16:49:12.364 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 16:49:12.364 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:49:12.364 +03:00 [Debug] Connection id ""0HLA63NG4IEIA"" completed keep alive response.
2017-12-18 16:49:12.364 +03:00 [Information] Request finished in 2.0907ms 404 
2017-12-18 16:49:31.439 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:49:31.439 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:49:31.439 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:49:31.441 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:49:31.442 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:49:38.198 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:49:38.198 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.199 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.199 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:49:38.199 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:49:38.199 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:49:38.199 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.199 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.200 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.200 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.200 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:49:38.200 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:49:38.200 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:49:38.200 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.200 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.202 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.202 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.202 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:49:38.204 +03:00 [Debug] Disposing transaction.
2017-12-18 16:49:38.204 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.204 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.206 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:49:38.207 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:49:38.212 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:49:38.212 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.213 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:49:38.213 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:49:38.217 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:49:38.268 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:0babf967-f417-44e5-aa12-b0b31cef2692
Error Number:3988,State:1,Class:16"
System.Data.SqlClient.SqlException (0x80131904): New transaction is not allowed because there are other threads running in the session.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName, Boolean shouldReconnect)
   at System.Data.SqlClient.SqlConnection.BeginTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionWithNoPreconditions(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
ClientConnectionId:0babf967-f417-44e5-aa12-b0b31cef2692
Error Number:3988,State:1,Class:16
2017-12-18 16:59:35.053 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 16:59:35.093 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 16:59:35.101 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 16:59:35.112 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 16:59:35.115 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:59:35.116 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 16:59:35.117 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 16:59:35.119 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 16:59:35.122 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 16:59:35.127 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 16:59:35.128 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 16:59:35.390 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 16:59:35.523 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 16:59:35.546 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:59:35.569 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.266 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.266 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.266 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.269 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.269 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.275 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:59:36.318 +03:00 [Information] Executed DbCommand ("45"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 16:59:36.318 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.319 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.348 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:59:36.355 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 16:59:36.377 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:59:36.381 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.382 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.395 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:59:36.399 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 16:59:36.404 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:36.405 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.405 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:36.410 +03:00 [Debug] Hosting starting
2017-12-18 16:59:36.464 +03:00 [Debug] Hosting started
2017-12-18 16:59:36.464 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 16:59:36.464 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 16:59:36.464 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 16:59:36.473 +03:00 [Debug] Connection id ""0HLA63U9DPB0G"" started.
2017-12-18 16:59:36.473 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" started.
2017-12-18 16:59:36.495 +03:00 [Debug] Connection id ""0HLA63U9DPB0G"" reset.
2017-12-18 16:59:36.495 +03:00 [Debug] Connection id ""0HLA63U9DPB0G"" disconnecting.
2017-12-18 16:59:36.497 +03:00 [Debug] Connection id ""0HLA63U9DPB0G"" sending FIN.
2017-12-18 16:59:36.502 +03:00 [Debug] Connection id ""0HLA63U9DPB0G"" stopped.
2017-12-18 16:59:36.536 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 16:59:36.600 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:59:36.697 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:59:36.706 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" completed keep alive response.
2017-12-18 16:59:36.707 +03:00 [Information] Request finished in 172.8472ms 404 
2017-12-18 16:59:36.755 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 16:59:36.757 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:59:36.758 +03:00 [Debug] Request did not match any routes.
2017-12-18 16:59:36.758 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" completed keep alive response.
2017-12-18 16:59:36.758 +03:00 [Information] Request finished in 2.3482ms 404 
2017-12-18 16:59:44.682 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 16:59:44.682 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:59:44.683 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:59:44.727 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:59:44.764 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 16:59:44.769 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:59:44.774 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:59:44.775 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 16:59:44.790 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:59:44.791 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.791 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.792 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:44.813 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:44.834 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:44.834 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.834 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.841 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.841 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.842 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:44.842 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:44.842 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:44.842 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.842 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.847 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:59:44.848 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 16:59:44.852 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 16:59:44.853 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.853 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.853 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:44.856 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:44.869 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:44.869 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.869 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.881 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.882 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.882 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:59:44.895 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;"
2017-12-18 16:59:44.897 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p2='?', @p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;"
2017-12-18 16:59:44.897 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:44.898 +03:00 [Debug] Committing transaction.
2017-12-18 16:59:44.898 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.898 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.898 +03:00 [Debug] Disposing transaction.
2017-12-18 16:59:44.900 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:59:44.904 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:59:44.904 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:59:44.904 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:59:44.951 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.951 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.951 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:44.951 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:44.951 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:44.951 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.952 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:44.964 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 233.4108ms
2017-12-18 16:59:44.965 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" completed keep alive response.
2017-12-18 16:59:44.965 +03:00 [Information] Request finished in 282.726ms 200 application/json; charset=utf-8
2017-12-18 16:59:49.558 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 16:59:49.558 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 16:59:49.558 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 16:59:49.558 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 16:59:49.559 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 16:59:49.560 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 16:59:49.560 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.560 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.560 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:49.562 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:49.562 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:49.562 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.562 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.562 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.562 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.562 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:49.563 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 16:59:49.563 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:49.563 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.563 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.563 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.563 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.563 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:49.564 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:49.564 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:49.564 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.564 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.564 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.564 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.565 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 16:59:49.567 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?', @p11='?', @p9='?', @p10='?', @p14='?', @p12='?', @p13='?', @p17='?', @p15='?', @p16='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p9, [ReceiveTime] = @p10
WHERE [MessageID] = @p11;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p12, [ReceiveTime] = @p13
WHERE [MessageID] = @p14;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p15, [ReceiveTime] = @p16
WHERE [MessageID] = @p17;
SELECT @@ROWCOUNT;"
2017-12-18 16:59:49.573 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?', @p11='?', @p9='?', @p10='?', @p14='?', @p12='?', @p13='?', @p17='?', @p15='?', @p16='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p9, [ReceiveTime] = @p10
WHERE [MessageID] = @p11;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p12, [ReceiveTime] = @p13
WHERE [MessageID] = @p14;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p15, [ReceiveTime] = @p16
WHERE [MessageID] = @p17;
SELECT @@ROWCOUNT;"
2017-12-18 16:59:49.573 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:49.576 +03:00 [Debug] Committing transaction.
2017-12-18 16:59:49.576 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.576 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.576 +03:00 [Debug] Disposing transaction.
2017-12-18 16:59:49.576 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 16:59:49.576 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 16:59:49.576 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 16:59:49.576 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 16:59:49.576 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.577 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.577 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:49.577 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 16:59:49.577 +03:00 [Debug] A data reader was disposed.
2017-12-18 16:59:49.577 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.577 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 16:59:49.577 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 19.1635ms
2017-12-18 16:59:49.577 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" completed keep alive response.
2017-12-18 16:59:49.578 +03:00 [Information] Request finished in 20.0688ms 200 application/json; charset=utf-8
2017-12-18 17:00:32.974 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?body=bunu%20oku%20art%C4%B1k&receiver=ilkercig  
2017-12-18 17:00:32.974 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:00:32.974 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:00:32.975 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"0c892494-949c-4735-8593-cf26f6ba1ef7"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:00:32.976 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:00:32.976 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:00:32.976 +03:00 [Debug] Connection id ""0HLA63U9DPB0F"" completed keep alive response.
2017-12-18 17:00:32.976 +03:00 [Information] Request finished in 2.1894ms 404 
2017-12-18 17:00:56.019 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:00:56.053 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:00:56.059 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:00:56.067 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:00:56.069 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:00:56.069 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:00:56.070 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:00:56.070 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:00:56.072 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:00:56.075 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:00:56.076 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:00:56.304 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:00:56.421 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:00:56.449 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:00:56.471 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.104 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.104 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.105 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.108 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.108 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.114 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:00:57.152 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:00:57.152 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.152 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.181 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:00:57.189 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:00:57.212 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:00:57.217 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.217 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.231 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:00:57.234 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:00:57.240 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:00:57.240 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.240 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:00:57.246 +03:00 [Debug] Hosting starting
2017-12-18 17:00:57.295 +03:00 [Debug] Hosting started
2017-12-18 17:00:57.295 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:00:57.295 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:00:57.295 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:00:57.478 +03:00 [Debug] Connection id ""0HLA63V1IAANC"" started.
2017-12-18 17:00:57.478 +03:00 [Debug] Connection id ""0HLA63V1IAAND"" started.
2017-12-18 17:00:57.499 +03:00 [Debug] Connection id ""0HLA63V1IAAND"" reset.
2017-12-18 17:00:57.499 +03:00 [Debug] Connection id ""0HLA63V1IAAND"" disconnecting.
2017-12-18 17:00:57.500 +03:00 [Debug] Connection id ""0HLA63V1IAAND"" sending FIN.
2017-12-18 17:00:57.505 +03:00 [Debug] Connection id ""0HLA63V1IAAND"" stopped.
2017-12-18 17:00:57.544 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:00:57.602 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:00:57.675 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:00:57.682 +03:00 [Debug] Connection id ""0HLA63V1IAANC"" completed keep alive response.
2017-12-18 17:00:57.682 +03:00 [Information] Request finished in 140.3795ms 404 
2017-12-18 17:00:57.719 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:00:57.721 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:00:57.721 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:00:57.721 +03:00 [Debug] Connection id ""0HLA63V1IAANC"" completed keep alive response.
2017-12-18 17:00:57.721 +03:00 [Information] Request finished in 1.8299ms 404 
2017-12-18 17:01:15.403 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread  
2017-12-18 17:01:15.403 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:01:15.404 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:01:15.449 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:01:15.470 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 17:01:15.476 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:01:15.480 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:01:15.482 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:01:15.497 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:01:15.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:15.498 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:15.498 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:01:15.499 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:01:15.499 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:15.499 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:15.499 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:15.501 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 17:01:15.506 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:01:15.506 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:01:15.506 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:01:15.558 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 107.1864ms
2017-12-18 17:01:15.559 +03:00 [Debug] Connection id ""0HLA63V1IAANC"" completed keep alive response.
2017-12-18 17:01:15.559 +03:00 [Information] Request finished in 156.5001ms 404 application/json; charset=utf-8
2017-12-18 17:01:34.433 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 17:01:34.433 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:01:34.433 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:01:34.433 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:01:34.448 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 17:01:34.448 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:01:34.449 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.449 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.451 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:34.471 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:34.492 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:34.492 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.492 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.498 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.499 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:34.499 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:34.499 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:34.499 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.499 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.504 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:01:34.505 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:01:34.510 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:01:34.510 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.511 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.511 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:01:34.514 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:01:34.514 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:34.514 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.514 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.521 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:01:34.521 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:01:34.521 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:01:34.521 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:01:34.525 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.525 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.525 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:01:34.526 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:01:34.526 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:34.526 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.526 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:34.526 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 93.0596ms
2017-12-18 17:01:34.527 +03:00 [Debug] Connection id ""0HLA63V1IAANC"" completed keep alive response.
2017-12-18 17:01:34.527 +03:00 [Information] Request finished in 93.9961ms 200 application/json; charset=utf-8
2017-12-18 17:01:50.845 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 17:01:50.845 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:01:50.845 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:01:50.845 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:01:50.845 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 17:01:52.434 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:01:52.434 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:52.435 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:52.435 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:52.435 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:01:52.435 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:01:52.435 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:01:52.435 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:02.169 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:02.169 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:02.169 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:02:02.170 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:02:02.170 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:02:02.170 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:02.170 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:20.177 +03:00 [Debug] Compiling query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]).Count()"'
2017-12-18 17:02:20.177 +03:00 [Debug] Optimized query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __userId_0 && [l].ReceiverId == [l].ReceiverId
select [l]).Count()"'
2017-12-18 17:02:20.181 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<int> _InterceptExceptions(
    source: IEnumerable<int> _ToSequence(int GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT COUNT(*)
                    FROM [Message] AS [l]
                    WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:02:20.182 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:20.182 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:20.182 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:02:20.184 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__userId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:02:20.184 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:02:20.184 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:02:20.184 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:49.465 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:03:49.508 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:03:49.515 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:03:49.523 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:03:49.525 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:03:49.526 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:03:49.526 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:03:49.527 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:03:49.529 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:03:49.532 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:03:49.533 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:03:49.760 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:03:49.877 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:03:49.908 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:03:49.931 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.570 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.570 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.571 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.572 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.573 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.577 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:03:50.618 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:03:50.618 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.619 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.653 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:03:50.662 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:03:50.686 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:03:50.690 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.690 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.703 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:03:50.706 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:03:50.712 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:03:50.712 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.712 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:03:50.723 +03:00 [Debug] Hosting starting
2017-12-18 17:03:50.777 +03:00 [Debug] Hosting started
2017-12-18 17:03:50.777 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:03:50.777 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:03:50.777 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:03:50.821 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" started.
2017-12-18 17:03:50.821 +03:00 [Debug] Connection id ""0HLA640L7EGRB"" started.
2017-12-18 17:03:50.843 +03:00 [Debug] Connection id ""0HLA640L7EGRB"" reset.
2017-12-18 17:03:50.843 +03:00 [Debug] Connection id ""0HLA640L7EGRB"" disconnecting.
2017-12-18 17:03:50.844 +03:00 [Debug] Connection id ""0HLA640L7EGRB"" sending FIN.
2017-12-18 17:03:50.850 +03:00 [Debug] Connection id ""0HLA640L7EGRB"" stopped.
2017-12-18 17:03:50.896 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:03:50.965 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:03:51.039 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:03:51.046 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:03:51.047 +03:00 [Information] Request finished in 154.4697ms 404 
2017-12-18 17:03:51.094 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:03:51.097 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:03:51.097 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:03:51.097 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:03:51.097 +03:00 [Information] Request finished in 3.9406ms 404 
2017-12-18 17:03:53.595 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 17:03:53.595 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:03:53.596 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:03:53.641 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:03:53.676 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 17:04:07.229 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:04:07.233 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:04:07.235 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:04:07.252 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:04:07.253 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:07.253 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:07.255 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:04:07.280 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:04:07.304 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:04:07.304 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:07.304 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:09.364 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:09.364 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:09.364 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:04:09.364 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:04:09.365 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:04:09.365 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:04:09.365 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.097 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:05:09.098 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:05:09.106 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:05:09.106 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.106 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.106 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:05:09.108 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:05:09.109 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:05:09.109 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.109 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.115 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:05:09.120 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:05:09.120 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:05:09.120 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:05:09.162 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.162 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.162 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:05:09.162 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:05:09.163 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:05:09.163 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.163 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:05:09.175 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 75530.8596ms
2017-12-18 17:05:09.176 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:05:09.176 +03:00 [Information] Request finished in 75581.1963ms 200 application/json; charset=utf-8
2017-12-18 17:05:36.053 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send/body=bu%20okunmad%C4%B1&username=rick  
2017-12-18 17:05:36.053 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:05:36.053 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:05:36.054 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:05:36.054 +03:00 [Information] Request finished in 2.7609ms 404 
2017-12-18 17:05:53.990 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send/body=bu%20okunmad%C4%B1&receiver=rick  
2017-12-18 17:05:53.991 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:05:53.991 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:05:53.991 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:05:53.991 +03:00 [Information] Request finished in 0.2777ms 404 
2017-12-18 17:06:05.090 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?body=bu%20okunmad%C4%B1&receiver=rick  
2017-12-18 17:06:05.091 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:06:05.091 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:06:05.091 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"a9c4dd0f-5a37-4d1e-a877-b33c2bd17d36"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:06:05.093 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:06:05.093 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:06:05.093 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:06:05.093 +03:00 [Information] Request finished in 2.4493ms 404 
2017-12-18 17:06:28.499 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?body=bu%20okunmad%C4%B1&receiver=rick  
2017-12-18 17:06:28.499 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:06:28.499 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:06:28.499 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"a9c4dd0f-5a37-4d1e-a877-b33c2bd17d36"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:06:28.499 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:06:28.499 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:06:28.499 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:06:28.499 +03:00 [Information] Request finished in 0.4977ms 404 
2017-12-18 17:06:31.062 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=bu%20okunmad%C4%B1&receiver=rick  0
2017-12-18 17:06:31.062 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:06:31.062 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:06:31.064 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:06:31.065 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["bu okunmad", "rick"]) - ModelState is Valid
2017-12-18 17:06:33.143 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:06:33.143 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.143 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.143 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:06:33.144 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:06:33.144 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:06:33.144 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.144 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.144 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.144 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.144 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:06:33.145 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:06:33.145 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:06:33.145 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.145 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.154 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:06:33.155 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:06:33.165 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:06:33.165 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.165 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.165 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:06:33.167 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:06:33.167 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:06:33.167 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.167 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.195 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.195 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.196 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:06:33.211 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:06:33.213 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:06:33.218 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:06:33.219 +03:00 [Debug] Committing transaction.
2017-12-18 17:06:33.219 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.219 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:06:33.219 +03:00 [Debug] Disposing transaction.
2017-12-18 17:06:33.220 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:06:33.220 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:06:33.220 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:06:33.220 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:06:33.230 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2165.534ms
2017-12-18 17:06:33.230 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" completed keep alive response.
2017-12-18 17:06:33.230 +03:00 [Information] Request finished in 2168.1808ms 200 application/json; charset=utf-8
2017-12-18 17:07:41.548 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" received FIN.
2017-12-18 17:07:41.548 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" disconnecting.
2017-12-18 17:07:41.548 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" sending FIN.
2017-12-18 17:07:41.548 +03:00 [Debug] Connection id ""0HLA640L7EGRD"" started.
2017-12-18 17:07:41.550 +03:00 [Debug] Connection id ""0HLA640L7EGRC"" stopped.
2017-12-18 17:07:41.552 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=ben%20ilker%20a%C3%A7%20%C5%9Funu&receiver=rick  0
2017-12-18 17:07:41.553 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:07:41.553 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:07:41.553 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:07:41.553 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["ben ilker a unu", "rick"]) - ModelState is Valid
2017-12-18 17:07:42.829 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:07:42.829 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.830 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.830 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:42.830 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:42.830 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:42.830 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.830 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.831 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.831 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.831 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:42.831 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:42.831 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:42.831 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.831 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.831 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.832 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.832 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:07:42.832 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:07:42.832 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:42.832 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.832 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.833 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.833 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.834 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:07:42.834 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:07:42.834 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:07:42.835 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:42.838 +03:00 [Debug] Committing transaction.
2017-12-18 17:07:42.838 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.838 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:42.838 +03:00 [Debug] Disposing transaction.
2017-12-18 17:07:42.838 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:07:42.838 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:07:42.838 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:07:42.838 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:07:42.838 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1285.6095ms
2017-12-18 17:07:42.838 +03:00 [Debug] Connection id ""0HLA640L7EGRD"" completed keep alive response.
2017-12-18 17:07:42.839 +03:00 [Information] Request finished in 1286.162ms 200 application/json; charset=utf-8
2017-12-18 17:07:51.197 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?senin%20&receiver=rick  0
2017-12-18 17:07:51.197 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:07:51.197 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:07:51.197 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:07:51.198 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", "rick"]) - ModelState is Valid
2017-12-18 17:07:52.645 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:07:52.645 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.645 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.645 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:52.646 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:52.646 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:52.646 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.646 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.646 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.646 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.646 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:52.647 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:07:52.647 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:52.647 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.647 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.647 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.647 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.647 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:07:52.647 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:07:52.647 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:07:52.647 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.648 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.648 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.648 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.648 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:07:52.648 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:07:52.653 +03:00 [Error] Failed executing DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Body', table 'Armut.Sample.Messaging.dbo.Message'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:9173564e-8d8f-43c8-b3e5-36cc1d93a504
Error Number:515,State:2,Class:16
2017-12-18 17:07:52.683 +03:00 [Debug] Disposing transaction.
2017-12-18 17:07:52.683 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.683 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:07:52.689 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Body', table 'Armut.Sample.Messaging.dbo.Message'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Body', table 'Armut.Sample.Messaging.dbo.Message'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 17:11:03.497 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:11:03.532 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:11:03.539 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:11:03.547 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:11:03.549 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:11:03.550 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:11:03.551 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:11:03.551 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:11:03.553 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:11:03.556 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:11:03.557 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:11:03.773 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:11:03.885 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:11:03.911 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:11:03.932 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.644 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.644 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.645 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.647 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.647 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.652 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:11:04.690 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:11:04.690 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.690 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.719 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:11:04.726 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:11:04.752 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:11:04.756 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.756 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.776 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:11:04.792 +03:00 [Information] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:11:04.798 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:11:04.798 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.798 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:04.804 +03:00 [Debug] Hosting starting
2017-12-18 17:11:04.852 +03:00 [Debug] Hosting started
2017-12-18 17:11:04.853 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:11:04.853 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:11:04.853 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:11:04.998 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" started.
2017-12-18 17:11:04.998 +03:00 [Debug] Connection id ""0HLA644MK2JLQ"" started.
2017-12-18 17:11:05.020 +03:00 [Debug] Connection id ""0HLA644MK2JLQ"" reset.
2017-12-18 17:11:05.020 +03:00 [Debug] Connection id ""0HLA644MK2JLQ"" disconnecting.
2017-12-18 17:11:05.022 +03:00 [Debug] Connection id ""0HLA644MK2JLQ"" sending FIN.
2017-12-18 17:11:05.033 +03:00 [Debug] Connection id ""0HLA644MK2JLQ"" stopped.
2017-12-18 17:11:05.062 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:11:05.126 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:11:05.219 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:11:05.226 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" completed keep alive response.
2017-12-18 17:11:05.227 +03:00 [Information] Request finished in 166.9175ms 404 
2017-12-18 17:11:05.256 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:11:05.256 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:11:05.257 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:11:05.257 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" completed keep alive response.
2017-12-18 17:11:05.257 +03:00 [Information] Request finished in 0.8026ms 404 
2017-12-18 17:11:06.804 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?senin%20&receiver=rick  0
2017-12-18 17:11:06.804 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:11:06.806 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:11:06.850 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:11:06.881 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", "rick"]) - ModelState is Valid
2017-12-18 17:11:08.771 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:11:08.775 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:11:08.777 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:11:08.792 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:11:08.793 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:08.793 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:08.794 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:11:08.818 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:11:08.841 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:11:08.841 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:08.841 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:09.508 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:09.508 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:09.509 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:11:09.509 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:11:09.510 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:11:09.510 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:09.510 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:10.073 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:11:10.075 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:11:10.086 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:11:10.086 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:10.086 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:10.087 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:11:10.089 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:11:10.089 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:11:10.089 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:10.089 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:11:13.566 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 17:11:13.570 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:11:13.571 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:11:13.571 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:11:13.626 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 6774.0227ms
2017-12-18 17:11:13.627 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" completed keep alive response.
2017-12-18 17:11:13.627 +03:00 [Information] Request finished in 6823.149ms 400 application/json; charset=utf-8
2017-12-18 17:12:46.089 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" received FIN.
2017-12-18 17:12:46.089 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" disconnecting.
2017-12-18 17:12:46.090 +03:00 [Debug] Connection id ""0HLA644MK2JLS"" started.
2017-12-18 17:12:46.090 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" sending FIN.
2017-12-18 17:12:46.090 +03:00 [Debug] Connection id ""0HLA644MK2JLR"" stopped.
2017-12-18 17:12:46.090 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=ben%20ilker%20a%C3%A7%20%C5%9Funu&receiver=rick  0
2017-12-18 17:12:46.090 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:12:46.090 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:12:46.091 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:12:46.092 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["ben ilker a unu", "rick"]) - ModelState is Valid
2017-12-18 17:12:47.600 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:12:47.601 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.601 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.601 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:12:47.601 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:12:47.601 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:12:47.601 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.601 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.602 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.602 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.602 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:12:47.602 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:12:47.602 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:12:47.602 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.602 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.603 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.603 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.603 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:12:47.603 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:12:47.603 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:12:47.603 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:47.603 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:49.434 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:49.435 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:49.435 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:12:49.451 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:12:49.457 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:12:49.461 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:12:49.462 +03:00 [Debug] Committing transaction.
2017-12-18 17:12:49.462 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:49.462 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:12:49.462 +03:00 [Debug] Disposing transaction.
2017-12-18 17:12:49.463 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:12:49.464 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:12:49.464 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:12:49.464 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:12:49.470 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 3379.0795ms
2017-12-18 17:12:49.470 +03:00 [Debug] Connection id ""0HLA644MK2JLS"" completed keep alive response.
2017-12-18 17:12:49.470 +03:00 [Information] Request finished in 3380.0243ms 200 application/json; charset=utf-8
2017-12-18 17:18:50.486 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:18:50.521 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:18:50.527 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:18:50.535 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:18:50.537 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:18:50.537 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:18:50.538 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:18:50.539 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:18:50.541 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:18:50.544 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:18:50.545 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:18:50.805 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:18:50.921 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:18:50.946 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:18:50.964 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.037 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.037 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.038 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.040 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.040 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.044 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:18:51.070 +03:00 [Information] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:18:51.070 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.071 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.097 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:18:51.104 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:18:51.124 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:18:51.128 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.129 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.140 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:18:51.144 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:18:51.149 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:18:51.149 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.149 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:18:51.154 +03:00 [Debug] Hosting starting
2017-12-18 17:18:51.200 +03:00 [Debug] Hosting started
2017-12-18 17:18:51.200 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:18:51.200 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:18:51.200 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:18:51.352 +03:00 [Debug] Connection id ""0HLA6491JIRKU"" started.
2017-12-18 17:18:51.352 +03:00 [Debug] Connection id ""0HLA6491JIRKV"" started.
2017-12-18 17:18:51.374 +03:00 [Debug] Connection id ""0HLA6491JIRKU"" reset.
2017-12-18 17:18:51.374 +03:00 [Debug] Connection id ""0HLA6491JIRKU"" disconnecting.
2017-12-18 17:18:51.375 +03:00 [Debug] Connection id ""0HLA6491JIRKU"" sending FIN.
2017-12-18 17:18:51.380 +03:00 [Debug] Connection id ""0HLA6491JIRKU"" stopped.
2017-12-18 17:18:51.410 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:18:51.469 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:18:51.528 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:18:51.535 +03:00 [Debug] Connection id ""0HLA6491JIRKV"" completed keep alive response.
2017-12-18 17:18:51.536 +03:00 [Information] Request finished in 127.2625ms 404 
2017-12-18 17:18:51.561 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:18:51.562 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:18:51.562 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:18:51.562 +03:00 [Debug] Connection id ""0HLA6491JIRKV"" completed keep alive response.
2017-12-18 17:18:51.562 +03:00 [Information] Request finished in 1.2434ms 404 
2017-12-18 17:19:14.338 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view/unread?sender=ilkercig  0
2017-12-18 17:19:14.339 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:19:14.340 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:19:14.350 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"39d5e944-c59e-4627-a41e-ca25c7dfb6b0"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:19:14.353 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:19:14.354 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:19:14.354 +03:00 [Debug] Connection id ""0HLA6491JIRKV"" completed keep alive response.
2017-12-18 17:19:14.354 +03:00 [Information] Request finished in 15.6352ms 404 
2017-12-18 17:19:45.512 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 17:19:45.512 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:19:45.512 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:19:45.549 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:19:45.585 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 17:19:48.767 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:19:48.771 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:19:48.773 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:19:48.791 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:19:48.791 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.791 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.793 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:19:48.813 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:19:48.834 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:19:48.834 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.834 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.841 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.841 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.841 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:19:48.841 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:19:48.842 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:19:48.842 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.842 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.847 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:19:48.848 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:19:48.853 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:19:48.853 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.853 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.854 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:19:48.857 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:19:48.870 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:19:48.870 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.870 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.883 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.883 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.884 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:19:48.898 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:19:48.900 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:19:48.901 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:19:48.902 +03:00 [Debug] Committing transaction.
2017-12-18 17:19:48.902 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.902 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.902 +03:00 [Debug] Disposing transaction.
2017-12-18 17:19:48.903 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:19:48.908 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:19:48.908 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:19:48.908 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:19:48.949 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.950 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.950 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:19:48.950 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:19:48.950 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:19:48.950 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.950 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:19:48.961 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 3409.428ms
2017-12-18 17:19:48.962 +03:00 [Debug] Connection id ""0HLA6491JIRKV"" completed keep alive response.
2017-12-18 17:19:48.962 +03:00 [Information] Request finished in 3449.5485ms 200 application/json; charset=utf-8
2017-12-18 17:20:24.663 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:20:24.697 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:20:24.703 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:20:24.711 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:20:24.713 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:20:24.713 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:20:24.714 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:20:24.715 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:20:24.717 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:20:24.720 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:20:24.720 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:20:24.997 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:20:25.109 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:20:25.130 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:20:25.152 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.215 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.215 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.216 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.217 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.218 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.222 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:20:25.235 +03:00 [Information] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:20:25.235 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.235 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.263 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:20:25.270 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:20:25.290 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:20:25.294 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.294 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.305 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:20:25.305 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:20:25.310 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:20:25.310 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.310 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:25.314 +03:00 [Debug] Hosting starting
2017-12-18 17:20:25.360 +03:00 [Debug] Hosting started
2017-12-18 17:20:25.361 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:20:25.361 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:20:25.361 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:20:25.492 +03:00 [Debug] Connection id ""0HLA649TLBN6P"" started.
2017-12-18 17:20:25.492 +03:00 [Debug] Connection id ""0HLA649TLBN6Q"" started.
2017-12-18 17:20:25.514 +03:00 [Debug] Connection id ""0HLA649TLBN6P"" reset.
2017-12-18 17:20:25.514 +03:00 [Debug] Connection id ""0HLA649TLBN6P"" disconnecting.
2017-12-18 17:20:25.521 +03:00 [Debug] Connection id ""0HLA649TLBN6P"" sending FIN.
2017-12-18 17:20:25.527 +03:00 [Debug] Connection id ""0HLA649TLBN6P"" stopped.
2017-12-18 17:20:25.556 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:20:25.628 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:20:25.701 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:20:25.709 +03:00 [Debug] Connection id ""0HLA649TLBN6Q"" completed keep alive response.
2017-12-18 17:20:25.710 +03:00 [Information] Request finished in 155.3998ms 404 
2017-12-18 17:20:25.749 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:20:25.751 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:20:25.752 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:20:25.753 +03:00 [Debug] Connection id ""0HLA649TLBN6Q"" completed keep alive response.
2017-12-18 17:20:25.753 +03:00 [Information] Request finished in 4.3041ms 404 
2017-12-18 17:20:47.773 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body%20=%20oku&sender=rick  0
2017-12-18 17:20:47.773 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:20:47.774 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:20:47.816 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:20:47.836 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 17:20:47.842 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:20:47.846 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:20:47.848 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:20:47.864 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:20:47.864 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.864 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.865 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:20:47.865 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:20:47.866 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:20:47.866 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.866 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.868 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.868 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.870 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:20:47.890 +03:00 [Information] Executed DbCommand ("20"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:20:47.908 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:20:47.909 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.909 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:20:47.919 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 17:20:47.923 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:20:47.923 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:20:47.923 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:20:47.984 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 162.0597ms
2017-12-18 17:20:47.985 +03:00 [Debug] Connection id ""0HLA649TLBN6Q"" completed keep alive response.
2017-12-18 17:20:47.985 +03:00 [Information] Request finished in 212.107ms 404 application/json; charset=utf-8
2017-12-18 17:21:04.467 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body%20=%20oku&sender=rick  0
2017-12-18 17:21:04.467 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:21:04.467 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:21:04.467 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:21:04.468 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 17:21:04.468 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:21:04.468 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:21:04.468 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:21:04.468 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:21:04.469 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:21:04.469 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:21:04.469 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:21:04.469 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:33.526 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:22:33.576 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:22:33.584 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:22:33.592 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:22:33.595 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:22:33.596 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:22:33.597 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:22:33.597 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:22:33.600 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:22:33.603 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:22:33.603 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:22:33.811 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:22:33.926 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:22:33.954 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:22:33.976 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.028 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.028 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.029 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.030 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.031 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.036 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:22:34.050 +03:00 [Information] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:22:34.050 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.050 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.078 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:22:34.087 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:22:34.112 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:22:34.118 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.118 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.130 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:22:34.130 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:22:34.136 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:22:34.136 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.136 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:34.141 +03:00 [Debug] Hosting starting
2017-12-18 17:22:34.188 +03:00 [Debug] Hosting started
2017-12-18 17:22:34.188 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:22:34.188 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:22:34.188 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:22:34.327 +03:00 [Debug] Connection id ""0HLA64B421CN0"" started.
2017-12-18 17:22:34.327 +03:00 [Debug] Connection id ""0HLA64B421CN1"" started.
2017-12-18 17:22:34.347 +03:00 [Debug] Connection id ""0HLA64B421CN0"" reset.
2017-12-18 17:22:34.347 +03:00 [Debug] Connection id ""0HLA64B421CN0"" disconnecting.
2017-12-18 17:22:34.348 +03:00 [Debug] Connection id ""0HLA64B421CN0"" sending FIN.
2017-12-18 17:22:34.353 +03:00 [Debug] Connection id ""0HLA64B421CN0"" stopped.
2017-12-18 17:22:34.383 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:22:34.433 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:22:34.496 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:22:34.503 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:22:34.503 +03:00 [Information] Request finished in 122.2828ms 404 
2017-12-18 17:22:34.536 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:22:34.540 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:22:34.540 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:22:34.540 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:22:34.540 +03:00 [Information] Request finished in 4.5622ms 404 
2017-12-18 17:22:41.944 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body%20=%20oku&receiver=rick  0
2017-12-18 17:22:41.944 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:22:41.946 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:22:41.988 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:22:42.024 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", "rick"]) - ModelState is Valid
2017-12-18 17:22:42.026 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 17:22:42.029 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 17:22:42.033 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 42.037ms
2017-12-18 17:22:42.035 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:22:42.036 +03:00 [Information] Request finished in 91.6221ms 400 
2017-12-18 17:22:49.386 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=oku&receiver=rick  0
2017-12-18 17:22:49.386 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:22:49.386 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:22:49.386 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:22:49.387 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["oku", "rick"]) - ModelState is Valid
2017-12-18 17:22:49.389 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:22:49.393 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:22:49.395 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:22:49.411 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:22:49.412 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:49.412 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:49.413 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:22:49.432 +03:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:22:49.455 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:22:49.455 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:49.455 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.915 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.915 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.915 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:22:52.916 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:22:52.916 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:22:52.916 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.916 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.923 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:22:52.924 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:22:52.936 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:22:52.936 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.936 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.936 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:22:52.940 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:22:52.941 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:22:52.941 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:52.941 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:54.601 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:54.601 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:54.602 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:22:54.616 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:22:54.620 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:22:54.625 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:22:54.626 +03:00 [Debug] Committing transaction.
2017-12-18 17:22:54.626 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:54.626 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:22:54.626 +03:00 [Debug] Disposing transaction.
2017-12-18 17:22:54.628 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:22:54.631 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:22:54.632 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:22:54.632 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:22:54.690 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 5303.3687ms
2017-12-18 17:22:54.691 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:22:54.691 +03:00 [Information] Request finished in 5304.9098ms 200 application/json; charset=utf-8
2017-12-18 17:23:07.067 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=oku&receiver=rick  0
2017-12-18 17:23:07.067 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:23:07.067 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:23:07.067 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:23:07.067 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["oku", "rick"]) - ModelState is Valid
2017-12-18 17:23:07.068 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:23:07.068 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:07.068 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:07.068 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:07.068 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:07.068 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:07.068 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:07.069 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.357 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.357 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.357 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:08.358 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:08.358 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:08.358 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.358 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.359 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.359 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.359 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:23:08.359 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:23:08.359 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:08.359 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:08.359 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:09.583 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:09.583 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:09.584 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:23:09.584 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:23:09.585 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:23:09.585 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:09.587 +03:00 [Debug] Committing transaction.
2017-12-18 17:23:09.587 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:09.587 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:09.587 +03:00 [Debug] Disposing transaction.
2017-12-18 17:23:09.587 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:23:09.588 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:23:09.588 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:23:09.588 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:23:09.588 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2520.8802ms
2017-12-18 17:23:09.588 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:23:09.588 +03:00 [Information] Request finished in 2521.3693ms 200 application/json; charset=utf-8
2017-12-18 17:23:11.242 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=oku&receiver=rick  0
2017-12-18 17:23:11.242 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:23:11.242 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:23:11.242 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:23:11.242 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["oku", "rick"]) - ModelState is Valid
2017-12-18 17:23:11.243 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:23:11.243 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:11.243 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:11.243 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:11.244 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:11.244 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:11.244 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:11.244 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.267 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.267 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.267 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:12.268 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:23:12.268 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:12.268 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.268 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.268 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.269 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.269 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:23:12.269 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:23:12.269 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:12.269 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.269 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.929 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.929 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.929 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:23:12.929 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:23:12.930 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:23:12.930 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:12.932 +03:00 [Debug] Committing transaction.
2017-12-18 17:23:12.932 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.932 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:12.932 +03:00 [Debug] Disposing transaction.
2017-12-18 17:23:12.932 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:23:12.932 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:23:12.932 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:23:12.932 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:23:12.932 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1690.1013ms
2017-12-18 17:23:12.933 +03:00 [Debug] Connection id ""0HLA64B421CN1"" completed keep alive response.
2017-12-18 17:23:12.933 +03:00 [Information] Request finished in 1690.5997ms 200 application/json; charset=utf-8
2017-12-18 17:23:32.325 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:23:32.364 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:23:32.372 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:23:32.379 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:23:32.381 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:23:32.382 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:23:32.383 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:23:32.383 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:23:32.385 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:23:32.389 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:23:32.390 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:23:32.655 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:23:32.783 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:23:32.807 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:23:32.832 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.884 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.884 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.884 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.886 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.887 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.891 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:23:32.905 +03:00 [Information] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:23:32.905 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.905 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.936 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:23:32.944 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:23:32.975 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:23:32.980 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.980 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.994 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:23:32.994 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:23:32.999 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:23:32.999 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:32.999 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:23:33.004 +03:00 [Debug] Hosting starting
2017-12-18 17:23:33.054 +03:00 [Debug] Hosting started
2017-12-18 17:23:33.054 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:23:33.054 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:23:33.054 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:23:33.141 +03:00 [Debug] Connection id ""0HLA64BLITQSH"" started.
2017-12-18 17:23:33.141 +03:00 [Debug] Connection id ""0HLA64BLITQSI"" started.
2017-12-18 17:23:33.163 +03:00 [Debug] Connection id ""0HLA64BLITQSH"" reset.
2017-12-18 17:23:33.164 +03:00 [Debug] Connection id ""0HLA64BLITQSH"" disconnecting.
2017-12-18 17:23:33.165 +03:00 [Debug] Connection id ""0HLA64BLITQSH"" sending FIN.
2017-12-18 17:23:33.174 +03:00 [Debug] Connection id ""0HLA64BLITQSH"" stopped.
2017-12-18 17:23:33.223 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:23:33.288 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:23:33.354 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:23:33.359 +03:00 [Debug] Connection id ""0HLA64BLITQSI"" completed keep alive response.
2017-12-18 17:23:33.360 +03:00 [Information] Request finished in 138.9323ms 404 
2017-12-18 17:23:33.391 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:23:33.393 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:23:33.394 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:23:33.394 +03:00 [Debug] Connection id ""0HLA64BLITQSI"" completed keep alive response.
2017-12-18 17:23:33.394 +03:00 [Information] Request finished in 3.6043ms 404 
2017-12-18 17:24:00.302 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread  
2017-12-18 17:24:00.302 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:24:00.304 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:24:00.347 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:24:00.369 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 17:24:03.095 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:24:03.099 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:24:03.101 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:24:03.117 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:24:03.117 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:03.118 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:03.118 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:24:03.118 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 17:24:03.118 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:24:03.118 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:03.119 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:12.044 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 17:24:12.049 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:24:12.049 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:24:12.049 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:24:12.108 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 11758.8418ms
2017-12-18 17:24:12.109 +03:00 [Debug] Connection id ""0HLA64BLITQSI"" completed keep alive response.
2017-12-18 17:24:12.109 +03:00 [Information] Request finished in 11807.1092ms 404 application/json; charset=utf-8
2017-12-18 17:24:47.599 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:24:47.636 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:24:47.644 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:24:47.651 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:24:47.653 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:24:47.654 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:24:47.655 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:24:47.656 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:24:47.658 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:24:47.660 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:24:47.661 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:24:47.886 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:24:48.016 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:24:48.041 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:24:48.065 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.116 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.116 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.116 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.118 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.119 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.123 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:24:48.137 +03:00 [Information] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:24:48.137 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.137 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.166 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:24:48.174 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:24:48.197 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:24:48.202 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.202 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.216 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:24:48.217 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:24:48.221 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:24:48.221 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.221 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:24:48.226 +03:00 [Debug] Hosting starting
2017-12-18 17:24:48.270 +03:00 [Debug] Hosting started
2017-12-18 17:24:48.270 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:24:48.270 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:24:48.270 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:24:48.510 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" started.
2017-12-18 17:24:48.510 +03:00 [Debug] Connection id ""0HLA64CC1MJ34"" started.
2017-12-18 17:24:48.532 +03:00 [Debug] Connection id ""0HLA64CC1MJ34"" reset.
2017-12-18 17:24:48.532 +03:00 [Debug] Connection id ""0HLA64CC1MJ34"" disconnecting.
2017-12-18 17:24:48.533 +03:00 [Debug] Connection id ""0HLA64CC1MJ34"" sending FIN.
2017-12-18 17:24:48.547 +03:00 [Debug] Connection id ""0HLA64CC1MJ34"" stopped.
2017-12-18 17:24:48.582 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:24:48.636 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:24:48.698 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:24:48.704 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" completed keep alive response.
2017-12-18 17:24:48.706 +03:00 [Information] Request finished in 124.4581ms 404 
2017-12-18 17:24:48.731 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:24:48.732 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:24:48.732 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:24:48.732 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" completed keep alive response.
2017-12-18 17:24:48.732 +03:00 [Information] Request finished in 0.6767ms 404 
2017-12-18 17:25:13.300 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 17:25:13.300 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:25:13.302 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:25:13.347 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:25:13.389 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 17:25:15.965 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:25:15.969 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:25:15.971 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:25:15.993 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:25:15.994 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:15.994 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:15.996 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:25:16.018 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:25:16.044 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:25:16.044 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:16.044 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:18.035 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:18.035 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:18.035 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:25:18.036 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:25:18.036 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:25:18.036 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:18.036 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:26.462 +03:00 [Debug] Compiling query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]).Count()"'
2017-12-18 17:25:26.463 +03:00 [Debug] Optimized query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
select [l]).Count()"'
2017-12-18 17:25:26.467 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<int> _InterceptExceptions(
    source: IEnumerable<int> _ToSequence(int GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT COUNT(*)
                    FROM [Message] AS [l]
                    WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:25:26.467 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:26.467 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:26.468 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:25:26.470 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:25:26.470 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:25:26.470 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:26.470 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:30.812 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:25:30.813 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:25:30.817 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:25:31.396 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:31.396 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:31.396 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:25:31.397 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:25:41.595 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:25:41.595 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:41.595 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:41.985 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:41.985 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:41.986 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:25:42.000 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:25:42.001 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:25:42.001 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:25:42.004 +03:00 [Debug] Committing transaction.
2017-12-18 17:25:42.005 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:42.005 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:25:42.005 +03:00 [Debug] Disposing transaction.
2017-12-18 17:26:31.901 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.901 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.923 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.925 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.925 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:26:31.925 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.925 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.942 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.942 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.942 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.942 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.942 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:26:31.942 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.942 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.967 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.967 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.967 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.968 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:31.968 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:26:31.968 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:31.968 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:57.467 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:57.467 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:57.467 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:57.468 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:26:57.468 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:26:57.468 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:26:57.468 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:27:22.222 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" reset.
2017-12-18 17:27:22.222 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:27:22.222 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" disconnecting.
2017-12-18 17:27:22.223 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" sending FIN.
2017-12-18 17:27:22.230 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:27:22.230 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:27:22.230 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:27:22.274 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:27:22.275 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:27:22.275 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:27:22.275 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:27:22.275 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:27:22.275 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:27:22.275 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:27:22.287 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 128937.7824ms
2017-12-18 17:27:22.287 +03:00 [Information] Request finished in 128987.0351ms 200 application/json; charset=utf-8
2017-12-18 17:27:22.289 +03:00 [Debug] Connection id ""0HLA64CC1MJ35"" stopped.
2017-12-18 17:34:05.506 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:34:05.540 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:34:05.547 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:34:05.555 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:34:05.557 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:34:05.558 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:34:05.559 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:34:05.559 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:34:05.561 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:34:05.564 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:34:05.565 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:34:05.775 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:34:05.908 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:34:05.933 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:05.953 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.668 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.668 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.669 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.671 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.672 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.677 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:34:06.723 +03:00 [Information] Executed DbCommand ("47"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:34:06.724 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.724 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.756 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:34:06.765 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:34:06.790 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:34:06.796 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.796 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.808 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:34:06.810 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:34:06.815 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:06.815 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.815 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:06.820 +03:00 [Debug] Hosting starting
2017-12-18 17:34:06.871 +03:00 [Debug] Hosting started
2017-12-18 17:34:06.871 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:34:06.871 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:34:06.871 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:34:07.116 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" started.
2017-12-18 17:34:07.116 +03:00 [Debug] Connection id ""0HLA64HIGVT0O"" started.
2017-12-18 17:34:07.140 +03:00 [Debug] Connection id ""0HLA64HIGVT0O"" reset.
2017-12-18 17:34:07.140 +03:00 [Debug] Connection id ""0HLA64HIGVT0O"" disconnecting.
2017-12-18 17:34:07.141 +03:00 [Debug] Connection id ""0HLA64HIGVT0O"" sending FIN.
2017-12-18 17:34:07.154 +03:00 [Debug] Connection id ""0HLA64HIGVT0O"" stopped.
2017-12-18 17:34:07.186 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:34:07.246 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:07.314 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:34:07.323 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:07.324 +03:00 [Information] Request finished in 139.5119ms 404 
2017-12-18 17:34:07.360 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:34:07.360 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:07.360 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:34:07.360 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:07.360 +03:00 [Information] Request finished in 0.706ms 404 
2017-12-18 17:34:11.782 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 17:34:11.782 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:11.783 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:34:11.827 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:34:11.862 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 17:34:11.866 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:11.870 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:34:11.873 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:34:11.892 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:34:11.892 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.892 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.894 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:11.921 +03:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:11.942 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:11.942 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.942 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.950 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.950 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.950 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:11.951 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:11.951 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:11.951 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.951 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.958 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 17:34:11.960 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 17:34:11.968 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
            FROM [Message] AS [l]
            WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
            ORDER BY [l].[SentTime], 
        shaper: TypedProjectionShaper<ValueBufferShaper, ValueBuffer, Message>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:34:11.968 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.968 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.968 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:11.971 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:11.971 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:11.971 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.971 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.972 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:34:11.972 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:34:11.975 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:34:11.976 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.976 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.976 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:11.977 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:11.977 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:11.978 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.978 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:11.984 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:34:11.989 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:34:11.989 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:34:11.989 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:34:12.041 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 211.4211ms
2017-12-18 17:34:12.042 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:12.042 +03:00 [Information] Request finished in 259.9189ms 200 application/json; charset=utf-8
2017-12-18 17:34:12.901 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 17:34:12.901 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:12.901 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:34:12.901 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:34:12.902 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 17:34:12.902 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:12.902 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.903 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.903 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:12.904 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:12.904 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:12.904 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.904 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.904 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.904 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.905 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:12.905 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:12.905 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:12.905 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.905 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.905 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.905 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.905 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:12.906 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:12.906 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:12.906 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.906 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.906 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.906 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.906 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:12.907 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:34:12.907 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:12.907 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.907 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:12.907 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:34:12.907 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:34:12.907 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:34:12.907 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:34:12.908 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 6.2674ms
2017-12-18 17:34:12.908 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:12.908 +03:00 [Information] Request finished in 7.1833ms 200 application/json; charset=utf-8
2017-12-18 17:34:38.896 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?body=adasda%C4%B1osdyasjkhd&receiver=rick  
2017-12-18 17:34:38.896 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:38.896 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:34:38.896 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"26ead419-30bf-4a71-a3d8-6afe45a15c36"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:34:38.898 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:34:38.898 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:34:38.898 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:38.898 +03:00 [Information] Request finished in 2.2118ms 404 
2017-12-18 17:34:42.694 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=adasda%C4%B1osdyasjkhd&receiver=rick  0
2017-12-18 17:34:42.694 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:42.694 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:34:42.696 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:34:42.696 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["adasdaosdyasjkhd", "rick"]) - ModelState is Valid
2017-12-18 17:34:42.697 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:42.697 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:42.698 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:42.698 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:42.698 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:42.698 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:42.698 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:42.698 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.982 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.982 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.982 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:43.983 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:43.983 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:43.983 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.983 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.989 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:34:43.992 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 17:34:43.998 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:34:43.998 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.999 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:43.999 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:44.002 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:44.002 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:44.003 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:44.003 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:45.294 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:45.294 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:45.295 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:34:45.309 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:45.313 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:45.318 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:45.319 +03:00 [Debug] Committing transaction.
2017-12-18 17:34:45.319 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:45.319 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:45.319 +03:00 [Debug] Disposing transaction.
2017-12-18 17:34:45.320 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:34:45.320 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:34:45.320 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:34:45.320 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:34:45.331 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2635.1103ms
2017-12-18 17:34:45.331 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:45.332 +03:00 [Information] Request finished in 2637.8682ms 200 application/json; charset=utf-8
2017-12-18 17:34:47.320 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=adasda%C4%B1osdyasjkhd&receiver=rick  0
2017-12-18 17:34:47.320 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:47.320 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:34:47.320 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:34:47.320 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["adasdaosdyasjkhd", "rick"]) - ModelState is Valid
2017-12-18 17:34:47.321 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:47.321 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:47.321 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:47.321 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:47.321 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:47.321 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:47.321 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:47.321 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.301 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.301 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.301 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:48.302 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:48.302 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:48.302 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.302 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.303 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.303 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.303 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:48.303 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:48.303 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:48.303 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:48.303 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:49.547 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:49.548 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:49.548 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:34:49.548 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:49.549 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:49.549 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:49.551 +03:00 [Debug] Committing transaction.
2017-12-18 17:34:49.551 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:49.551 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:49.551 +03:00 [Debug] Disposing transaction.
2017-12-18 17:34:49.551 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:34:49.551 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:34:49.552 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:34:49.552 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:34:49.552 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2231.4592ms
2017-12-18 17:34:49.552 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:49.552 +03:00 [Information] Request finished in 2231.9845ms 200 application/json; charset=utf-8
2017-12-18 17:34:51.533 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?body=adasda%C4%B1osdyasjkhd&receiver=rick  0
2017-12-18 17:34:51.533 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:34:51.533 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 17:34:51.533 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 17:34:51.533 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["adasdaosdyasjkhd", "rick"]) - ModelState is Valid
2017-12-18 17:34:51.533 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:34:51.533 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:51.534 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:51.534 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:51.534 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:51.534 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:51.534 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:51.534 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.268 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.269 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.269 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:52.269 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:34:52.269 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:52.269 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.269 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.270 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.270 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.270 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:52.270 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 17:34:52.270 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:52.270 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.270 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.974 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.974 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.974 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:34:52.974 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:52.975 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 17:34:52.975 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:34:52.978 +03:00 [Debug] Committing transaction.
2017-12-18 17:34:52.978 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.978 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:34:52.978 +03:00 [Debug] Disposing transaction.
2017-12-18 17:34:52.978 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:34:52.978 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:34:52.978 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:34:52.978 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:34:52.978 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 1445.3234ms
2017-12-18 17:34:52.978 +03:00 [Debug] Connection id ""0HLA64HIGVT0P"" completed keep alive response.
2017-12-18 17:34:52.979 +03:00 [Information] Request finished in 1445.8043ms 200 application/json; charset=utf-8
2017-12-18 17:35:16.060 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 17:35:16.096 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 17:35:16.102 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 17:35:16.110 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 17:35:16.111 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:35:16.112 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 17:35:16.112 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 17:35:16.113 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 17:35:16.115 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 17:35:16.118 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 17:35:16.119 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 17:35:16.324 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 17:35:16.470 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 17:35:16.493 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:35:16.513 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.118 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.118 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.119 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.121 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.121 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.126 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:35:17.167 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 17:35:17.167 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.167 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.194 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:35:17.201 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 17:35:17.221 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:35:17.226 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.226 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.239 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:35:17.243 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 17:35:17.248 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:35:17.248 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.248 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:17.253 +03:00 [Debug] Hosting starting
2017-12-18 17:35:17.304 +03:00 [Debug] Hosting started
2017-12-18 17:35:17.305 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 17:35:17.305 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 17:35:17.305 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 17:35:17.419 +03:00 [Debug] Connection id ""0HLA64I7FEA9H"" started.
2017-12-18 17:35:17.419 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" started.
2017-12-18 17:35:17.440 +03:00 [Debug] Connection id ""0HLA64I7FEA9H"" reset.
2017-12-18 17:35:17.441 +03:00 [Debug] Connection id ""0HLA64I7FEA9H"" disconnecting.
2017-12-18 17:35:17.442 +03:00 [Debug] Connection id ""0HLA64I7FEA9H"" sending FIN.
2017-12-18 17:35:17.449 +03:00 [Debug] Connection id ""0HLA64I7FEA9H"" stopped.
2017-12-18 17:35:17.490 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 17:35:17.543 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:35:17.612 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:35:17.618 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" completed keep alive response.
2017-12-18 17:35:17.619 +03:00 [Information] Request finished in 131.0806ms 404 
2017-12-18 17:35:17.655 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 17:35:17.655 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:35:17.656 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:35:17.656 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" completed keep alive response.
2017-12-18 17:35:17.656 +03:00 [Information] Request finished in 0.7024ms 404 
2017-12-18 17:35:26.827 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view/unread?sender=ilkercig  0
2017-12-18 17:35:26.827 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:35:26.828 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:35:26.838 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"' with id '"89cdb705-d6e9-466b-b925-3199b7f54347"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 17:35:26.841 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 17:35:26.842 +03:00 [Debug] Request did not match any routes.
2017-12-18 17:35:26.842 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" completed keep alive response.
2017-12-18 17:35:26.842 +03:00 [Information] Request finished in 15.1534ms 404 
2017-12-18 17:35:36.476 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=ilkercig  
2017-12-18 17:35:36.476 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 17:35:36.476 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 17:35:36.511 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 17:35:36.547 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["ilkercig"]) - ModelState is Valid
2017-12-18 17:35:36.553 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 17:35:36.556 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:35:36.558 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 17:35:36.574 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:35:36.575 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.575 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.576 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:35:36.598 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:35:36.623 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:35:36.623 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.623 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.630 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.630 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.631 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:35:36.631 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 17:35:36.631 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:35:36.631 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:36.631 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:47.055 +03:00 [Debug] Compiling query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]).Count()"'
2017-12-18 17:35:47.055 +03:00 [Debug] Optimized query model: "
"'"(from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
select [l]).Count()"'
2017-12-18 17:35:47.060 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<int> _InterceptExceptions(
    source: IEnumerable<int> _ToSequence(int GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT COUNT(*)
                    FROM [Message] AS [l]
                    WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:35:47.061 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:47.061 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:47.061 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:35:47.066 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:35:47.066 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:35:47.067 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:47.067 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:53.615 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 17:35:53.616 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 17:35:53.625 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
            FROM [Message] AS [l]
            WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
            ORDER BY [l].[SentTime], 
        shaper: TypedProjectionShaper<ValueBufferShaper, ValueBuffer, Message>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:35:53.626 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:53.626 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:53.626 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:35:53.628 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:35:53.630 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:35:53.630 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:35:53.630 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:14.364 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:36:14.364 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 17:36:14.369 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 17:36:14.369 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:14.369 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:14.369 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:36:14.374 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 17:36:14.386 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:36:14.386 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:14.386 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:16.311 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:16.312 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:16.312 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:36:16.312 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:36:16.312 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:36:16.312 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:16.312 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:22.186 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:22.186 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:22.187 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 17:36:22.201 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:36:22.203 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?', @p8='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p6, [ReceiveTime] = @p7
WHERE [MessageID] = @p8;
SELECT @@ROWCOUNT;"
2017-12-18 17:36:22.204 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:36:22.205 +03:00 [Debug] Committing transaction.
2017-12-18 17:36:22.206 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:22.206 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:22.206 +03:00 [Debug] Disposing transaction.
2017-12-18 17:36:24.868 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:24.868 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:24.868 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:36:24.868 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])"
2017-12-18 17:36:24.868 +03:00 [Debug] A data reader was disposed.
2017-12-18 17:36:24.868 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:24.868 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 17:36:29.413 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 17:36:29.418 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 17:36:29.418 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 17:36:29.418 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 17:36:29.485 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 52971.3316ms
2017-12-18 17:36:29.486 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" completed keep alive response.
2017-12-18 17:36:29.486 +03:00 [Information] Request finished in 53009.8706ms 200 application/json; charset=utf-8
2017-12-18 17:39:01.339 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" received FIN.
2017-12-18 17:39:01.339 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" disconnecting.
2017-12-18 17:39:01.340 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" sending FIN.
2017-12-18 17:39:01.340 +03:00 [Debug] Connection id ""0HLA64I7FEA9I"" stopped.
2017-12-18 19:18:28.776 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:18:28.807 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:18:28.817 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:18:28.824 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:18:28.826 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:18:28.826 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:18:28.827 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:18:28.827 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:18:28.829 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:18:28.832 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:18:28.833 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:18:28.937 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:18:29.049 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:18:29.068 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:18:29.076 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.771 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.771 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.771 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.773 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.774 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.778 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:18:29.810 +03:00 [Information] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:18:29.810 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.810 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.834 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:18:29.840 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:18:29.857 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:18:29.861 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.861 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.871 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:18:29.874 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:18:29.878 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:18:29.878 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.878 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:18:29.882 +03:00 [Debug] Hosting starting
2017-12-18 19:18:29.909 +03:00 [Debug] Hosting started
2017-12-18 19:18:29.909 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:18:29.910 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:18:29.910 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:18:29.953 +03:00 [Debug] Connection id ""0HLA66BT024EB"" started.
2017-12-18 19:18:29.970 +03:00 [Debug] Connection id ""0HLA66BT024EB"" reset.
2017-12-18 19:18:29.971 +03:00 [Debug] Connection id ""0HLA66BT024EB"" disconnecting.
2017-12-18 19:18:29.971 +03:00 [Debug] Connection id ""0HLA66BT024EB"" sending FIN.
2017-12-18 19:18:29.973 +03:00 [Debug] Connection id ""0HLA66BT024EB"" stopped.
2017-12-18 19:20:35.465 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:20:35.502 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:20:35.508 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:20:35.516 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:20:35.518 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:20:35.519 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:20:35.520 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:20:35.521 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:20:35.523 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:20:35.525 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:20:35.526 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:20:35.771 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:20:35.885 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:20:35.910 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:20:35.948 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.519 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.519 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.520 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.521 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.522 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.526 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:20:36.566 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:20:36.566 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.566 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.596 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:20:36.605 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:20:36.625 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:20:36.629 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.629 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.640 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:20:36.643 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:20:36.649 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:20:36.649 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.649 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:20:36.654 +03:00 [Debug] Hosting starting
2017-12-18 19:20:36.701 +03:00 [Debug] Hosting started
2017-12-18 19:20:36.701 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:20:36.701 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:20:36.701 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:20:36.947 +03:00 [Debug] Connection id ""0HLA66D2R5AKD"" started.
2017-12-18 19:20:36.947 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" started.
2017-12-18 19:20:36.969 +03:00 [Debug] Connection id ""0HLA66D2R5AKD"" reset.
2017-12-18 19:20:36.969 +03:00 [Debug] Connection id ""0HLA66D2R5AKD"" disconnecting.
2017-12-18 19:20:36.975 +03:00 [Debug] Connection id ""0HLA66D2R5AKD"" sending FIN.
2017-12-18 19:20:36.981 +03:00 [Debug] Connection id ""0HLA66D2R5AKD"" stopped.
2017-12-18 19:20:37.012 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:20:37.069 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:20:37.144 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:20:37.155 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:20:37.156 +03:00 [Information] Request finished in 144.8831ms 404 
2017-12-18 19:20:37.189 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:20:37.190 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:20:37.190 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:20:37.190 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:20:37.190 +03:00 [Information] Request finished in 0.6825ms 404 
2017-12-18 19:21:02.585 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/register  
2017-12-18 19:21:02.585 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:21:02.585 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:21:02.585 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:21:02.585 +03:00 [Information] Request finished in 0.2997ms 404 
2017-12-18 19:21:07.899 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/register  0
2017-12-18 19:21:07.899 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:21:07.899 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:21:07.899 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:21:07.899 +03:00 [Information] Request finished in 0.358ms 404 
2017-12-18 19:21:58.346 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/register?UserName=ilkercig&EmailAddress=dummy@gmail.com&Password=1231241  0
2017-12-18 19:21:58.346 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:21:58.346 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:21:58.346 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:21:58.346 +03:00 [Information] Request finished in 0.2964ms 404 
2017-12-18 19:22:22.285 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/register?UserName=ilkercig&EmailAddress=dummy@gmail.com&Password=1231241  0
2017-12-18 19:22:22.285 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:22:22.285 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:22:22.285 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:22:22.285 +03:00 [Information] Request finished in 0.2641ms 404 
2017-12-18 19:22:32.752 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ilkercig&EmailAddress=dummy@gmail.com&Password=1231241  0
2017-12-18 19:22:32.752 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:22:32.754 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:22:32.823 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:22:32.865 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:22:32.874 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:22:32.876 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:22:32.885 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:22:32.886 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:22:32.886 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:22:32.888 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:22:32.909 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:22:32.910 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:22:32.910 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:22:32.910 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:22:32.917 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:22:32.923 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:22:32.923 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:22:32.923 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:22:32.972 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 145.2689ms
2017-12-18 19:22:32.972 +03:00 [Debug] Connection id ""0HLA66D2R5AKE"" completed keep alive response.
2017-12-18 19:22:32.972 +03:00 [Information] Request finished in 220.3916ms 400 application/json; charset=utf-8
2017-12-18 19:24:03.489 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:24:03.530 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:24:03.536 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:24:03.544 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:24:03.546 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:24:03.546 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:24:03.547 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:24:03.548 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:24:03.550 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:24:03.552 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:24:03.553 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:24:03.790 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:24:03.905 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:24:03.930 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:24:03.956 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.563 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.563 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.564 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.565 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.566 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.570 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:24:04.612 +03:00 [Information] Executed DbCommand ("42"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:24:04.612 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.612 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.641 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:24:04.649 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:24:04.669 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:24:04.673 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.673 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.685 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:24:04.689 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:24:04.694 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:24:04.694 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.694 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:04.698 +03:00 [Debug] Hosting starting
2017-12-18 19:24:04.748 +03:00 [Debug] Hosting started
2017-12-18 19:24:04.748 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:24:04.748 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:24:04.748 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:24:04.845 +03:00 [Debug] Connection id ""0HLA66F0PR32D"" started.
2017-12-18 19:24:04.845 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" started.
2017-12-18 19:24:04.867 +03:00 [Debug] Connection id ""0HLA66F0PR32D"" reset.
2017-12-18 19:24:04.868 +03:00 [Debug] Connection id ""0HLA66F0PR32D"" disconnecting.
2017-12-18 19:24:04.873 +03:00 [Debug] Connection id ""0HLA66F0PR32D"" sending FIN.
2017-12-18 19:24:04.880 +03:00 [Debug] Connection id ""0HLA66F0PR32D"" stopped.
2017-12-18 19:24:04.910 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:24:04.971 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:24:05.051 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:24:05.059 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" completed keep alive response.
2017-12-18 19:24:05.059 +03:00 [Information] Request finished in 151.6379ms 404 
2017-12-18 19:24:05.097 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:24:05.099 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:24:05.099 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:24:05.099 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" completed keep alive response.
2017-12-18 19:24:05.099 +03:00 [Information] Request finished in 2.2951ms 404 
2017-12-18 19:24:07.822 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ilkercig&EmailAddress=dummy@gmail.com&Password=1231241  0
2017-12-18 19:24:07.822 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:24:07.824 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:24:07.883 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:24:07.924 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:24:07.928 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:24:07.929 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:24:07.939 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:24:07.939 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:07.939 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:07.941 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:24:07.967 +03:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:24:07.968 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:24:07.968 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:07.968 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:24:07.975 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:24:07.981 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:24:07.982 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:24:07.982 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:24:08.037 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 150.9695ms
2017-12-18 19:24:08.038 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" completed keep alive response.
2017-12-18 19:24:08.038 +03:00 [Information] Request finished in 216.3586ms 400 application/json; charset=utf-8
2017-12-18 19:25:49.941 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" received FIN.
2017-12-18 19:25:49.941 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" disconnecting.
2017-12-18 19:25:49.941 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" sending FIN.
2017-12-18 19:25:49.941 +03:00 [Debug] Connection id ""0HLA66F0PR32C"" stopped.
2017-12-18 19:26:18.415 +03:00 [Debug] Connection id ""0HLA66F0PR32E"" started.
2017-12-18 19:26:18.415 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ricki&EmailAddress=ilkercigdemal@gmail.com&Password=1231241  0
2017-12-18 19:26:18.415 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:26:18.416 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:26:18.416 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:26:18.426 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:26:18.427 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:18.427 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:18.427 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:26:18.428 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:26:18.428 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:26:18.428 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:18.428 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:18.434 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 19:26:22.094 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:22.094 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:22.095 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 19:26:22.109 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:26:22.112 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:26:22.118 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:26:22.119 +03:00 [Debug] Committing transaction.
2017-12-18 19:26:22.119 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:22.119 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:26:22.119 +03:00 [Debug] Disposing transaction.
2017-12-18 19:26:22.120 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 19:26:22.120 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:26:22.120 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:26:22.120 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:26:22.122 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 3705.5908ms
2017-12-18 19:26:22.123 +03:00 [Debug] Connection id ""0HLA66F0PR32E"" completed keep alive response.
2017-12-18 19:26:22.123 +03:00 [Information] Request finished in 3707.7664ms 200 application/json; charset=utf-8
2017-12-18 19:27:04.432 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:27:04.466 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:27:04.473 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:27:04.482 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:27:04.484 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:27:04.484 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:27:04.485 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:27:04.486 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:27:04.489 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:27:04.492 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:27:04.493 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:27:04.725 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:27:04.842 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:27:04.864 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:27:04.885 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.530 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.530 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.530 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.532 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.533 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.537 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:27:05.577 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:27:05.577 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.577 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.606 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:27:05.614 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:27:05.634 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:27:05.638 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.638 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.649 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:27:05.651 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:27:05.655 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:27:05.655 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.655 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:05.659 +03:00 [Debug] Hosting starting
2017-12-18 19:27:05.709 +03:00 [Debug] Hosting started
2017-12-18 19:27:05.709 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:27:05.709 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:27:05.709 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:27:05.788 +03:00 [Debug] Connection id ""0HLA66GMNE5T4"" started.
2017-12-18 19:27:05.788 +03:00 [Debug] Connection id ""0HLA66GMNE5T5"" started.
2017-12-18 19:27:05.810 +03:00 [Debug] Connection id ""0HLA66GMNE5T5"" reset.
2017-12-18 19:27:05.810 +03:00 [Debug] Connection id ""0HLA66GMNE5T5"" disconnecting.
2017-12-18 19:27:05.813 +03:00 [Debug] Connection id ""0HLA66GMNE5T5"" sending FIN.
2017-12-18 19:27:05.822 +03:00 [Debug] Connection id ""0HLA66GMNE5T5"" stopped.
2017-12-18 19:27:05.852 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:27:05.914 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:27:05.985 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:27:05.991 +03:00 [Debug] Connection id ""0HLA66GMNE5T4"" completed keep alive response.
2017-12-18 19:27:05.992 +03:00 [Information] Request finished in 142.8002ms 404 
2017-12-18 19:27:06.032 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:27:06.032 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:27:06.033 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:27:06.033 +03:00 [Debug] Connection id ""0HLA66GMNE5T4"" completed keep alive response.
2017-12-18 19:27:06.033 +03:00 [Information] Request finished in 0.8238ms 404 
2017-12-18 19:27:25.376 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ricki2&EmailAddress=ilkercigdemal@gmail.com&Password=1231241  0
2017-12-18 19:27:25.376 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:27:25.377 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:27:25.438 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:27:25.490 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:27:25.495 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:27:25.496 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:27:25.508 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:27:25.509 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:25.509 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:25.511 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:27:25.534 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:27:25.535 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:27:25.535 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:25.535 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:27:25.544 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:27:25.552 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:27:25.553 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:27:25.553 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:27:25.618 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 176.9638ms
2017-12-18 19:27:25.619 +03:00 [Debug] Connection id ""0HLA66GMNE5T4"" completed keep alive response.
2017-12-18 19:27:25.619 +03:00 [Information] Request finished in 243.0928ms 400 application/json; charset=utf-8
2017-12-18 19:33:23.154 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:33:23.189 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:33:23.199 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:33:23.213 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:33:23.215 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:33:23.216 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:33:23.216 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:33:23.217 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:33:23.219 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:33:23.222 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:33:23.222 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:33:23.448 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:33:23.578 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:33:23.601 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:33:23.622 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.417 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.417 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.417 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.419 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.419 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.423 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:33:26.463 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:33:26.463 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.463 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.491 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:33:26.499 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:33:26.519 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:33:26.524 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.524 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.540 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:33:26.543 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:33:26.548 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:33:26.548 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.548 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:26.552 +03:00 [Debug] Hosting starting
2017-12-18 19:33:26.600 +03:00 [Debug] Hosting started
2017-12-18 19:33:26.600 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:33:26.600 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:33:26.600 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:33:26.759 +03:00 [Debug] Connection id ""0HLA66K88LAL7"" started.
2017-12-18 19:33:26.759 +03:00 [Debug] Connection id ""0HLA66K88LAL8"" started.
2017-12-18 19:33:26.780 +03:00 [Debug] Connection id ""0HLA66K88LAL8"" reset.
2017-12-18 19:33:26.780 +03:00 [Debug] Connection id ""0HLA66K88LAL8"" disconnecting.
2017-12-18 19:33:26.781 +03:00 [Debug] Connection id ""0HLA66K88LAL8"" sending FIN.
2017-12-18 19:33:26.791 +03:00 [Debug] Connection id ""0HLA66K88LAL8"" stopped.
2017-12-18 19:33:26.817 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:33:26.870 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:33:26.937 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:33:26.944 +03:00 [Debug] Connection id ""0HLA66K88LAL7"" completed keep alive response.
2017-12-18 19:33:26.944 +03:00 [Information] Request finished in 128.5445ms 404 
2017-12-18 19:33:26.974 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:33:26.976 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:33:26.978 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:33:26.978 +03:00 [Debug] Connection id ""0HLA66K88LAL7"" completed keep alive response.
2017-12-18 19:33:26.978 +03:00 [Information] Request finished in 3.7051ms 404 
2017-12-18 19:33:37.814 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokki&EmailAddress=ilkercigdemal@gmail.com&Password=1231241  0
2017-12-18 19:33:37.814 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:33:37.815 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:33:37.874 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:33:37.912 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:33:37.916 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:33:37.917 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:33:37.927 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:33:37.927 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:37.927 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:37.929 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:33:37.950 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:33:37.950 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:33:37.951 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:37.951 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:33:37.958 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:33:37.963 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:33:37.964 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:33:37.964 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:33:38.014 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 137.349ms
2017-12-18 19:33:38.014 +03:00 [Debug] Connection id ""0HLA66K88LAL7"" completed keep alive response.
2017-12-18 19:33:38.014 +03:00 [Information] Request finished in 200.7828ms 400 application/json; charset=utf-8
2017-12-18 19:35:34.950 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:35:35.002 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:35:35.011 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:35:35.021 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:35:35.023 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:35:35.024 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:35:35.025 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:35:35.025 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:35:35.027 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:35:35.030 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:35:35.031 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:35:35.269 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:35:35.387 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:35:35.409 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:35:35.431 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.163 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.163 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.163 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.165 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.166 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.170 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:35:36.209 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:35:36.210 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.210 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.242 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:35:36.251 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:35:36.272 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:35:36.277 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.277 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.288 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:35:36.292 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:35:36.297 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:35:36.297 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.297 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:36.301 +03:00 [Debug] Hosting starting
2017-12-18 19:35:36.348 +03:00 [Debug] Hosting started
2017-12-18 19:35:36.348 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:35:36.348 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:35:36.348 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:35:36.479 +03:00 [Debug] Connection id ""0HLA66LETOMHU"" started.
2017-12-18 19:35:36.479 +03:00 [Debug] Connection id ""0HLA66LETOMHT"" started.
2017-12-18 19:35:36.499 +03:00 [Debug] Connection id ""0HLA66LETOMHT"" reset.
2017-12-18 19:35:36.499 +03:00 [Debug] Connection id ""0HLA66LETOMHT"" disconnecting.
2017-12-18 19:35:36.500 +03:00 [Debug] Connection id ""0HLA66LETOMHT"" sending FIN.
2017-12-18 19:35:36.507 +03:00 [Debug] Connection id ""0HLA66LETOMHT"" stopped.
2017-12-18 19:35:36.543 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:35:36.600 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:35:36.684 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:35:36.690 +03:00 [Debug] Connection id ""0HLA66LETOMHU"" completed keep alive response.
2017-12-18 19:35:36.691 +03:00 [Information] Request finished in 149.5875ms 404 
2017-12-18 19:35:36.723 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:35:36.723 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:35:36.723 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:35:36.723 +03:00 [Debug] Connection id ""0HLA66LETOMHU"" completed keep alive response.
2017-12-18 19:35:36.723 +03:00 [Information] Request finished in 0.6909ms 404 
2017-12-18 19:35:50.141 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokki&EmailAddress=ilkercigdemal@gmail.com&Password=1231241  0
2017-12-18 19:35:50.141 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:35:50.142 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:35:50.200 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:35:50.240 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:35:50.244 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:35:50.246 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:35:50.260 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:35:50.261 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:50.261 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:50.263 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:35:50.298 +03:00 [Information] Executed DbCommand ("36"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:35:50.299 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:35:50.299 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:35:50.300 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:50.241 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:36:50.275 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:36:50.282 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:36:50.290 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:36:50.293 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:36:50.293 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:36:50.294 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:36:50.294 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:36:50.297 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:36:50.300 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:36:50.300 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:36:50.532 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:36:50.643 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:36:50.664 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:36:50.685 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.327 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.327 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.327 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.329 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.330 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.335 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:36:51.375 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:36:51.375 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.375 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.403 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:36:51.410 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:36:51.430 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:36:51.434 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.434 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.446 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:36:51.451 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:36:51.457 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:36:51.457 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.457 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:51.462 +03:00 [Debug] Hosting starting
2017-12-18 19:36:51.509 +03:00 [Debug] Hosting started
2017-12-18 19:36:51.509 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:36:51.509 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:36:51.509 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:36:51.713 +03:00 [Debug] Connection id ""0HLA66M5B89H6"" started.
2017-12-18 19:36:51.713 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" started.
2017-12-18 19:36:51.734 +03:00 [Debug] Connection id ""0HLA66M5B89H6"" reset.
2017-12-18 19:36:51.734 +03:00 [Debug] Connection id ""0HLA66M5B89H6"" disconnecting.
2017-12-18 19:36:51.741 +03:00 [Debug] Connection id ""0HLA66M5B89H6"" sending FIN.
2017-12-18 19:36:51.747 +03:00 [Debug] Connection id ""0HLA66M5B89H6"" stopped.
2017-12-18 19:36:51.774 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:36:51.837 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:36:51.907 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:36:51.914 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:36:51.914 +03:00 [Information] Request finished in 141.8517ms 404 
2017-12-18 19:36:51.946 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:36:51.947 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:36:51.949 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:36:51.949 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:36:51.949 +03:00 [Information] Request finished in 3.515ms 404 
2017-12-18 19:36:58.051 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokki&EmailAddress=ilkercigdemal@gmail.com&Password=1231241  0
2017-12-18 19:36:58.051 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:36:58.052 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:36:58.119 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:36:58.163 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:36:58.169 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:36:58.170 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:36:58.183 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:36:58.183 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:58.183 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:58.186 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:36:58.214 +03:00 [Information] Executed DbCommand ("29"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:36:58.216 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:36:58.216 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:58.216 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:36:58.225 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:36:58.234 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:36:58.234 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:36:58.234 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:36:58.294 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 171.6225ms
2017-12-18 19:36:58.295 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:36:58.295 +03:00 [Information] Request finished in 243.9791ms 400 application/json; charset=utf-8
2017-12-18 19:37:35.859 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokki&EmailAddress=lokkgmail.com&Password=1231241  0
2017-12-18 19:37:35.859 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:37:35.859 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:37:35.859 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:37:35.870 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:37:35.870 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:37:35.870 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:37:35.870 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:37:35.871 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 11.2574ms
2017-12-18 19:37:35.871 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:37:35.871 +03:00 [Information] Request finished in 12.2539ms 400 application/json; charset=utf-8
2017-12-18 19:38:07.984 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokki&EmailAddress=lokk@gmail.com&Password=12  0
2017-12-18 19:38:07.984 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:38:07.984 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:38:07.984 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:38:07.992 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:38:07.993 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:07.993 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:07.993 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:38:07.994 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:38:07.994 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:38:07.994 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:07.994 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:08.000 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 19:38:08.045 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:08.045 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:08.046 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 19:38:08.062 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:38:08.064 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:38:08.069 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:38:08.070 +03:00 [Debug] Committing transaction.
2017-12-18 19:38:08.070 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:08.070 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:08.070 +03:00 [Debug] Disposing transaction.
2017-12-18 19:38:08.071 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 19:38:08.072 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:38:08.072 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:38:08.072 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:38:08.076 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 91.5569ms
2017-12-18 19:38:08.076 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:38:08.076 +03:00 [Information] Request finished in 92.1317ms 200 application/json; charset=utf-8
2017-12-18 19:38:20.517 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=lokski&EmailAddress=losskk@gmail.com&Password=12  0
2017-12-18 19:38:20.517 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:38:20.517 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:38:20.517 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:38:20.525 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:38:20.525 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.525 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.525 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:38:20.526 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:38:20.526 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:38:20.526 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.526 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.526 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 19:38:20.527 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.528 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.528 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 19:38:20.528 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:38:20.529 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:38:20.529 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:38:20.532 +03:00 [Debug] Committing transaction.
2017-12-18 19:38:20.532 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.532 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:38:20.532 +03:00 [Debug] Disposing transaction.
2017-12-18 19:38:20.532 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 19:38:20.532 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:38:20.532 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:38:20.532 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:38:20.532 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 14.6979ms
2017-12-18 19:38:20.532 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:38:20.532 +03:00 [Information] Request finished in 15.3351ms 200 application/json; charset=utf-8
2017-12-18 19:38:32.366 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=losskk@gmail.com&Password=  0
2017-12-18 19:38:32.367 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:38:32.367 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:38:32.367 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:38:44.059 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:38:44.060 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:38:44.060 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:38:44.060 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:38:44.060 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 11693.0156ms
2017-12-18 19:38:44.060 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:38:44.060 +03:00 [Information] Request finished in 11693.4461ms 400 application/json; charset=utf-8
2017-12-18 19:38:51.952 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=losskk@gmail.com&Password=  0
2017-12-18 19:38:51.952 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:38:51.952 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:38:51.952 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:39:18.486 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:39:18.487 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:39:18.487 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:39:18.487 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:39:18.487 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 26534.3465ms
2017-12-18 19:39:18.487 +03:00 [Debug] Connection id ""0HLA66M5B89H5"" completed keep alive response.
2017-12-18 19:39:18.487 +03:00 [Information] Request finished in 26534.9128ms 400 application/json; charset=utf-8
2017-12-18 19:39:20.708 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=losskk@gmail.com&Password=  0
2017-12-18 19:39:20.708 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:39:20.708 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:39:20.708 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:40:32.822 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:40:32.881 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:40:32.888 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:40:32.896 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:40:32.897 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:40:32.898 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:40:32.899 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:40:32.900 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:40:32.901 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:40:32.904 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:40:32.905 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:40:33.147 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:40:33.271 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:40:33.295 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:40:33.325 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.015 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.016 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.016 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.018 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.019 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.024 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:40:34.068 +03:00 [Information] Executed DbCommand ("45"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:40:34.068 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.068 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.097 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:40:34.105 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:40:34.126 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:40:34.130 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.130 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.141 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:40:34.142 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:40:34.147 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:40:34.147 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.147 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:34.152 +03:00 [Debug] Hosting starting
2017-12-18 19:40:34.201 +03:00 [Debug] Hosting started
2017-12-18 19:40:34.201 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:40:34.201 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:40:34.201 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:40:34.283 +03:00 [Debug] Connection id ""0HLA66O7LRF78"" started.
2017-12-18 19:40:34.304 +03:00 [Debug] Connection id ""0HLA66O7LRF78"" reset.
2017-12-18 19:40:34.304 +03:00 [Debug] Connection id ""0HLA66O7LRF78"" disconnecting.
2017-12-18 19:40:34.305 +03:00 [Debug] Connection id ""0HLA66O7LRF78"" sending FIN.
2017-12-18 19:40:34.307 +03:00 [Debug] Connection id ""0HLA66O7LRF78"" stopped.
2017-12-18 19:40:34.941 +03:00 [Debug] Connection id ""0HLA66O7LRF79"" started.
2017-12-18 19:40:34.989 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=losskk@gmail.com&Password=  0
2017-12-18 19:40:35.056 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:40:35.145 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:40:35.219 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:40:44.888 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:40:44.893 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:40:44.894 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:40:44.894 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:40:44.948 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 9725.4012ms
2017-12-18 19:40:44.949 +03:00 [Debug] Connection id ""0HLA66O7LRF79"" completed keep alive response.
2017-12-18 19:40:44.951 +03:00 [Information] Request finished in 9962.7606ms 400 application/json; charset=utf-8
2017-12-18 19:40:57.742 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:40:57.779 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:40:57.786 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:40:57.793 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:40:57.795 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:40:57.796 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:40:57.797 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:40:57.797 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:40:57.799 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:40:57.802 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:40:57.803 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:40:58.109 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:40:58.222 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:40:58.246 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:40:58.267 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.921 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.921 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.922 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.924 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.925 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.929 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:40:58.967 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:40:58.968 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:58.968 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:59.000 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:40:59.010 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:40:59.033 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:40:59.038 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:59.038 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:59.052 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:40:59.054 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:40:59.059 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:40:59.059 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:59.059 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:40:59.064 +03:00 [Debug] Hosting starting
2017-12-18 19:40:59.114 +03:00 [Debug] Hosting started
2017-12-18 19:40:59.114 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:40:59.114 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:40:59.114 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:40:59.176 +03:00 [Debug] Connection id ""0HLA66OF37VG2"" started.
2017-12-18 19:40:59.176 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" started.
2017-12-18 19:40:59.199 +03:00 [Debug] Connection id ""0HLA66OF37VG2"" reset.
2017-12-18 19:40:59.199 +03:00 [Debug] Connection id ""0HLA66OF37VG2"" disconnecting.
2017-12-18 19:40:59.201 +03:00 [Debug] Connection id ""0HLA66OF37VG2"" sending FIN.
2017-12-18 19:40:59.207 +03:00 [Debug] Connection id ""0HLA66OF37VG2"" stopped.
2017-12-18 19:40:59.249 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:40:59.307 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:40:59.375 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:40:59.382 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" completed keep alive response.
2017-12-18 19:40:59.382 +03:00 [Information] Request finished in 135.0659ms 404 
2017-12-18 19:40:59.411 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:40:59.412 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:40:59.412 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:40:59.412 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" completed keep alive response.
2017-12-18 19:40:59.412 +03:00 [Information] Request finished in 0.7637ms 404 
2017-12-18 19:41:01.661 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=losskk@gmail.com&Password=  0
2017-12-18 19:41:01.661 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:41:01.662 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:41:01.720 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:41:01.747 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:41:01.752 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:41:01.753 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:41:01.753 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:41:01.804 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 80.937ms
2017-12-18 19:41:01.804 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" completed keep alive response.
2017-12-18 19:41:01.805 +03:00 [Information] Request finished in 143.57ms 400 application/json; charset=utf-8
2017-12-18 19:42:17.095 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" received FIN.
2017-12-18 19:42:17.095 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" disconnecting.
2017-12-18 19:42:17.096 +03:00 [Debug] Connection id ""0HLA66OF37VG4"" started.
2017-12-18 19:42:17.096 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" sending FIN.
2017-12-18 19:42:17.096 +03:00 [Debug] Connection id ""0HLA66OF37VG3"" stopped.
2017-12-18 19:42:17.099 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=loi&EmailAddress=lsword=  0
2017-12-18 19:42:17.099 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:42:17.099 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:42:17.099 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:42:17.100 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:42:17.100 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:42:17.101 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:42:17.101 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:42:17.101 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 2.1526ms
2017-12-18 19:42:17.102 +03:00 [Debug] Connection id ""0HLA66OF37VG4"" completed keep alive response.
2017-12-18 19:42:17.102 +03:00 [Information] Request finished in 2.8702ms 400 application/json; charset=utf-8
2017-12-18 19:42:24.108 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=  0
2017-12-18 19:42:24.108 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:42:24.108 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:42:24.108 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:42:24.109 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:42:24.109 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:42:24.109 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:42:24.109 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:42:24.109 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 0.348ms
2017-12-18 19:42:24.109 +03:00 [Debug] Connection id ""0HLA66OF37VG4"" completed keep alive response.
2017-12-18 19:42:24.109 +03:00 [Information] Request finished in 0.7139ms 400 application/json; charset=utf-8
2017-12-18 19:42:27.257 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?  0
2017-12-18 19:42:27.257 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:42:27.257 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:42:27.257 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:42:27.258 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:42:27.258 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:42:27.258 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:42:27.258 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:42:27.258 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 1.1284ms
2017-12-18 19:42:27.258 +03:00 [Debug] Connection id ""0HLA66OF37VG4"" completed keep alive response.
2017-12-18 19:42:27.258 +03:00 [Information] Request finished in 1.5516ms 400 application/json; charset=utf-8
2017-12-18 19:42:29.797 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register  0
2017-12-18 19:42:29.797 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:42:29.797 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:42:29.797 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:42:29.797 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:42:29.797 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:42:29.797 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:42:29.797 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:42:29.797 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 0.3972ms
2017-12-18 19:42:29.797 +03:00 [Debug] Connection id ""0HLA66OF37VG4"" completed keep alive response.
2017-12-18 19:42:29.797 +03:00 [Information] Request finished in 0.7685ms 400 application/json; charset=utf-8
2017-12-18 19:45:08.408 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 19:45:08.448 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 19:45:08.457 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 19:45:08.471 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 19:45:08.473 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:45:08.474 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 19:45:08.475 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 19:45:08.486 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 19:45:08.490 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 19:45:08.494 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 19:45:08.495 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 19:45:08.727 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 19:45:08.852 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 19:45:08.877 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:45:08.896 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.597 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.597 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.597 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.599 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.600 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.605 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:45:09.644 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 19:45:09.644 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.644 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.675 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:45:09.683 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 19:45:09.705 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:45:09.709 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.709 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.720 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:45:09.723 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:45:09.727 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:45:09.727 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.727 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:09.733 +03:00 [Debug] Hosting starting
2017-12-18 19:45:09.788 +03:00 [Debug] Hosting started
2017-12-18 19:45:09.788 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 19:45:09.788 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 19:45:09.788 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 19:45:09.821 +03:00 [Debug] Connection id ""0HLA66QPPIO6M"" started.
2017-12-18 19:45:09.821 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" started.
2017-12-18 19:45:09.841 +03:00 [Debug] Connection id ""0HLA66QPPIO6M"" reset.
2017-12-18 19:45:09.842 +03:00 [Debug] Connection id ""0HLA66QPPIO6M"" disconnecting.
2017-12-18 19:45:09.848 +03:00 [Debug] Connection id ""0HLA66QPPIO6M"" sending FIN.
2017-12-18 19:45:09.855 +03:00 [Debug] Connection id ""0HLA66QPPIO6M"" stopped.
2017-12-18 19:45:09.886 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 19:45:09.947 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:45:10.023 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:45:10.030 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" completed keep alive response.
2017-12-18 19:45:10.030 +03:00 [Information] Request finished in 146.685ms 404 
2017-12-18 19:45:10.069 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 19:45:10.069 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:45:10.070 +03:00 [Debug] Request did not match any routes.
2017-12-18 19:45:10.070 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" completed keep alive response.
2017-12-18 19:45:10.070 +03:00 [Information] Request finished in 0.7827ms 404 
2017-12-18 19:45:26.476 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ilkeriicig@gmail.com&EmailAddress=dddummy@gmail.com&Password=12  0
2017-12-18 19:45:26.476 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:45:26.478 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:45:26.548 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:45:26.594 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:45:26.601 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:45:26.601 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:45:26.601 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:45:26.662 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 110.3645ms
2017-12-18 19:45:26.663 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" completed keep alive response.
2017-12-18 19:45:26.663 +03:00 [Information] Request finished in 186.8544ms 400 application/json; charset=utf-8
2017-12-18 19:45:39.264 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ilkeriiciggmail.com&EmailAddress=dddummy@gmail.com&Password=12  0
2017-12-18 19:45:39.264 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:45:39.265 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:45:39.265 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:45:39.274 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:45:39.274 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:45:39.274 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:45:39.274 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:45:39.276 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 9.3146ms
2017-12-18 19:45:39.276 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" completed keep alive response.
2017-12-18 19:45:39.276 +03:00 [Information] Request finished in 11.7784ms 400 application/json; charset=utf-8
2017-12-18 19:45:46.554 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=ilkeriiciggmailom&EmailAddress=dddummy@gmail.com&Password=12  0
2017-12-18 19:45:46.555 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:45:46.555 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:45:46.555 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:45:46.567 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:45:46.571 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:45:46.573 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 19:45:46.585 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 19:45:46.585 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:46.585 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:46.587 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:45:46.610 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:45:46.611 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:45:46.611 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:46.611 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:45:46.613 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 19:45:46.613 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:45:46.613 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:45:46.613 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:45:46.613 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 58.3747ms
2017-12-18 19:45:46.613 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" completed keep alive response.
2017-12-18 19:45:46.614 +03:00 [Information] Request finished in 59.0992ms 400 application/json; charset=utf-8
2017-12-18 19:46:57.525 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" received FIN.
2017-12-18 19:46:57.525 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" disconnecting.
2017-12-18 19:46:57.525 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" started.
2017-12-18 19:46:57.526 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" sending FIN.
2017-12-18 19:46:57.526 +03:00 [Debug] Connection id ""0HLA66QPPIO6N"" stopped.
2017-12-18 19:46:57.528 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=Marty&EmailAddress=marty@gmail.com&Password=131412  0
2017-12-18 19:46:57.528 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 19:46:57.528 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 19:46:57.528 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 19:46:57.536 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 19:46:57.537 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:46:57.537 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:46:57.537 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:46:57.538 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 19:46:57.538 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:46:57.538 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:46:57.538 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:46:57.544 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 19:47:03.795 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:47:03.795 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:47:03.796 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 19:47:03.810 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:47:03.812 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 19:47:03.818 +03:00 [Debug] A data reader was disposed.
2017-12-18 19:47:03.819 +03:00 [Debug] Committing transaction.
2017-12-18 19:47:03.819 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:47:03.819 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 19:47:03.819 +03:00 [Debug] Disposing transaction.
2017-12-18 19:47:03.821 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 19:47:03.821 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 19:47:03.821 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 19:47:03.821 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 19:47:03.826 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 6297.7156ms
2017-12-18 19:47:03.826 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" completed keep alive response.
2017-12-18 19:47:03.826 +03:00 [Information] Request finished in 6298.2767ms 200 application/json; charset=utf-8
2017-12-18 19:48:49.808 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" received FIN.
2017-12-18 19:48:49.808 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" disconnecting.
2017-12-18 19:48:49.808 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" sending FIN.
2017-12-18 19:48:49.808 +03:00 [Debug] Connection id ""0HLA66QPPIO6O"" stopped.
2017-12-18 20:02:29.014 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:02:29.048 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:02:29.055 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:02:29.064 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:02:29.066 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:02:29.067 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:02:29.068 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:02:29.068 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:02:29.070 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:02:29.073 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:02:29.074 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:02:29.280 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:02:29.395 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:02:29.418 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:02:29.439 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.074 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.074 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.074 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.076 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.076 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.080 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:02:30.119 +03:00 [Information] Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:02:30.120 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.120 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.148 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:02:30.157 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:02:30.177 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:02:30.180 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.181 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.191 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:02:30.195 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:02:30.200 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:02:30.200 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.200 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:30.205 +03:00 [Debug] Hosting starting
2017-12-18 20:02:30.253 +03:00 [Debug] Hosting started
2017-12-18 20:02:30.253 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:02:30.253 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:02:30.253 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:02:30.261 +03:00 [Debug] Connection id ""0HLA674FRVRM3"" started.
2017-12-18 20:02:30.261 +03:00 [Debug] Connection id ""0HLA674FRVRM4"" started.
2017-12-18 20:02:30.284 +03:00 [Debug] Connection id ""0HLA674FRVRM4"" reset.
2017-12-18 20:02:30.284 +03:00 [Debug] Connection id ""0HLA674FRVRM4"" disconnecting.
2017-12-18 20:02:30.285 +03:00 [Debug] Connection id ""0HLA674FRVRM4"" sending FIN.
2017-12-18 20:02:30.296 +03:00 [Debug] Connection id ""0HLA674FRVRM4"" stopped.
2017-12-18 20:02:30.321 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:02:30.382 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:02:30.456 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:02:30.464 +03:00 [Debug] Connection id ""0HLA674FRVRM3"" completed keep alive response.
2017-12-18 20:02:30.464 +03:00 [Information] Request finished in 144.5961ms 404 
2017-12-18 20:02:30.495 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:02:30.495 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:02:30.495 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:02:30.496 +03:00 [Debug] Connection id ""0HLA674FRVRM3"" completed keep alive response.
2017-12-18 20:02:30.496 +03:00 [Information] Request finished in 0.7881ms 404 
2017-12-18 20:02:50.419 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:02:50.456 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:02:50.462 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:02:50.470 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:02:50.472 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:02:50.473 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:02:50.473 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:02:50.474 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:02:50.476 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:02:50.479 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:02:50.479 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:02:50.704 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:02:50.830 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:02:50.856 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:02:50.877 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.480 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.480 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.481 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.482 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.483 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.487 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:02:51.528 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:02:51.529 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.529 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.557 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:02:51.564 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:02:51.585 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:02:51.589 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.589 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.599 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:02:51.602 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:02:51.607 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:02:51.607 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.607 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:02:51.612 +03:00 [Debug] Hosting starting
2017-12-18 20:02:51.660 +03:00 [Debug] Hosting started
2017-12-18 20:02:51.660 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:02:51.660 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:02:51.660 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:02:51.676 +03:00 [Debug] Connection id ""0HLA674M87AKI"" started.
2017-12-18 20:02:51.676 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" started.
2017-12-18 20:02:51.696 +03:00 [Debug] Connection id ""0HLA674M87AKI"" reset.
2017-12-18 20:02:51.696 +03:00 [Debug] Connection id ""0HLA674M87AKI"" disconnecting.
2017-12-18 20:02:51.702 +03:00 [Debug] Connection id ""0HLA674M87AKI"" sending FIN.
2017-12-18 20:02:51.713 +03:00 [Debug] Connection id ""0HLA674M87AKI"" stopped.
2017-12-18 20:02:51.741 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:02:51.800 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:02:51.872 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:02:51.878 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:02:51.879 +03:00 [Information] Request finished in 139.5457ms 404 
2017-12-18 20:02:51.912 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:02:51.914 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:02:51.914 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:02:51.915 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:02:51.915 +03:00 [Information] Request finished in 3.0757ms 404 
2017-12-18 20:03:24.410 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/register?UserName=Marty&EmailAddress=marty@gmail.com&Password=131412  
2017-12-18 20:03:24.411 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:03:24.412 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 20:03:24.422 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"' with id '"da0d079f-ee10-4436-9a8a-ebf00020fd60"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:03:24.425 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 20:03:24.425 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:03:24.425 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:03:24.425 +03:00 [Information] Request finished in 14.9647ms 404 
2017-12-18 20:03:28.199 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/user/register?UserName=Marty&EmailAddress=marty@gmail.com&Password=131412  0
2017-12-18 20:03:28.199 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:03:28.199 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 20:03:28.199 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"' with id '"da0d079f-ee10-4436-9a8a-ebf00020fd60"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:03:28.199 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 20:03:28.199 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:03:28.199 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:03:28.199 +03:00 [Information] Request finished in 0.5448ms 404 
2017-12-18 20:03:57.255 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=  
2017-12-18 20:03:57.255 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:03:57.255 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:03:57.291 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:03:57.316 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 20:03:57.317 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:03:57.321 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:03:57.325 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 31.2755ms
2017-12-18 20:03:57.326 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:03:57.327 +03:00 [Information] Request finished in 72.0396ms 400 
2017-12-18 20:04:11.135 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty@Password  
2017-12-18 20:04:11.135 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:04:11.135 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:04:11.136 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:04:11.141 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty@Password", ""]) - ModelState is Valid
2017-12-18 20:04:11.141 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:04:11.141 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:04:11.141 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 5.4005ms
2017-12-18 20:04:11.141 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:04:11.141 +03:00 [Information] Request finished in 6.1349ms 400 
2017-12-18 20:04:53.962 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty@Password%20=  
2017-12-18 20:04:53.962 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:04:53.962 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:04:53.962 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:04:53.962 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty@Password =", ""]) - ModelState is Valid
2017-12-18 20:04:53.962 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:04:53.963 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:04:53.963 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.4902ms
2017-12-18 20:04:53.963 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:04:53.963 +03:00 [Information] Request finished in 0.9134ms 400 
2017-12-18 20:04:58.097 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty@Password%20=131  
2017-12-18 20:04:58.098 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:04:58.098 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:04:58.098 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:04:58.098 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty@Password =131", ""]) - ModelState is Valid
2017-12-18 20:04:58.098 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:04:58.098 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:04:58.098 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.246ms
2017-12-18 20:04:58.098 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:04:58.098 +03:00 [Information] Request finished in 0.7423ms 400 
2017-12-18 20:05:12.235 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty&Password%20=131  
2017-12-18 20:05:12.235 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:05:12.235 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:05:12.235 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:05:12.235 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty", ""]) - ModelState is Valid
2017-12-18 20:05:12.235 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:05:12.235 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:05:12.235 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.2891ms
2017-12-18 20:05:12.235 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:05:12.235 +03:00 [Information] Request finished in 0.6858ms 400 
2017-12-18 20:05:21.665 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty&Password%20=131  
2017-12-18 20:05:21.665 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:05:21.666 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:05:21.666 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:05:21.666 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty", ""]) - ModelState is Valid
2017-12-18 20:05:25.636 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:05:25.636 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:05:25.636 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 3970.2386ms
2017-12-18 20:05:25.636 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:05:25.636 +03:00 [Information] Request finished in 3970.6733ms 400 
2017-12-18 20:05:35.442 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty&password=131  
2017-12-18 20:05:35.442 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:05:35.442 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:05:35.442 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:05:35.442 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty", "131"]) - ModelState is Valid
2017-12-18 20:06:04.673 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:06:04.677 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:06:04.679 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:06:04.696 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:06:04.697 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:04.697 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:04.699 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:06:04.719 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:06:04.742 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:06:04.742 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:04.742 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:04.756 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.UnauthorizedResult".
2017-12-18 20:06:04.756 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 401
2017-12-18 20:06:04.756 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 29314.3189ms
2017-12-18 20:06:04.757 +03:00 [Debug] Connection id ""0HLA674M87AKJ"" completed keep alive response.
2017-12-18 20:06:04.757 +03:00 [Information] Request finished in 29314.9223ms 401 
2017-12-18 20:06:31.256 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:06:31.287 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:06:31.294 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:06:31.301 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:06:31.302 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:06:31.303 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:06:31.303 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:06:31.304 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:06:31.306 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:06:31.308 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:06:31.309 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:06:31.404 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:06:31.504 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:06:31.523 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:06:31.529 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.092 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.092 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.092 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.094 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.094 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.098 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:06:32.134 +03:00 [Information] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:06:32.134 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.134 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.162 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:06:32.169 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:06:32.188 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:06:32.192 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.192 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.203 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:06:32.206 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:06:32.211 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:06:32.211 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.211 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:06:32.215 +03:00 [Debug] Hosting starting
2017-12-18 20:06:32.246 +03:00 [Debug] Hosting started
2017-12-18 20:06:32.246 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:06:32.246 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:06:32.246 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:06:32.408 +03:00 [Debug] Connection id ""0HLA676O19CMM"" started.
2017-12-18 20:06:32.453 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty&password=  
2017-12-18 20:06:32.479 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:06:32.527 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:06:32.554 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:06:32.583 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty", ""]) - ModelState is Valid
2017-12-18 20:06:32.584 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:06:32.588 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:06:32.590 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 34.1421ms
2017-12-18 20:06:32.596 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:06:32.597 +03:00 [Information] Request finished in 145.3468ms 400 
2017-12-18 20:07:14.864 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=marty&password=1234  
2017-12-18 20:07:14.864 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:07:14.864 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:07:14.864 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:07:14.865 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["marty", "1234"]) - ModelState is Valid
2017-12-18 20:07:14.866 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:07:14.869 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:07:14.871 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:07:14.884 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:07:14.884 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:14.884 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:14.885 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:07:14.905 +03:00 [Information] Executed DbCommand ("20"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:07:14.926 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:07:14.926 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:14.926 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:14.938 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.UnauthorizedResult".
2017-12-18 20:07:14.938 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 401
2017-12-18 20:07:14.938 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 74.0963ms
2017-12-18 20:07:14.939 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:07:14.939 +03:00 [Information] Request finished in 75.1157ms 401 
2017-12-18 20:07:34.788 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=mariiity&password=1234  
2017-12-18 20:07:34.789 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:07:34.789 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:07:34.789 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:07:34.789 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["mariiity", "1234"]) - ModelState is Valid
2017-12-18 20:07:34.789 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:07:34.790 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:34.790 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:34.790 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:07:34.791 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:07:34.791 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:07:34.791 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:34.791 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:07:34.791 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 20:07:34.794 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:07:34.794 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:07:34.795 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:07:34.826 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 37.668ms
2017-12-18 20:07:34.827 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:07:34.827 +03:00 [Information] Request finished in 38.871ms 404 application/json; charset=utf-8
2017-12-18 20:07:55.267 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName  
2017-12-18 20:07:55.267 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:07:55.267 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:07:55.267 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:07:55.267 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 20:07:55.267 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:07:55.267 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:07:55.267 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.3625ms
2017-12-18 20:07:55.267 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:07:55.268 +03:00 [Information] Request finished in 0.7752ms 400 
2017-12-18 20:08:10.468 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&Password%20=131  
2017-12-18 20:08:10.468 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:08:10.468 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:08:10.468 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:08:10.468 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:08:10.468 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:08:10.468 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:08:10.468 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.2348ms
2017-12-18 20:08:10.468 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:08:10.468 +03:00 [Information] Request finished in 0.6556ms 400 
2017-12-18 20:08:17.404 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password%20=131  
2017-12-18 20:08:17.405 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:08:17.405 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:08:17.405 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:08:17.405 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:08:17.405 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:08:17.405 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:08:17.405 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.2584ms
2017-12-18 20:08:17.405 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:08:17.405 +03:00 [Information] Request finished in 0.6173ms 400 
2017-12-18 20:08:37.658 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&Password%20=131  
2017-12-18 20:08:37.659 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:08:37.659 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:08:37.659 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:08:37.659 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:08:37.659 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:08:37.659 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:08:37.659 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 0.2448ms
2017-12-18 20:08:37.659 +03:00 [Debug] Connection id ""0HLA676O19CMM"" completed keep alive response.
2017-12-18 20:08:37.659 +03:00 [Information] Request finished in 0.6206ms 400 
2017-12-18 20:08:49.113 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:08:49.148 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:08:49.155 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:08:49.163 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:08:49.165 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:08:49.165 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:08:49.166 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:08:49.167 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:08:49.169 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:08:49.172 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:08:49.173 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:08:49.439 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:08:49.584 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:08:49.608 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:08:49.629 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.194 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.195 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.195 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.197 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.198 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.202 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:08:50.242 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:08:50.243 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.243 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.273 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:08:50.281 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:08:50.305 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:08:50.309 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.309 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.320 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:08:50.323 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:08:50.328 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:08:50.328 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.328 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:08:50.332 +03:00 [Debug] Hosting starting
2017-12-18 20:08:50.403 +03:00 [Debug] Hosting started
2017-12-18 20:08:50.403 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:08:50.403 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:08:50.403 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:08:50.607 +03:00 [Debug] Connection id ""0HLA6781787Q8"" started.
2017-12-18 20:08:50.607 +03:00 [Debug] Connection id ""0HLA6781787Q7"" started.
2017-12-18 20:08:50.633 +03:00 [Debug] Connection id ""0HLA6781787Q7"" reset.
2017-12-18 20:08:50.633 +03:00 [Debug] Connection id ""0HLA6781787Q7"" disconnecting.
2017-12-18 20:08:50.634 +03:00 [Debug] Connection id ""0HLA6781787Q7"" sending FIN.
2017-12-18 20:08:50.652 +03:00 [Debug] Connection id ""0HLA6781787Q7"" stopped.
2017-12-18 20:08:50.684 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:08:50.751 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:08:50.824 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:08:50.831 +03:00 [Debug] Connection id ""0HLA6781787Q8"" completed keep alive response.
2017-12-18 20:08:50.831 +03:00 [Information] Request finished in 149.0919ms 404 
2017-12-18 20:08:50.883 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:08:50.884 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:08:50.884 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:08:50.885 +03:00 [Debug] Connection id ""0HLA6781787Q8"" completed keep alive response.
2017-12-18 20:08:50.885 +03:00 [Information] Request finished in 1.8067ms 404 
2017-12-18 20:10:49.808 +03:00 [Debug] Connection id ""0HLA6781787Q8"" received FIN.
2017-12-18 20:10:49.808 +03:00 [Debug] Connection id ""0HLA6781787Q8"" disconnecting.
2017-12-18 20:10:49.809 +03:00 [Debug] Connection id ""0HLA6781787Q8"" sending FIN.
2017-12-18 20:10:49.809 +03:00 [Debug] Connection id ""0HLA6781787Q8"" stopped.
2017-12-18 20:14:13.769 +03:00 [Debug] Connection id ""0HLA6781787Q9"" started.
2017-12-18 20:14:13.770 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&Password%20=131  
2017-12-18 20:14:13.771 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:14:13.772 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:14:13.815 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:14:13.851 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:16:12.906 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:16:12.910 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:16:12.913 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 119095.9634ms
2017-12-18 20:16:12.915 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:16:12.915 +03:00 [Information] Request finished in 119144.8276ms 400 
2017-12-18 20:16:15.997 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&Password%20=131  
2017-12-18 20:16:15.997 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:16:15.997 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:16:15.997 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:16:15.998 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:16:19.021 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:16:19.021 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:16:19.022 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 3024.1571ms
2017-12-18 20:16:19.022 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:16:19.022 +03:00 [Information] Request finished in 3024.9459ms 400 
2017-12-18 20:16:30.875 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&Password%20=13123341  
2017-12-18 20:16:30.875 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:16:30.875 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:16:30.875 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:16:30.875 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:16:33.930 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:16:33.930 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:16:33.930 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 3054.9632ms
2017-12-18 20:16:33.930 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:16:33.930 +03:00 [Information] Request finished in 3055.4064ms 400 
2017-12-18 20:16:41.098 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password%20=13123341  
2017-12-18 20:16:41.098 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:16:41.099 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:16:41.099 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:16:41.099 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", ""]) - ModelState is Valid
2017-12-18 20:16:44.834 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 20:16:44.835 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 20:16:44.835 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 3736.0314ms
2017-12-18 20:16:44.835 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:16:44.835 +03:00 [Information] Request finished in 3736.4902ms 400 
2017-12-18 20:16:57.693 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=13123341  
2017-12-18 20:16:57.693 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:16:57.693 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:16:57.693 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:16:57.693 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "13123341"]) - ModelState is Valid
2017-12-18 20:16:59.900 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:16:59.904 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:16:59.906 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:16:59.923 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:16:59.923 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:16:59.951 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:16:59.953 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:16:59.976 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:16:59.997 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:16:59.997 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:16:59.997 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:17:08.298 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.UnauthorizedResult".
2017-12-18 20:17:08.298 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 401
2017-12-18 20:17:08.298 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 10604.5538ms
2017-12-18 20:17:08.298 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:17:08.298 +03:00 [Information] Request finished in 10605.1512ms 401 
2017-12-18 20:17:38.852 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 20:17:38.852 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:17:38.852 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:17:38.853 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:17:38.853 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 20:17:40.648 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:17:40.649 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:17:40.649 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:17:40.650 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:17:40.650 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:17:40.650 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:17:40.650 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:17:40.650 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:17:43.571 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:17:43.574 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:17:43.575 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 20:17:43.575 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:17:43.582 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 4729.8067ms
2017-12-18 20:17:43.583 +03:00 [Debug] Connection id ""0HLA6781787Q9"" completed keep alive response.
2017-12-18 20:17:43.583 +03:00 [Information] Request finished in 4731.0906ms 200 text/plain; charset=utf-8
2017-12-18 20:19:59.808 +03:00 [Debug] Connection id ""0HLA6781787Q9"" received FIN.
2017-12-18 20:19:59.808 +03:00 [Debug] Connection id ""0HLA6781787Q9"" disconnecting.
2017-12-18 20:19:59.808 +03:00 [Debug] Connection id ""0HLA6781787Q9"" sending FIN.
2017-12-18 20:19:59.808 +03:00 [Debug] Connection id ""0HLA6781787Q9"" stopped.
2017-12-18 20:20:54.070 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:20:54.107 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:20:54.114 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:20:54.121 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:20:54.123 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:20:54.123 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:20:54.124 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:20:54.125 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:20:54.127 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:20:54.129 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:20:54.130 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:20:54.355 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:20:54.468 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:20:54.490 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:20:54.512 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.131 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.131 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.132 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.134 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.135 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.140 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:20:55.191 +03:00 [Information] Executed DbCommand ("51"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:20:55.191 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.191 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.222 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:20:55.230 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:20:55.251 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:20:55.255 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.255 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.267 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:20:55.270 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:20:55.275 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:20:55.275 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.275 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:20:55.280 +03:00 [Debug] Hosting starting
2017-12-18 20:20:55.331 +03:00 [Debug] Hosting started
2017-12-18 20:20:55.331 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:20:55.331 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:20:55.331 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:20:55.387 +03:00 [Debug] Connection id ""0HLA67EP79J2A"" started.
2017-12-18 20:20:55.387 +03:00 [Debug] Connection id ""0HLA67EP79J29"" started.
2017-12-18 20:20:55.411 +03:00 [Debug] Connection id ""0HLA67EP79J2A"" reset.
2017-12-18 20:20:55.411 +03:00 [Debug] Connection id ""0HLA67EP79J2A"" disconnecting.
2017-12-18 20:20:55.412 +03:00 [Debug] Connection id ""0HLA67EP79J2A"" sending FIN.
2017-12-18 20:20:55.421 +03:00 [Debug] Connection id ""0HLA67EP79J2A"" stopped.
2017-12-18 20:20:55.459 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:20:55.527 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:20:55.600 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:20:55.608 +03:00 [Debug] Connection id ""0HLA67EP79J29"" completed keep alive response.
2017-12-18 20:20:55.609 +03:00 [Information] Request finished in 152.1839ms 404 
2017-12-18 20:20:55.644 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:20:55.644 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:20:55.644 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:20:55.644 +03:00 [Debug] Connection id ""0HLA67EP79J29"" completed keep alive response.
2017-12-18 20:20:55.644 +03:00 [Information] Request finished in 0.7531ms 404 
2017-12-18 20:21:05.237 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 20:21:05.237 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:21:05.238 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:21:05.282 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:21:05.314 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 20:21:05.317 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:21:05.323 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:21:05.325 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:21:05.342 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:21:05.342 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:21:05.342 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:21:05.344 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:21:05.369 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:21:05.395 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:21:05.395 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:21:05.395 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:21:05.473 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:21:05.479 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:21:05.480 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 20:21:05.480 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:21:05.494 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 208.2916ms
2017-12-18 20:21:05.495 +03:00 [Debug] Connection id ""0HLA67EP79J29"" completed keep alive response.
2017-12-18 20:21:05.495 +03:00 [Information] Request finished in 258.1436ms 200 text/plain; charset=utf-8
2017-12-18 20:21:33.120 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=%22rick%22  
2017-12-18 20:21:33.149 +03:00 [Information] Successfully validated the token.
2017-12-18 20:21:33.151 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:21:33.151 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:21:33.152 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"cf2fe36c-0c56-4d30-92b0-79794b1c348a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:21:33.152 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"2d9947db-a804-4fd0-a624-1fe0a51be40b"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:21:33.154 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 20:21:33.159 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:21:33.160 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 20:21:38.669 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 5515.6835ms
2017-12-18 20:21:38.670 +03:00 [Error] An unhandled exception has occurred while executing the request
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 58
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 20:21:38.781 +03:00 [Debug] Connection id ""0HLA67EP79J29"" completed keep alive response.
2017-12-18 20:21:38.781 +03:00 [Information] Request finished in 5661.3364ms 500 text/html; charset=utf-8
2017-12-18 20:21:46.378 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=%22rick%22  
2017-12-18 20:21:46.379 +03:00 [Information] Successfully validated the token.
2017-12-18 20:21:46.379 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:21:46.379 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:21:46.379 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"cf2fe36c-0c56-4d30-92b0-79794b1c348a"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:21:46.379 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"2d9947db-a804-4fd0-a624-1fe0a51be40b"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:21:46.379 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 20:21:46.379 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:21:46.380 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 20:23:54.653 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:23:54.690 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:23:54.698 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:23:54.706 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:23:54.709 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:23:54.710 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:23:54.711 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:23:54.712 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:23:54.715 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:23:54.718 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:23:54.718 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:23:54.988 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:23:55.124 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:23:55.148 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:23:55.171 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.879 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.879 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.880 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.882 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.883 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.887 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:23:55.930 +03:00 [Information] Executed DbCommand ("42"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:23:55.930 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.930 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.961 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:23:55.969 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:23:55.992 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:23:55.997 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:55.997 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:56.009 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:23:56.014 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:23:56.019 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:23:56.019 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:56.019 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:23:56.024 +03:00 [Debug] Hosting starting
2017-12-18 20:23:56.075 +03:00 [Debug] Hosting started
2017-12-18 20:23:56.076 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:23:56.076 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:23:56.076 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:23:56.135 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" started.
2017-12-18 20:23:56.135 +03:00 [Debug] Connection id ""0HLA67GF31MJ4"" started.
2017-12-18 20:23:56.157 +03:00 [Debug] Connection id ""0HLA67GF31MJ4"" reset.
2017-12-18 20:23:56.157 +03:00 [Debug] Connection id ""0HLA67GF31MJ4"" disconnecting.
2017-12-18 20:23:56.158 +03:00 [Debug] Connection id ""0HLA67GF31MJ4"" sending FIN.
2017-12-18 20:23:56.165 +03:00 [Debug] Connection id ""0HLA67GF31MJ4"" stopped.
2017-12-18 20:23:56.203 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:23:56.268 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:23:56.338 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:23:56.345 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" completed keep alive response.
2017-12-18 20:23:56.346 +03:00 [Information] Request finished in 144.8596ms 404 
2017-12-18 20:23:56.375 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:23:56.377 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:23:56.377 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:23:56.377 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" completed keep alive response.
2017-12-18 20:23:56.377 +03:00 [Information] Request finished in 1.7671ms 404 
2017-12-18 20:24:03.662 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 20:24:03.736 +03:00 [Information] Successfully validated the token.
2017-12-18 20:24:03.738 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:24:03.740 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:24:03.792 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:24:03.825 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 20:24:03.830 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:24:03.837 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:24:03.840 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:24:03.860 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:24:03.861 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:24:03.861 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:24:03.863 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:24:03.891 +03:00 [Information] Executed DbCommand ("29"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:24:03.921 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:24:03.922 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:24:03.922 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:24:03.955 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:24:03.966 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:24:03.967 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 20:24:03.967 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:24:03.989 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 194.4341ms
2017-12-18 20:24:03.989 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" completed keep alive response.
2017-12-18 20:24:03.990 +03:00 [Information] Request finished in 327.3954ms 200 text/plain; charset=utf-8
2017-12-18 20:24:34.463 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/blocking?username=rick  
2017-12-18 20:24:34.464 +03:00 [Information] Successfully validated the token.
2017-12-18 20:24:34.464 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:24:34.464 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:24:34.464 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" completed keep alive response.
2017-12-18 20:24:34.464 +03:00 [Information] Request finished in 0.665ms 404 
2017-12-18 20:24:42.214 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/user/blocking?username=rick  0
2017-12-18 20:24:42.215 +03:00 [Information] Successfully validated the token.
2017-12-18 20:24:42.215 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:24:42.215 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:24:42.216 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" completed keep alive response.
2017-12-18 20:24:42.216 +03:00 [Information] Request finished in 1.4429ms 404 
2017-12-18 20:25:55.567 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" received FIN.
2017-12-18 20:25:55.567 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" disconnecting.
2017-12-18 20:25:55.567 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" started.
2017-12-18 20:25:55.568 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" sending FIN.
2017-12-18 20:25:55.569 +03:00 [Debug] Connection id ""0HLA67GF31MJ5"" stopped.
2017-12-18 20:25:55.569 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/user/blocking?username=rick  0
2017-12-18 20:25:55.571 +03:00 [Information] Successfully validated the token.
2017-12-18 20:25:55.571 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:25:55.571 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:25:55.571 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" completed keep alive response.
2017-12-18 20:25:55.571 +03:00 [Information] Request finished in 2.4699ms 404 
2017-12-18 20:27:19.808 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" received FIN.
2017-12-18 20:27:19.808 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" disconnecting.
2017-12-18 20:27:19.808 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" sending FIN.
2017-12-18 20:27:19.809 +03:00 [Debug] Connection id ""0HLA67GF31MJ6"" stopped.
2017-12-18 20:27:58.414 +03:00 [Debug] Connection id ""0HLA67GF31MJ7"" started.
2017-12-18 20:27:58.415 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/blocking  
2017-12-18 20:27:58.415 +03:00 [Information] Successfully validated the token.
2017-12-18 20:27:58.415 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:27:58.415 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:27:58.415 +03:00 [Debug] Connection id ""0HLA67GF31MJ7"" completed keep alive response.
2017-12-18 20:27:58.415 +03:00 [Information] Request finished in 0.5201ms 404 
2017-12-18 20:28:05.641 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 20:28:05.642 +03:00 [Information] Successfully validated the token.
2017-12-18 20:28:05.642 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:28:05.642 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:28:05.642 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"ec09c4db-b8bb-4f5f-bf73-8b79a0d27096"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:28:05.642 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"774f7cd7-c08d-4956-9a92-e4f37043cc5c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:28:05.644 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 20:28:05.651 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:28:05.652 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 20:28:13.458 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:28:13.459 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.461 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.462 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:28:13.462 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:28:13.462 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:28:13.462 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.462 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.469 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:28:13.469 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:28:13.469 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:28:13.469 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:28:13.478 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 20:28:13.479 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 20:28:13.492 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:28:13.492 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.492 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.493 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 20:28:13.496 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 20:28:13.496 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:28:13.496 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.496 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:28:13.498 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 7853.2587ms
2017-12-18 20:28:13.498 +03:00 [Debug] Connection id ""0HLA67GF31MJ7"" completed keep alive response.
2017-12-18 20:28:13.498 +03:00 [Information] Request finished in 7856.8341ms 200 application/json; charset=utf-8
2017-12-18 20:53:23.764 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:53:23.800 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:53:23.809 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:53:23.817 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:53:23.819 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:53:23.819 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:53:23.820 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:53:23.820 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:53:23.823 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:53:23.825 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:53:23.826 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:53:24.057 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:53:24.169 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:53:24.195 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:53:24.217 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.195 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.195 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.195 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.197 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.198 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.202 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:53:27.240 +03:00 [Information] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:53:27.240 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.240 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.269 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:53:27.276 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:53:27.297 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:53:27.302 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.302 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.314 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:53:27.318 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:53:27.323 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:53:27.323 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.323 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:53:27.328 +03:00 [Debug] Hosting starting
2017-12-18 20:53:27.413 +03:00 [Debug] Hosting started
2017-12-18 20:53:27.413 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:53:27.413 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:53:27.413 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:53:27.599 +03:00 [Debug] Connection id ""0HLA680V11E3R"" started.
2017-12-18 20:53:27.599 +03:00 [Debug] Connection id ""0HLA680V11E3S"" started.
2017-12-18 20:53:27.620 +03:00 [Debug] Connection id ""0HLA680V11E3R"" reset.
2017-12-18 20:53:27.620 +03:00 [Debug] Connection id ""0HLA680V11E3R"" disconnecting.
2017-12-18 20:53:27.621 +03:00 [Debug] Connection id ""0HLA680V11E3R"" sending FIN.
2017-12-18 20:53:27.628 +03:00 [Debug] Connection id ""0HLA680V11E3R"" stopped.
2017-12-18 20:53:27.662 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:53:27.719 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:53:27.793 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:53:27.802 +03:00 [Debug] Connection id ""0HLA680V11E3S"" completed keep alive response.
2017-12-18 20:53:27.803 +03:00 [Information] Request finished in 141.7388ms 404 
2017-12-18 20:53:27.840 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:53:27.840 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:53:27.840 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:53:27.841 +03:00 [Debug] Connection id ""0HLA680V11E3S"" completed keep alive response.
2017-12-18 20:53:27.841 +03:00 [Information] Request finished in 0.777ms 404 
2017-12-18 20:57:00.183 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:57:00.217 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:57:00.223 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:57:00.231 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:57:00.232 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:57:00.233 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:57:00.234 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:57:00.234 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:57:00.236 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:57:00.239 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:57:00.239 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:57:00.448 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:57:00.580 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:57:00.606 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:57:00.627 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.238 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.238 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.238 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.240 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.241 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.246 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:57:01.283 +03:00 [Information] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:57:01.283 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.283 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.316 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:57:01.326 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:57:01.349 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:57:01.353 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.353 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.365 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:57:01.369 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:57:01.375 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:57:01.375 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.375 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:57:01.380 +03:00 [Debug] Hosting starting
2017-12-18 20:57:01.430 +03:00 [Debug] Hosting started
2017-12-18 20:57:01.430 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:57:01.430 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:57:01.430 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:57:01.510 +03:00 [Debug] Connection id ""0HLA682UP1EE9"" started.
2017-12-18 20:57:01.510 +03:00 [Debug] Connection id ""0HLA682UP1EE8"" started.
2017-12-18 20:58:02.123 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 20:58:02.160 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 20:58:02.171 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 20:58:02.179 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 20:58:02.181 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:58:02.182 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 20:58:02.183 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 20:58:02.183 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 20:58:02.185 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 20:58:02.188 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 20:58:02.189 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 20:58:02.383 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 20:58:02.504 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 20:58:02.527 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:58:02.548 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.260 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.260 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.260 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.262 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.263 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.267 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:58:03.308 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 20:58:03.309 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.309 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.338 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:58:03.347 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 20:58:03.367 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:58:03.371 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.371 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.383 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:58:03.385 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 20:58:03.390 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:58:03.390 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.390 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:03.395 +03:00 [Debug] Hosting starting
2017-12-18 20:58:03.440 +03:00 [Debug] Hosting started
2017-12-18 20:58:03.441 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 20:58:03.441 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 20:58:03.441 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 20:58:03.469 +03:00 [Debug] Connection id ""0HLA683H7UC0T"" started.
2017-12-18 20:58:03.469 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" started.
2017-12-18 20:58:03.491 +03:00 [Debug] Connection id ""0HLA683H7UC0T"" reset.
2017-12-18 20:58:03.492 +03:00 [Debug] Connection id ""0HLA683H7UC0T"" disconnecting.
2017-12-18 20:58:03.496 +03:00 [Debug] Connection id ""0HLA683H7UC0T"" sending FIN.
2017-12-18 20:58:03.506 +03:00 [Debug] Connection id ""0HLA683H7UC0T"" stopped.
2017-12-18 20:58:03.535 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 20:58:03.596 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:58:03.663 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:58:03.670 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:58:03.670 +03:00 [Information] Request finished in 137.1549ms 404 
2017-12-18 20:58:03.709 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 20:58:03.710 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 20:58:03.711 +03:00 [Debug] Request did not match any routes.
2017-12-18 20:58:03.711 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:58:03.711 +03:00 [Information] Request finished in 1.883ms 404 
2017-12-18 20:58:19.989 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 20:58:20.048 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjE4NDQzLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.ghOgqK7MN2dMQugCZWlgt0_lPoy1FbRegZ3ucJzJ-wI".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 17:34:03', Current time: '12/18/2017 17:58:20'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 20:58:20.075 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 17:34:03', Current time: '12/18/2017 17:58:20'."
2017-12-18 20:58:20.076 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 20:58:20.130 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 20:58:20.162 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 20:58:20.166 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:58:20.171 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:58:20.173 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 20:58:20.189 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:58:20.190 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:20.190 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:20.191 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:58:20.212 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:58:20.232 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:58:20.232 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:20.233 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:20.262 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:58:20.267 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:58:20.267 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 20:58:20.267 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:58:20.281 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 147.5614ms
2017-12-18 20:58:20.281 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:58:20.282 +03:00 [Information] Request finished in 292.1901ms 200 text/plain; charset=utf-8
2017-12-18 20:58:35.689 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 20:58:35.698 +03:00 [Information] Successfully validated the token.
2017-12-18 20:58:35.699 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:58:35.699 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:58:35.700 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"3bdff7d3-aedd-441e-859f-02079151dd4c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:58:35.700 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:58:35.703 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 20:58:35.709 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:58:35.710 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 20:58:38.937 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:58:38.938 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.938 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.939 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:58:38.939 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:58:38.939 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:58:38.939 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.939 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.944 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 20:58:38.944 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:58:38.944 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:58:38.944 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:58:38.954 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 20:58:38.955 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 20:58:38.966 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 20:58:38.967 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.967 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.967 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 20:58:38.971 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 20:58:38.971 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:58:38.971 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.971 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:58:38.973 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 3269.1855ms
2017-12-18 20:58:38.973 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:58:38.973 +03:00 [Information] Request finished in 3284.0238ms 200 application/json; charset=utf-8
2017-12-18 20:59:17.232 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22rick%22  0
2017-12-18 20:59:17.232 +03:00 [Information] Successfully validated the token.
2017-12-18 20:59:17.232 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:59:17.232 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:59:17.233 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fed23d2d-f730-4ae0-871e-9c236fd26f50"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:17.233 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:17.234 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 20:59:17.234 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:59:17.239 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"rick\""]) - ModelState is Valid
2017-12-18 20:59:19.871 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:59:19.872 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:19.872 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:19.872 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:19.872 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:19.872 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:59:19.872 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:19.873 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:19.873 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 20:59:19.873 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:59:19.873 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:59:19.873 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:59:19.876 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 2641.6531ms
2017-12-18 20:59:19.876 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:59:19.876 +03:00 [Information] Request finished in 2644.2389ms 404 application/json; charset=utf-8
2017-12-18 20:59:27.421 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=%22rick%22  0
2017-12-18 20:59:27.421 +03:00 [Information] Successfully validated the token.
2017-12-18 20:59:27.421 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:59:27.421 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:59:27.421 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fed23d2d-f730-4ae0-871e-9c236fd26f50"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:27.421 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:27.421 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 20:59:27.421 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:59:27.422 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["\"rick\""]) - ModelState is Valid
2017-12-18 20:59:31.512 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:59:31.512 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:31.512 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:31.512 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:31.513 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:31.513 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:59:31.513 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:31.513 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:31.513 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 20:59:31.513 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:59:31.513 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:59:31.513 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:59:31.513 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 4092.0275ms
2017-12-18 20:59:31.513 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:59:31.513 +03:00 [Information] Request finished in 4092.7747ms 404 application/json; charset=utf-8
2017-12-18 20:59:42.321 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rickili  0
2017-12-18 20:59:42.321 +03:00 [Information] Successfully validated the token.
2017-12-18 20:59:42.321 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 20:59:42.321 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 20:59:42.321 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fed23d2d-f730-4ae0-871e-9c236fd26f50"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:42.321 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 20:59:42.322 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 20:59:42.322 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 20:59:42.322 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rickili"]) - ModelState is Valid
2017-12-18 20:59:43.561 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 20:59:43.561 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:43.561 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:43.561 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:43.561 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 20:59:43.561 +03:00 [Debug] A data reader was disposed.
2017-12-18 20:59:43.562 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:43.562 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 20:59:43.562 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 20:59:43.562 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 20:59:43.562 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 20:59:43.562 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 20:59:43.562 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1240.3503ms
2017-12-18 20:59:43.562 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" completed keep alive response.
2017-12-18 20:59:43.562 +03:00 [Information] Request finished in 1241.2115ms 404 application/json; charset=utf-8
2017-12-18 21:00:59.694 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" received FIN.
2017-12-18 21:00:59.695 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" disconnecting.
2017-12-18 21:00:59.695 +03:00 [Debug] Connection id ""0HLA683H7UC0V"" started.
2017-12-18 21:00:59.695 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" sending FIN.
2017-12-18 21:00:59.695 +03:00 [Debug] Connection id ""0HLA683H7UC0U"" stopped.
2017-12-18 21:00:59.698 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username  0
2017-12-18 21:00:59.698 +03:00 [Information] Successfully validated the token.
2017-12-18 21:00:59.698 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:00:59.698 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:00:59.698 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fed23d2d-f730-4ae0-871e-9c236fd26f50"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:00:59.698 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:00:59.698 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:00:59.698 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:00:59.699 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:01:01.383 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:01:01.384 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:01:01.384 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:01:01.384 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 21:01:01.385 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 21:01:01.385 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:01:01.385 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:01:01.385 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:01:01.385 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 21:01:01.385 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:01:01.385 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:01:01.385 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:01:01.386 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1687.3507ms
2017-12-18 21:01:01.386 +03:00 [Debug] Connection id ""0HLA683H7UC0V"" completed keep alive response.
2017-12-18 21:01:01.386 +03:00 [Information] Request finished in 1688.1528ms 404 application/json; charset=utf-8
2017-12-18 21:01:06.756 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username  0
2017-12-18 21:01:06.757 +03:00 [Information] Successfully validated the token.
2017-12-18 21:01:06.757 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:01:06.757 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:01:06.757 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fed23d2d-f730-4ae0-871e-9c236fd26f50"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:01:06.757 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"1dfd83f2-1b6b-42c4-846b-2e208b14c57e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:01:06.757 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:01:06.757 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:01:06.757 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:02:17.157 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:02:17.192 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:02:17.198 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:02:17.206 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:02:17.208 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:02:17.209 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:02:17.210 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:02:17.210 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:02:17.213 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:02:17.215 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:02:17.216 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:02:17.426 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:02:17.549 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:02:17.574 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:02:17.594 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.251 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.252 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.252 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.254 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.254 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.259 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:02:18.298 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:02:18.298 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.298 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.326 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:02:18.333 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:02:18.357 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:02:18.362 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.362 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.373 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:02:18.377 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:02:18.382 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:02:18.382 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.382 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:02:18.387 +03:00 [Debug] Hosting starting
2017-12-18 21:02:18.435 +03:00 [Debug] Hosting started
2017-12-18 21:02:18.435 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:02:18.435 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:02:18.435 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:02:18.511 +03:00 [Debug] Connection id ""0HLA685T8739U"" started.
2017-12-18 21:02:18.511 +03:00 [Debug] Connection id ""0HLA685T8739T"" started.
2017-12-18 21:02:18.533 +03:00 [Debug] Connection id ""0HLA685T8739T"" reset.
2017-12-18 21:02:18.533 +03:00 [Debug] Connection id ""0HLA685T8739T"" disconnecting.
2017-12-18 21:02:18.534 +03:00 [Debug] Connection id ""0HLA685T8739T"" sending FIN.
2017-12-18 21:02:18.541 +03:00 [Debug] Connection id ""0HLA685T8739T"" stopped.
2017-12-18 21:02:18.581 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:02:18.647 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:02:18.717 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:02:18.724 +03:00 [Debug] Connection id ""0HLA685T8739U"" completed keep alive response.
2017-12-18 21:02:18.725 +03:00 [Information] Request finished in 145.6967ms 404 
2017-12-18 21:02:18.759 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:02:18.760 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:02:18.760 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:02:18.761 +03:00 [Debug] Connection id ""0HLA685T8739U"" completed keep alive response.
2017-12-18 21:02:18.761 +03:00 [Information] Request finished in 1.3919ms 404 
2017-12-18 21:02:29.470 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username  0
2017-12-18 21:02:29.545 +03:00 [Information] Successfully validated the token.
2017-12-18 21:02:29.547 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:02:29.548 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:02:29.557 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"bec42b88-442f-4b7e-9a57-f2bc0b68c450"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:02:29.558 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"3cfd372c-9fbf-4131-a76a-9336750be649"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:02:29.590 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:02:29.597 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:02:29.624 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:02:29.625 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 21:02:29.629 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 21:02:29.632 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 39.6441ms
2017-12-18 21:02:29.634 +03:00 [Debug] Connection id ""0HLA685T8739U"" completed keep alive response.
2017-12-18 21:02:29.634 +03:00 [Information] Request finished in 164.2788ms 400 
2017-12-18 21:03:00.674 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username  0
2017-12-18 21:03:00.675 +03:00 [Information] Successfully validated the token.
2017-12-18 21:03:00.675 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:03:00.675 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:03:00.675 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"bec42b88-442f-4b7e-9a57-f2bc0b68c450"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:03:00.675 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"3cfd372c-9fbf-4131-a76a-9336750be649"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:03:00.675 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:03:00.676 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:03:00.676 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:03:02.339 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 21:03:02.339 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 21:03:02.339 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1663.5902ms
2017-12-18 21:03:02.339 +03:00 [Debug] Connection id ""0HLA685T8739U"" completed keep alive response.
2017-12-18 21:03:02.339 +03:00 [Information] Request finished in 1665.0003ms 400 
2017-12-18 21:04:36.963 +03:00 [Debug] Connection id ""0HLA685T8739U"" received FIN.
2017-12-18 21:04:36.963 +03:00 [Debug] Connection id ""0HLA685T8739U"" disconnecting.
2017-12-18 21:04:36.963 +03:00 [Debug] Connection id ""0HLA685T8739U"" sending FIN.
2017-12-18 21:04:36.963 +03:00 [Debug] Connection id ""0HLA685T8739V"" started.
2017-12-18 21:04:36.964 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:04:36.967 +03:00 [Information] Successfully validated the token.
2017-12-18 21:04:36.967 +03:00 [Debug] Connection id ""0HLA685T8739U"" stopped.
2017-12-18 21:04:36.967 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:04:36.967 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:04:36.967 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"bec42b88-442f-4b7e-9a57-f2bc0b68c450"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:04:36.967 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"3cfd372c-9fbf-4131-a76a-9336750be649"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:04:36.967 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:04:36.967 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:04:36.972 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:04:36.977 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:04:36.983 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:04:36.985 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:04:37.001 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:04:37.001 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.001 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.003 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:37.244 +03:00 [Information] Executed DbCommand ("241"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:37.266 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:04:37.267 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.267 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.277 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.277 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.278 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:37.279 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:37.279 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:04:37.279 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.279 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.310 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.310 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.311 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:04:37.329 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:04:37.387 +03:00 [Information] Executed DbCommand ("57"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:04:37.387 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:04:37.388 +03:00 [Debug] Committing transaction.
2017-12-18 21:04:37.388 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.388 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:37.388 +03:00 [Debug] Disposing transaction.
2017-12-18 21:04:37.389 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 21:04:37.389 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 21:04:37.389 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 422.1824ms
2017-12-18 21:04:37.389 +03:00 [Debug] Connection id ""0HLA685T8739V"" completed keep alive response.
2017-12-18 21:04:37.389 +03:00 [Information] Request finished in 424.9407ms 200 
2017-12-18 21:04:40.060 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:04:40.060 +03:00 [Information] Successfully validated the token.
2017-12-18 21:04:40.060 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:04:40.060 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:04:40.060 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"bec42b88-442f-4b7e-9a57-f2bc0b68c450"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:04:40.060 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"3cfd372c-9fbf-4131-a76a-9336750be649"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:04:40.060 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:04:40.060 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:04:40.060 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:04:40.061 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:04:40.061 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.061 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.061 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:40.063 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:40.063 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:04:40.063 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.063 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.063 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.063 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.063 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:40.063 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:04:40.063 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:04:40.063 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.063 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.064 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.064 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.064 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:04:40.065 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:04:40.072 +03:00 [Error] Failed executing DbCommand ("7"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
System.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:b696bc37-8b06-437f-b16c-8ea60e4629a2
Error Number:2627,State:1,Class:14
2017-12-18 21:04:40.103 +03:00 [Debug] Disposing transaction.
2017-12-18 21:04:40.103 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.103 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:04:40.110 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 21:05:39.700 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:05:39.734 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:05:39.740 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:05:39.748 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:05:39.750 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:05:39.751 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:05:39.751 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:05:39.752 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:05:39.754 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:05:39.757 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:05:39.758 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:05:39.978 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:05:40.097 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:05:40.120 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:05:40.140 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.772 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.772 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.772 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.774 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.774 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.779 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:05:40.819 +03:00 [Information] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:05:40.820 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.820 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.849 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:05:40.857 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:05:40.878 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:05:40.882 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.882 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.896 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:05:40.899 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:05:40.904 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:05:40.904 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.905 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:40.910 +03:00 [Debug] Hosting starting
2017-12-18 21:05:40.959 +03:00 [Debug] Hosting started
2017-12-18 21:05:40.959 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:05:40.959 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:05:40.959 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:05:41.069 +03:00 [Debug] Connection id ""0HLA687PJUPQN"" started.
2017-12-18 21:05:41.069 +03:00 [Debug] Connection id ""0HLA687PJUPQM"" started.
2017-12-18 21:05:41.092 +03:00 [Debug] Connection id ""0HLA687PJUPQM"" reset.
2017-12-18 21:05:41.092 +03:00 [Debug] Connection id ""0HLA687PJUPQM"" disconnecting.
2017-12-18 21:05:41.097 +03:00 [Debug] Connection id ""0HLA687PJUPQM"" sending FIN.
2017-12-18 21:05:41.103 +03:00 [Debug] Connection id ""0HLA687PJUPQM"" stopped.
2017-12-18 21:05:41.146 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:05:41.204 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:05:41.279 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:05:41.288 +03:00 [Debug] Connection id ""0HLA687PJUPQN"" completed keep alive response.
2017-12-18 21:05:41.289 +03:00 [Information] Request finished in 144.5716ms 404 
2017-12-18 21:05:41.337 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:05:41.339 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:05:41.339 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:05:41.339 +03:00 [Debug] Connection id ""0HLA687PJUPQN"" completed keep alive response.
2017-12-18 21:05:41.340 +03:00 [Information] Request finished in 2.1016ms 404 
2017-12-18 21:05:43.761 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:05:43.844 +03:00 [Information] Successfully validated the token.
2017-12-18 21:05:43.847 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:05:43.849 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:05:43.860 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"90a4bcaa-6308-42d0-b444-bcb241cc6ca1"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:05:43.860 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"ad8d93cd-d590-476d-97d6-68d83887feda"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:05:43.899 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:05:43.905 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:05:43.943 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:05:43.949 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:05:43.953 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:05:43.955 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:05:43.973 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:05:43.974 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:43.974 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:43.976 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:05:44.000 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:05:44.023 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:05:44.024 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.024 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.034 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.034 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.034 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:05:44.035 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:05:44.035 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:05:44.035 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.035 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.065 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.066 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.067 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:05:44.081 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:05:44.085 +03:00 [Error] Failed executing DbCommand ("4"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
System.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:e2171552-30b5-42de-9d76-63fa661d08d5
Error Number:2627,State:1,Class:14
2017-12-18 21:05:44.115 +03:00 [Debug] Disposing transaction.
2017-12-18 21:05:44.115 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.115 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:05:44.121 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK_Blocking'. Cannot insert duplicate key in object 'dbo.Blocking'. The duplicate key value is (2011, 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 21:10:04.840 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:10:04.874 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:10:04.881 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:10:04.889 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:10:04.890 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:10:04.891 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:10:04.892 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:10:04.892 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:10:04.894 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:10:04.897 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:10:04.897 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:10:05.132 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:10:05.246 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:10:05.268 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:10:05.292 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.914 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.914 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.914 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.916 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.917 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.922 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:10:05.963 +03:00 [Information] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:10:05.963 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.963 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:05.992 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:10:05.999 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:10:06.020 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:10:06.025 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:06.025 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:06.035 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:10:06.039 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:10:06.043 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:10:06.044 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:06.044 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:06.048 +03:00 [Debug] Hosting starting
2017-12-18 21:10:06.097 +03:00 [Debug] Hosting started
2017-12-18 21:10:06.097 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:10:06.097 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:10:06.097 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:10:06.174 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" started.
2017-12-18 21:10:06.174 +03:00 [Debug] Connection id ""0HLA68A8K6BA0"" started.
2017-12-18 21:10:06.195 +03:00 [Debug] Connection id ""0HLA68A8K6BA0"" reset.
2017-12-18 21:10:06.196 +03:00 [Debug] Connection id ""0HLA68A8K6BA0"" disconnecting.
2017-12-18 21:10:06.196 +03:00 [Debug] Connection id ""0HLA68A8K6BA0"" sending FIN.
2017-12-18 21:10:06.204 +03:00 [Debug] Connection id ""0HLA68A8K6BA0"" stopped.
2017-12-18 21:10:06.238 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:10:06.299 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:10:06.376 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:10:06.383 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" completed keep alive response.
2017-12-18 21:10:06.384 +03:00 [Information] Request finished in 148.4947ms 404 
2017-12-18 21:10:06.415 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:10:06.424 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:10:06.425 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:10:06.425 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" completed keep alive response.
2017-12-18 21:10:06.425 +03:00 [Information] Request finished in 10.254ms 404 
2017-12-18 21:10:09.863 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:10:09.953 +03:00 [Information] Successfully validated the token.
2017-12-18 21:10:09.956 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:10:09.957 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:10:09.968 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"a71445f2-20eb-4296-a229-02271d4e1372"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:10:09.968 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"a59a407f-8a20-423b-936c-2707218d0572"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:10:10.003 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:10:10.011 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:10:10.045 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:10:10.047 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:10:10.053 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:10:10.055 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:10:10.076 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:10:10.077 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.077 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.079 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:10:10.106 +03:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:10:10.130 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:10:10.130 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.130 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.139 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.139 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.140 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:10:10.140 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:10:10.140 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:10:10.140 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.141 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.150 +03:00 [Debug] Compiling query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 || [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:10:10.150 +03:00 [Debug] Optimized query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 || [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:10:10.152 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [Blocking] AS [b]
                            WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:10:10.153 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.153 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.153 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:10:10.155 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:10:10.156 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:10:10.156 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.156 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:10:10.158 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 21:10:10.162 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:10:10.163 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:10:10.163 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:10:10.185 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 177.7882ms
2017-12-18 21:10:10.186 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" completed keep alive response.
2017-12-18 21:10:10.186 +03:00 [Information] Request finished in 322.5525ms 400 application/json; charset=utf-8
2017-12-18 21:11:56.161 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" received FIN.
2017-12-18 21:11:56.161 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" disconnecting.
2017-12-18 21:11:56.162 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" sending FIN.
2017-12-18 21:11:56.162 +03:00 [Debug] Connection id ""0HLA68A8K6B9V"" stopped.
2017-12-18 21:13:40.640 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:13:40.675 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:13:40.681 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:13:40.689 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:13:40.690 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:13:40.691 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:13:40.692 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:13:40.693 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:13:40.696 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:13:40.699 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:13:40.699 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:13:40.938 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:13:41.059 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:13:41.080 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:13:41.099 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.152 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.152 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.152 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.154 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.155 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.160 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:13:41.182 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:13:41.183 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.183 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.217 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:13:41.226 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:13:41.248 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:13:41.252 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.252 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.264 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:13:41.265 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:13:41.269 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:13:41.269 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.270 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:13:41.275 +03:00 [Debug] Hosting starting
2017-12-18 21:13:41.324 +03:00 [Debug] Hosting started
2017-12-18 21:13:41.324 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:13:41.324 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:13:41.324 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:13:41.566 +03:00 [Debug] Connection id ""0HLA68C8QB5CD"" started.
2017-12-18 21:13:41.566 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" started.
2017-12-18 21:13:41.586 +03:00 [Debug] Connection id ""0HLA68C8QB5CD"" reset.
2017-12-18 21:13:41.587 +03:00 [Debug] Connection id ""0HLA68C8QB5CD"" disconnecting.
2017-12-18 21:13:41.588 +03:00 [Debug] Connection id ""0HLA68C8QB5CD"" sending FIN.
2017-12-18 21:13:41.599 +03:00 [Debug] Connection id ""0HLA68C8QB5CD"" stopped.
2017-12-18 21:13:41.625 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:13:41.680 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:13:41.745 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:13:41.751 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:13:41.751 +03:00 [Information] Request finished in 128.0694ms 404 
2017-12-18 21:13:41.776 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:13:41.777 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:13:41.777 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:13:41.777 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:13:41.777 +03:00 [Information] Request finished in 1.1413ms 404 
2017-12-18 21:13:49.601 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking  0
2017-12-18 21:13:49.662 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIwNTAwLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.JsOTOzAwoWqxduP3ds62k0MUdntnfqCCYCT_O_kgQa8".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:13:49'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:13:49.687 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:13:49'."
2017-12-18 21:13:49.688 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:13:49.698 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"860fa193-5502-425a-93aa-bd35c80e14bd"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:13:49.698 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:13:49.731 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:13:49.737 +03:00 [Information] Authorization failed for user: null.
2017-12-18 21:13:49.737 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 21:13:49.740 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 21:13:49.744 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 21:13:49.746 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 13.142ms
2017-12-18 21:13:49.746 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:13:49.746 +03:00 [Information] Request finished in 145.3516ms 401 
2017-12-18 21:13:52.916 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 21:13:52.917 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIwNTAwLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.JsOTOzAwoWqxduP3ds62k0MUdntnfqCCYCT_O_kgQa8".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:13:52'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:13:52.918 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:13:52'."
2017-12-18 21:13:52.918 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:13:52.918 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4e404709-b0b0-4c35-b237-98702922f0ee"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:13:52.918 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:13:52.919 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:13:52.920 +03:00 [Information] Authorization failed for user: null.
2017-12-18 21:13:52.920 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 21:13:52.920 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 21:13:52.920 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 21:13:52.920 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 0.5518ms
2017-12-18 21:13:52.921 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:13:52.921 +03:00 [Information] Request finished in 5.2468ms 401 
2017-12-18 21:14:10.511 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 21:14:10.512 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIwNTAwLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.JsOTOzAwoWqxduP3ds62k0MUdntnfqCCYCT_O_kgQa8".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:14:10'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:14:10.513 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:08:20', Current time: '12/18/2017 18:14:10'."
2017-12-18 21:14:10.513 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 21:14:10.515 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 21:14:10.546 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 21:14:10.549 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:14:10.553 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:14:10.555 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:14:10.572 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:14:10.573 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:10.573 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:10.576 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:14:10.598 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:14:10.618 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:14:10.618 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:10.618 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:10.647 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:14:10.651 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:14:10.651 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 21:14:10.651 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:14:10.660 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 145.371ms
2017-12-18 21:14:10.661 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:14:10.661 +03:00 [Information] Request finished in 149.5229ms 200 text/plain; charset=utf-8
2017-12-18 21:14:39.549 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 21:14:39.557 +03:00 [Information] Successfully validated the token.
2017-12-18 21:14:39.558 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:14:39.558 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:14:39.558 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4e404709-b0b0-4c35-b237-98702922f0ee"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:14:39.558 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:14:39.559 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:14:39.559 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:14:39.560 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:14:39.561 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:14:39.562 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.562 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.563 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:14:39.563 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:14:39.563 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:14:39.563 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.563 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.568 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:14:39.568 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:14:39.568 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:14:39.568 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:14:39.579 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 21:14:39.580 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 21:14:39.591 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:14:39.591 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.591 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.592 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:14:39.594 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:14:39.597 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:14:39.597 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.597 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:14:39.598 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 39.4783ms
2017-12-18 21:14:39.598 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:14:39.598 +03:00 [Information] Request finished in 49.5208ms 200 application/json; charset=utf-8
2017-12-18 21:15:13.473 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?  
2017-12-18 21:15:13.473 +03:00 [Information] Successfully validated the token.
2017-12-18 21:15:13.473 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:15:13.473 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:15:13.473 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4e404709-b0b0-4c35-b237-98702922f0ee"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:13.473 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:13.473 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:15:13.473 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:15:13.474 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:15:13.474 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:15:13.475 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.475 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.475 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:13.475 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:13.475 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:13.475 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.475 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.476 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:15:13.476 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:15:13.476 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:15:13.476 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:15:13.476 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.476 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.476 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:13.477 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:13.477 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:13.477 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.477 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:13.478 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 4.1377ms
2017-12-18 21:15:13.478 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:15:13.478 +03:00 [Information] Request finished in 5.3262ms 200 application/json; charset=utf-8
2017-12-18 21:15:16.187 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?asd  
2017-12-18 21:15:16.187 +03:00 [Information] Successfully validated the token.
2017-12-18 21:15:16.187 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:15:16.187 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:15:16.187 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4e404709-b0b0-4c35-b237-98702922f0ee"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:16.187 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:16.187 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:15:16.187 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:15:16.187 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:15:16.188 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:15:16.188 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.188 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.188 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:16.189 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:16.189 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:16.189 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.189 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.189 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:15:16.189 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:15:16.189 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:15:16.189 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:15:16.189 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.189 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.189 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:16.190 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:16.190 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:16.190 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.190 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:16.190 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 2.6244ms
2017-12-18 21:15:16.190 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:15:16.190 +03:00 [Information] Request finished in 3.2831ms 200 application/json; charset=utf-8
2017-12-18 21:15:20.368 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?asd=q13  
2017-12-18 21:15:20.368 +03:00 [Information] Successfully validated the token.
2017-12-18 21:15:20.368 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:15:20.368 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:15:20.368 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4e404709-b0b0-4c35-b237-98702922f0ee"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:20.368 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"7e9470e0-4ac5-4249-8c26-737f649e3d89"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:15:20.368 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:15:20.368 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:15:20.368 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:15:20.369 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:15:20.369 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.369 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.369 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:20.369 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:15:20.369 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:20.369 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.369 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.370 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:15:20.370 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:15:20.370 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:15:20.370 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:15:20.370 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.370 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.370 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:20.370 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:15:20.370 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:15:20.370 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.370 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:15:20.370 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 2.3875ms
2017-12-18 21:15:20.371 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" completed keep alive response.
2017-12-18 21:15:20.371 +03:00 [Information] Request finished in 3.1304ms 200 application/json; charset=utf-8
2017-12-18 21:17:21.554 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" received FIN.
2017-12-18 21:17:21.554 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" disconnecting.
2017-12-18 21:17:21.555 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" sending FIN.
2017-12-18 21:17:21.555 +03:00 [Debug] Connection id ""0HLA68C8QB5CE"" stopped.
2017-12-18 21:24:13.084 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:24:13.111 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:24:13.117 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:24:13.124 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:24:13.126 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:24:13.126 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:24:13.127 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:24:13.127 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:24:13.129 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:24:13.131 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:24:13.132 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:24:13.222 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:24:13.312 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:24:13.330 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:24:13.336 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.365 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.366 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.366 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.367 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.368 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.371 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:24:13.379 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:24:13.379 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.379 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.403 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:24:13.409 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:24:13.425 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:24:13.429 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.429 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.439 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:24:13.439 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:24:13.443 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:13.443 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.443 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.448 +03:00 [Debug] Hosting starting
2017-12-18 21:24:13.476 +03:00 [Debug] Hosting started
2017-12-18 21:24:13.476 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:24:13.476 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:24:13.476 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:24:13.498 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" started.
2017-12-18 21:24:13.534 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking  
2017-12-18 21:24:13.610 +03:00 [Information] Successfully validated the token.
2017-12-18 21:24:13.611 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:24:13.653 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:24:13.661 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"5695c36c-ce71-46a7-8130-f344cec707be"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:13.661 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb4acda-43c3-4d61-a67b-87c7ca87a4de"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:13.679 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:24:13.684 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:24:13.700 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:24:13.702 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:24:13.705 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:24:13.706 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:24:13.719 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:24:13.719 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.719 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.720 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 21:24:13.721 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] IS NULL"
2017-12-18 21:24:13.721 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:13.721 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.721 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:13.722 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 21:24:13.726 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:24:13.726 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:24:13.726 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:24:13.742 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 59.9692ms
2017-12-18 21:24:13.743 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" completed keep alive response.
2017-12-18 21:24:13.743 +03:00 [Information] Request finished in 210.476ms 404 application/json; charset=utf-8
2017-12-18 21:24:21.750 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=%22rick%22  
2017-12-18 21:24:21.750 +03:00 [Information] Successfully validated the token.
2017-12-18 21:24:21.750 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:24:21.751 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:24:21.751 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"5695c36c-ce71-46a7-8130-f344cec707be"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:21.751 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb4acda-43c3-4d61-a67b-87c7ca87a4de"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:21.751 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:24:21.751 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:24:21.764 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["\"rick\""]) - ModelState is Valid
2017-12-18 21:24:21.764 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:24:21.765 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:21.765 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:21.766 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:21.783 +03:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:21.783 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:21.783 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:21.783 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:21.784 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 21:24:21.784 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:24:21.784 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:24:21.784 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:24:21.784 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 33.2368ms
2017-12-18 21:24:21.784 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" completed keep alive response.
2017-12-18 21:24:21.784 +03:00 [Information] Request finished in 34.5832ms 404 application/json; charset=utf-8
2017-12-18 21:24:27.415 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:24:27.416 +03:00 [Information] Successfully validated the token.
2017-12-18 21:24:27.416 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:24:27.416 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:24:27.416 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"5695c36c-ce71-46a7-8130-f344cec707be"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:27.416 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb4acda-43c3-4d61-a67b-87c7ca87a4de"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:24:27.416 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:24:27.416 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:24:27.416 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:24:27.417 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:24:27.417 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.417 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.417 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:27.417 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:27.437 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:27.437 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.437 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.442 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.442 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.442 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:27.442 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:24:27.442 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:27.442 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.443 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.462 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.462 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.464 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:24:27.479 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:24:27.483 +03:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:24:27.484 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:24:27.485 +03:00 [Debug] Committing transaction.
2017-12-18 21:24:27.485 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.485 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:24:27.485 +03:00 [Debug] Disposing transaction.
2017-12-18 21:24:27.485 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 21:24:27.487 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 21:24:27.487 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 71.246ms
2017-12-18 21:24:27.488 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" completed keep alive response.
2017-12-18 21:24:27.488 +03:00 [Information] Request finished in 72.3279ms 200 
2017-12-18 21:25:17.738 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:25:17.738 +03:00 [Information] Successfully validated the token.
2017-12-18 21:25:17.738 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:25:17.738 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:25:17.738 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"5695c36c-ce71-46a7-8130-f344cec707be"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:25:17.738 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb4acda-43c3-4d61-a67b-87c7ca87a4de"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:25:17.738 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:25:17.738 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:25:17.738 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:25:17.739 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:25:17.739 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.739 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.739 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:17.740 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:17.740 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:17.740 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.740 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.740 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.740 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.740 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:17.740 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:17.740 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:17.740 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.741 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.741 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.741 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.741 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:25:17.742 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:25:17.742 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:25:17.742 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:17.743 +03:00 [Debug] Disposing transaction.
2017-12-18 21:25:17.743 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.743 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:17.762 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 21:25:17.765 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 26.8238ms
2017-12-18 21:25:17.765 +03:00 [Error] An unhandled exception has occurred while executing the request
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Delete(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 53
   at Armut.Sample.Messaging.Controllers.BlockingController.Delete(String username) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 80
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 21:25:17.822 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" completed keep alive response.
2017-12-18 21:25:17.822 +03:00 [Information] Request finished in 84.8762ms 500 text/html; charset=utf-8
2017-12-18 21:25:48.421 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:25:48.421 +03:00 [Information] Successfully validated the token.
2017-12-18 21:25:48.421 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:25:48.421 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:25:48.421 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"5695c36c-ce71-46a7-8130-f344cec707be"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:25:48.421 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb4acda-43c3-4d61-a67b-87c7ca87a4de"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:25:48.421 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:25:48.421 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:25:48.421 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:25:48.422 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:25:48.422 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.422 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.422 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:48.422 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:48.423 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:48.423 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:48.423 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:25:48.423 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:48.423 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.423 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.424 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:25:48.424 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:25:48.424 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:25:48.424 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:25:48.425 +03:00 [Debug] Disposing transaction.
2017-12-18 21:25:48.425 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.425 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:25:48.427 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 21:25:48.430 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 8.782ms
2017-12-18 21:25:48.430 +03:00 [Error] An unhandled exception has occurred while executing the request
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Armut.Sample.Messaging.Repository.Repository`1.Delete(T entity) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Repository\Repository.cs:line 53
   at Armut.Sample.Messaging.Controllers.BlockingController.Delete(String username) in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 80
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 21:25:48.466 +03:00 [Debug] Connection id ""0HLA68I54TKT9"" completed keep alive response.
2017-12-18 21:25:48.466 +03:00 [Information] Request finished in 45.2806ms 500 text/html; charset=utf-8
2017-12-18 21:26:00.057 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:26:00.094 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:26:00.103 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:26:00.113 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:26:00.115 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:26:00.115 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:26:00.116 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:26:00.117 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:26:00.119 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:26:00.122 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:26:00.123 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:26:00.329 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:26:00.459 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:26:00.487 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:26:00.509 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.575 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.575 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.576 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.578 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.578 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.583 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:26:00.596 +03:00 [Information] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:26:00.597 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.597 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.626 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:26:00.635 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:26:00.658 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:26:00.663 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.663 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.674 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:26:00.675 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:26:00.680 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:26:00.680 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.680 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:00.685 +03:00 [Debug] Hosting starting
2017-12-18 21:26:00.736 +03:00 [Debug] Hosting started
2017-12-18 21:26:00.736 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:26:00.736 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:26:00.736 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:26:00.891 +03:00 [Debug] Connection id ""0HLA68J5537EO"" started.
2017-12-18 21:26:00.891 +03:00 [Debug] Connection id ""0HLA68J5537EP"" started.
2017-12-18 21:26:00.913 +03:00 [Debug] Connection id ""0HLA68J5537EP"" reset.
2017-12-18 21:26:00.913 +03:00 [Debug] Connection id ""0HLA68J5537EP"" disconnecting.
2017-12-18 21:26:00.915 +03:00 [Debug] Connection id ""0HLA68J5537EP"" sending FIN.
2017-12-18 21:26:00.928 +03:00 [Debug] Connection id ""0HLA68J5537EP"" stopped.
2017-12-18 21:26:00.957 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:26:01.030 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:26:01.102 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:26:01.109 +03:00 [Debug] Connection id ""0HLA68J5537EO"" completed keep alive response.
2017-12-18 21:26:01.110 +03:00 [Information] Request finished in 154.8205ms 404 
2017-12-18 21:26:01.139 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:26:01.140 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:26:01.140 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:26:01.140 +03:00 [Debug] Connection id ""0HLA68J5537EO"" completed keep alive response.
2017-12-18 21:26:01.140 +03:00 [Information] Request finished in 1.1311ms 404 
2017-12-18 21:26:03.974 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:26:04.048 +03:00 [Information] Successfully validated the token.
2017-12-18 21:26:04.050 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:26:04.052 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:26:04.061 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"53ef6606-a4a4-49b8-8ba0-d1118e717403"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:26:04.061 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"793b2f96-a7b6-4392-abe8-6ce23da51891"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:26:04.095 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:26:04.106 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:26:04.144 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:26:11.120 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:26:11.125 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:26:11.127 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:26:11.143 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:26:11.144 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:11.144 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:11.146 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:26:11.169 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:26:11.189 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:26:11.189 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:11.189 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:14.391 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:14.391 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:14.392 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:26:14.392 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:26:14.392 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:26:14.392 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:14.392 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:16.572 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:16.572 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:16.573 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:26:16.588 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:26:16.588 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:26:16.590 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:26:16.590 +03:00 [Debug] Disposing transaction.
2017-12-18 21:26:16.591 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:16.591 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:26:16.621 +03:00 [Error] An exception occurred in the database while saving changes for context type '"Armut.Sample.Messaging.Data.MessagingContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(Tuple`2 parameters)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2017-12-18 21:30:41.769 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:30:41.803 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:30:41.810 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:30:41.817 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:30:41.819 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:30:41.820 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:30:41.820 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:30:41.821 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:30:41.823 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:30:41.826 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:30:41.826 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:30:42.064 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:30:42.186 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:30:42.210 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:30:42.228 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.281 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.281 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.282 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.284 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.284 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.288 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:30:42.308 +03:00 [Information] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:30:42.308 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.308 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.337 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:30:42.346 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:30:42.367 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:30:42.371 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.371 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.384 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:30:42.385 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:30:42.390 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:30:42.390 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.390 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:30:42.394 +03:00 [Debug] Hosting starting
2017-12-18 21:30:42.438 +03:00 [Debug] Hosting started
2017-12-18 21:30:42.438 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:30:42.438 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:30:42.438 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:30:42.690 +03:00 [Debug] Connection id ""0HLA68LP4H62V"" started.
2017-12-18 21:30:42.690 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" started.
2017-12-18 21:30:42.711 +03:00 [Debug] Connection id ""0HLA68LP4H62V"" reset.
2017-12-18 21:30:42.711 +03:00 [Debug] Connection id ""0HLA68LP4H62V"" disconnecting.
2017-12-18 21:30:42.715 +03:00 [Debug] Connection id ""0HLA68LP4H62V"" sending FIN.
2017-12-18 21:30:42.722 +03:00 [Debug] Connection id ""0HLA68LP4H62V"" stopped.
2017-12-18 21:30:42.746 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:30:42.808 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:30:42.872 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:30:42.878 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" completed keep alive response.
2017-12-18 21:30:42.879 +03:00 [Information] Request finished in 134.07ms 404 
2017-12-18 21:30:42.906 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:30:42.906 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:30:42.906 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:30:42.906 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" completed keep alive response.
2017-12-18 21:30:42.906 +03:00 [Information] Request finished in 0.7727ms 404 
2017-12-18 21:30:47.922 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:30:47.994 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIxNDUwLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.bANUlxSqV1dXOewwgDK_-kKVMeLQep1WU0XpuNPwM-s".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:24:10', Current time: '12/18/2017 18:30:47'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:30:48.022 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:24:10', Current time: '12/18/2017 18:30:47'."
2017-12-18 21:30:48.024 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:30:48.034 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:30:48.034 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:30:48.073 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:30:48.080 +03:00 [Information] Authorization failed for user: null.
2017-12-18 21:30:48.080 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 21:30:48.083 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 21:30:48.088 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 21:30:48.091 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 15.4094ms
2017-12-18 21:30:48.091 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" completed keep alive response.
2017-12-18 21:30:48.091 +03:00 [Information] Request finished in 169.1317ms 401 
2017-12-18 21:32:26.754 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" received FIN.
2017-12-18 21:32:26.755 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" disconnecting.
2017-12-18 21:32:26.757 +03:00 [Debug] Connection id ""0HLA68LP4H630"" started.
2017-12-18 21:32:26.757 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" sending FIN.
2017-12-18 21:32:26.761 +03:00 [Debug] Connection id ""0HLA68LP4H62U"" stopped.
2017-12-18 21:32:26.761 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 21:32:26.762 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:32:26.762 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 21:32:26.787 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 21:32:26.819 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 21:32:26.823 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:32:26.829 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:32:26.831 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:32:26.849 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:32:26.850 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:26.850 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:26.851 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:32:26.874 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:32:26.898 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:32:26.899 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:26.899 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:26.930 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:32:26.934 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:32:26.934 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 21:32:26.934 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:32:26.945 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 157.7647ms
2017-12-18 21:32:26.946 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:32:26.947 +03:00 [Information] Request finished in 185.2656ms 200 text/plain; charset=utf-8
2017-12-18 21:32:41.580 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 21:32:41.581 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:32:41.581 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 21:32:41.581 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 21:32:41.581 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 21:32:41.582 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:32:41.582 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:41.582 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:41.583 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:32:41.584 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:32:41.584 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:32:41.584 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:41.584 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:32:41.591 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:32:41.592 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:32:41.592 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 21:32:41.592 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:32:41.592 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 11.4111ms
2017-12-18 21:32:41.592 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:32:41.593 +03:00 [Information] Request finished in 12.0571ms 200 text/plain; charset=utf-8
2017-12-18 21:33:02.525 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:33:02.525 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:33:02.525 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:33:02.525 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:02.525 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:02.527 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:33:02.527 +03:00 [Information] Authorization failed for user: null.
2017-12-18 21:33:02.527 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 21:33:02.527 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 21:33:02.527 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 21:33:02.527 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 0.5267ms
2017-12-18 21:33:02.527 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:33:02.527 +03:00 [Information] Request finished in 2.449ms 401 
2017-12-18 21:33:08.444 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:33:08.453 +03:00 [Information] Successfully validated the token.
2017-12-18 21:33:08.454 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:33:08.454 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:33:08.454 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:08.454 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:08.454 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:33:08.455 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:33:08.456 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:33:08.457 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:33:08.458 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.458 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.458 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:08.462 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:08.463 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:08.463 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.463 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.469 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:33:08.469 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:33:08.469 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:33:08.469 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:33:08.484 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 21:33:08.485 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 21:33:08.499 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:33:08.499 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.499 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.500 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:08.502 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:08.502 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:08.502 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.502 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:08.503 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 48.6212ms
2017-12-18 21:33:08.503 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:33:08.503 +03:00 [Information] Request finished in 59.6863ms 200 application/json; charset=utf-8
2017-12-18 21:33:12.937 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:33:12.937 +03:00 [Information] Successfully validated the token.
2017-12-18 21:33:12.937 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:33:12.937 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:33:12.937 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:12.937 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:12.937 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:33:12.937 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:33:12.938 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:33:12.938 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:33:12.938 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.938 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.938 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:12.941 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:12.941 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:12.941 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.941 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.942 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:33:12.942 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:33:12.942 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:33:12.942 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:33:12.942 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.942 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.942 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:12.944 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:12.945 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:12.945 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.945 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:12.945 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 7.5021ms
2017-12-18 21:33:12.947 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:33:12.948 +03:00 [Information] Request finished in 11.5333ms 200 application/json; charset=utf-8
2017-12-18 21:33:26.129 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:33:26.129 +03:00 [Information] Successfully validated the token.
2017-12-18 21:33:26.129 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:33:26.129 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:33:26.129 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:26.129 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:26.132 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:33:26.132 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:33:26.132 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:33:26.133 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:33:26.133 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.133 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.133 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:26.135 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:26.135 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:26.135 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.136 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.136 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.136 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.136 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:26.141 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:26.141 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:26.141 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.141 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.150 +03:00 [Debug] Compiling query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 || [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:33:26.150 +03:00 [Debug] Optimized query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 || [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:33:26.154 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [Blocking] AS [b]
                            WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:33:26.154 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.154 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.154 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:33:26.156 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:33:26.157 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:26.157 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.157 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:26.159 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 21:33:26.159 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:33:26.159 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:33:26.159 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:33:26.161 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 29.8332ms
2017-12-18 21:33:26.162 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:33:26.162 +03:00 [Information] Request finished in 33.1345ms 400 application/json; charset=utf-8
2017-12-18 21:33:34.859 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 21:33:34.859 +03:00 [Information] Successfully validated the token.
2017-12-18 21:33:34.859 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:33:34.859 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:33:34.859 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:34.859 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:33:34.859 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:33:34.859 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:33:34.859 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:33:34.860 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:33:34.860 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.860 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.860 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:34.861 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:33:34.861 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:34.861 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.861 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.862 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:33:34.862 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:33:34.862 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:33:34.862 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:33:34.862 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.862 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.862 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:34.864 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:33:34.864 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:33:34.864 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.864 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:33:34.864 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 5.091ms
2017-12-18 21:33:34.864 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:33:34.864 +03:00 [Information] Request finished in 5.8409ms 200 application/json; charset=utf-8
2017-12-18 21:34:05.837 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 21:34:05.837 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:05.837 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:05.837 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:05.837 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:05.837 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:05.837 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:34:05.837 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:34:05.837 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 21:34:05.838 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:34:05.838 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.838 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.838 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:05.840 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:05.840 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:34:05.840 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.840 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.840 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:34:05.840 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:34:05.840 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:34:05.840 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:34:05.841 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.841 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.841 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:34:05.843 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 21:34:05.843 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:34:05.843 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.843 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:05.843 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 5.5481ms
2017-12-18 21:34:05.843 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:34:05.843 +03:00 [Information] Request finished in 6.3692ms 200 application/json; charset=utf-8
2017-12-18 21:34:13.481 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/blocking  0
2017-12-18 21:34:13.481 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:13.482 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:13.482 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:13.482 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:13.482 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:13.482 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:13.483 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 21:34:13.483 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:34:13.483 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:34:13.483 +03:00 [Information] Request finished in 2.4823ms 404 
2017-12-18 21:34:23.129 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/blocking  0
2017-12-18 21:34:23.129 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:23.129 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:23.129 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:23.129 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:23.129 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:23.129 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:23.129 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 21:34:23.129 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:34:23.129 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:34:23.130 +03:00 [Information] Request finished in 0.7558ms 404 
2017-12-18 21:34:24.657 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/blocking  0
2017-12-18 21:34:24.658 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:24.658 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:24.658 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:24.658 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:24.658 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2064e0f-c207-4438-9d61-f61a498aa3c8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:24.658 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:24.658 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 21:34:24.658 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:34:24.659 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:34:24.660 +03:00 [Information] Request finished in 2.3081ms 404 
2017-12-18 21:34:27.803 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking  0
2017-12-18 21:34:27.803 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:27.803 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:27.803 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:27.803 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:27.803 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:27.804 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:34:27.804 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:34:27.804 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 21:34:27.805 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 21:34:27.807 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 21:34:27.807 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 3.4878ms
2017-12-18 21:34:27.807 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:34:27.807 +03:00 [Information] Request finished in 4.1314ms 400 
2017-12-18 21:34:36.462 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:34:36.462 +03:00 [Information] Successfully validated the token.
2017-12-18 21:34:36.462 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:34:36.462 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:34:36.462 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:36.462 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:34:36.462 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:34:36.462 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:34:36.463 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:34:36.463 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:34:36.463 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.463 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.463 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:36.465 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:36.465 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:34:36.465 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.465 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.465 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.465 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.465 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:36.467 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:34:36.467 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:34:36.467 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:34:36.467 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:20.839 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:20.839 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:20.839 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:35:20.841 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) OR ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:35:20.841 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:35:20.841 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:20.841 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:20.841 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 21:35:20.842 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:35:20.842 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:35:20.842 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:35:20.842 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 44379.3397ms
2017-12-18 21:35:20.842 +03:00 [Debug] Connection id ""0HLA68LP4H630"" completed keep alive response.
2017-12-18 21:35:20.842 +03:00 [Information] Request finished in 44380.1683ms 400 application/json; charset=utf-8
2017-12-18 21:35:29.731 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:35:29.732 +03:00 [Information] Successfully validated the token.
2017-12-18 21:35:29.732 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:35:29.732 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:35:29.732 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"931dad43-5560-4727-911b-4a198125bb58"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:35:29.732 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"5ceea8ce-970f-4026-bbdc-9ad230ef47ad"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:35:29.732 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:35:29.732 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:35:29.732 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:35:29.733 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:35:29.733 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:29.733 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:29.733 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:29.735 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:29.735 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:35:29.735 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:29.735 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:32.569 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:32.569 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:32.569 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:32.571 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:32.571 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:35:32.571 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:32.571 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:37.758 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:37.758 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:37.758 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:37.759 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:37.763 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:35:37.763 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:37.763 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:38.395 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:38.395 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:38.395 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:38.397 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:35:38.397 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:35:38.397 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:35:38.397 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:30.732 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:36:30.768 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:36:30.775 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:36:30.782 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:36:30.784 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:36:30.785 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:36:30.786 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:36:30.786 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:36:30.788 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:36:30.791 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:36:30.792 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:36:31.029 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:36:31.166 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:36:31.196 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:36:31.218 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.274 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.274 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.274 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.276 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.277 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.281 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:36:31.302 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:36:31.302 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.302 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.330 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:36:31.337 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:36:31.358 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:36:31.361 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.362 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.373 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:36:31.374 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:36:31.378 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:36:31.379 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.379 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:31.384 +03:00 [Debug] Hosting starting
2017-12-18 21:36:31.434 +03:00 [Debug] Hosting started
2017-12-18 21:36:31.434 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:36:31.434 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:36:31.434 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:36:31.681 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" started.
2017-12-18 21:36:31.681 +03:00 [Debug] Connection id ""0HLA68P14OOG7"" started.
2017-12-18 21:36:31.700 +03:00 [Debug] Connection id ""0HLA68P14OOG7"" reset.
2017-12-18 21:36:31.700 +03:00 [Debug] Connection id ""0HLA68P14OOG7"" disconnecting.
2017-12-18 21:36:31.701 +03:00 [Debug] Connection id ""0HLA68P14OOG7"" sending FIN.
2017-12-18 21:36:31.717 +03:00 [Debug] Connection id ""0HLA68P14OOG7"" stopped.
2017-12-18 21:36:31.798 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:36:31.881 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:36:31.949 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:36:31.956 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:36:31.957 +03:00 [Information] Request finished in 161.6422ms 404 
2017-12-18 21:36:31.986 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:36:31.987 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:36:31.987 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:36:31.987 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:36:31.987 +03:00 [Information] Request finished in 1.1241ms 404 
2017-12-18 21:36:43.760 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:36:43.836 +03:00 [Information] Successfully validated the token.
2017-12-18 21:36:43.839 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:36:43.841 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:36:43.851 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"87b05a07-3ba5-4ed3-8453-da1e582f1346"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:36:43.851 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"057742c7-2ca6-4a17-bd16-6842aff48e3c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:36:43.890 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:36:43.897 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:36:43.930 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:36:43.933 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:36:43.940 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:36:43.943 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:36:43.964 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:36:43.964 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:43.965 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:43.967 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:36:43.991 +03:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:36:44.019 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:36:44.020 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:44.020 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:59.424 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:59.424 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:59.425 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:36:59.426 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:36:59.426 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:36:59.427 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:36:59.427 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.400 +03:00 [Debug] Compiling query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 && [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:37:00.401 +03:00 [Debug] Optimized query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 && [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 21:37:00.403 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [Blocking] AS [b]
                            WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:37:00.403 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.403 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.404 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:00.405 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:00.406 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:00.406 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.406 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.428 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.428 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.430 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:37:00.444 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:37:00.449 +03:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 21:37:00.449 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:00.451 +03:00 [Debug] Committing transaction.
2017-12-18 21:37:00.451 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.451 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:00.451 +03:00 [Debug] Disposing transaction.
2017-12-18 21:37:00.452 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 21:37:00.456 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 21:37:00.460 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 16566.8447ms
2017-12-18 21:37:00.462 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:37:00.462 +03:00 [Information] Request finished in 16701.8466ms 200 
2017-12-18 21:37:04.193 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 21:37:04.194 +03:00 [Information] Successfully validated the token.
2017-12-18 21:37:04.194 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:37:04.194 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:37:04.194 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"87b05a07-3ba5-4ed3-8453-da1e582f1346"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:04.194 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"057742c7-2ca6-4a17-bd16-6842aff48e3c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:04.194 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 21:37:04.195 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:37:04.195 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:37:04.196 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:37:04.196 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.196 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.196 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:04.197 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:04.197 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:04.197 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.197 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.918 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.918 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.918 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:04.919 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:04.920 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:04.920 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:04.920 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:05.878 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:05.878 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:05.878 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:05.880 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:05.880 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:05.880 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:05.880 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:05.882 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 21:37:05.885 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:37:05.886 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:37:05.886 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:37:05.901 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 1706.6446ms
2017-12-18 21:37:05.902 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:37:05.902 +03:00 [Information] Request finished in 1708.9081ms 400 application/json; charset=utf-8
2017-12-18 21:37:12.769 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:37:12.769 +03:00 [Information] Successfully validated the token.
2017-12-18 21:37:12.769 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:37:12.769 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:37:12.769 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"87b05a07-3ba5-4ed3-8453-da1e582f1346"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:12.769 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb9a161-fd67-4506-9e0f-cd865cee3d77"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:12.771 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:37:12.772 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:37:12.772 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:37:13.908 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:37:13.908 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.908 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.908 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.910 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.910 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:13.910 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.910 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.910 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.910 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.910 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.911 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.911 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:13.911 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.911 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.912 +03:00 [Debug] Compiling query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocker_0 && [b].UnWantedId == __unWanted_1
select [b]).Any()"'
2017-12-18 21:37:13.912 +03:00 [Debug] Optimized query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocker_0 && [b].UnWantedId == __unWanted_1
select [b]).Any()"'
2017-12-18 21:37:13.914 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [Blocking] AS [b]
                            WHERE ([b].[BlockerId] = @__blocker_0) AND ([b].[UnWantedId] = @__unWanted_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:37:13.914 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.914 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.914 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocker_0='?', @__unWanted_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocker_0) AND ([b].[UnWantedId] = @__unWanted_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:13.915 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocker_0='?', @__unWanted_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocker_0) AND ([b].[UnWantedId] = @__unWanted_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:13.915 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:13.915 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.915 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.916 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.916 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.916 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.916 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:13.916 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:13.916 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.916 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.918 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.918 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.918 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 21:37:13.922 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:37:13.923 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [Blocking]
WHERE [BlockerId] = @p0 AND [UnWantedId] = @p1;
SELECT @@ROWCOUNT;"
2017-12-18 21:37:13.923 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:13.925 +03:00 [Debug] Committing transaction.
2017-12-18 21:37:13.925 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.925 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:13.925 +03:00 [Debug] Disposing transaction.
2017-12-18 21:37:13.926 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 21:37:13.926 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 21:37:13.926 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 1154.2249ms
2017-12-18 21:37:13.926 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:37:13.926 +03:00 [Information] Request finished in 1157.1407ms 200 
2017-12-18 21:37:16.469 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/blocking?username=rick  
2017-12-18 21:37:16.470 +03:00 [Information] Successfully validated the token.
2017-12-18 21:37:16.470 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:37:16.470 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:37:16.470 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"87b05a07-3ba5-4ed3-8453-da1e582f1346"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:16.470 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"5bb9a161-fd67-4506-9e0f-cd865cee3d77"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:37:16.470 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"
2017-12-18 21:37:16.470 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:37:16.470 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 21:37:17.537 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:37:17.537 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.537 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.537 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:17.539 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:17.539 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:17.539 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.539 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.539 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.539 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.539 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:17.540 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:37:17.540 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:17.540 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.540 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.540 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.540 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.540 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocker_0='?', @__unWanted_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocker_0) AND ([b].[UnWantedId] = @__unWanted_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:17.541 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocker_0='?', @__unWanted_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocker_0) AND ([b].[UnWantedId] = @__unWanted_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:37:17.541 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:37:17.541 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.541 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:37:17.542 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 21:37:17.542 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:37:17.542 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 21:37:17.542 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:37:17.542 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)" in 1072.0148ms
2017-12-18 21:37:17.542 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" completed keep alive response.
2017-12-18 21:37:17.542 +03:00 [Information] Request finished in 1072.922ms 404 application/json; charset=utf-8
2017-12-18 21:39:52.677 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" received FIN.
2017-12-18 21:39:52.677 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" disconnecting.
2017-12-18 21:39:52.678 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" sending FIN.
2017-12-18 21:39:52.678 +03:00 [Debug] Connection id ""0HLA68P14OOG6"" stopped.
2017-12-18 21:58:47.737 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 21:58:47.772 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 21:58:47.779 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 21:58:47.790 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 21:58:47.792 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:58:47.793 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 21:58:47.794 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 21:58:47.794 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 21:58:47.796 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 21:58:47.800 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 21:58:47.800 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 21:58:48.116 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 21:58:48.257 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 21:58:48.279 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:58:48.300 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.354 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.354 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.354 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.356 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.357 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.361 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:58:48.383 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 21:58:48.384 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.384 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.415 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:58:48.423 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 21:58:48.452 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:58:48.458 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.458 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.473 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:58:48.475 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 21:58:48.480 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:58:48.481 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.481 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:58:48.486 +03:00 [Debug] Hosting starting
2017-12-18 21:58:48.535 +03:00 [Debug] Hosting started
2017-12-18 21:58:48.535 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 21:58:48.535 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 21:58:48.535 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 21:58:48.738 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" started.
2017-12-18 21:58:48.738 +03:00 [Debug] Connection id ""0HLA695FJU6RH"" started.
2017-12-18 21:58:48.760 +03:00 [Debug] Connection id ""0HLA695FJU6RH"" reset.
2017-12-18 21:58:48.760 +03:00 [Debug] Connection id ""0HLA695FJU6RH"" disconnecting.
2017-12-18 21:58:48.761 +03:00 [Debug] Connection id ""0HLA695FJU6RH"" sending FIN.
2017-12-18 21:58:48.769 +03:00 [Debug] Connection id ""0HLA695FJU6RH"" stopped.
2017-12-18 21:58:48.802 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 21:58:48.858 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:58:48.938 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:58:48.945 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" completed keep alive response.
2017-12-18 21:58:48.946 +03:00 [Information] Request finished in 145.8362ms 404 
2017-12-18 21:58:48.976 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 21:58:48.977 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 21:58:48.977 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:58:48.978 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" completed keep alive response.
2017-12-18 21:58:48.978 +03:00 [Information] Request finished in 1.596ms 404 
2017-12-18 21:59:12.415 +03:00 [Information] Request starting HTTP/1.1 DELETE http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 21:59:12.480 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIyNTYxLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.00hgHckfGhI82Nb6wSIucELn8uu7i1OPazx-zrIsaEU".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:42:41', Current time: '12/18/2017 18:59:12'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:59:12.546 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:42:41', Current time: '12/18/2017 18:59:12'."
2017-12-18 21:59:12.548 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 21:59:12.557 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"' with id '"52e958df-7afc-4ac4-b892-446d450bbe5f"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:59:12.560 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 21:59:12.561 +03:00 [Debug] Request did not match any routes.
2017-12-18 21:59:12.561 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" completed keep alive response.
2017-12-18 21:59:12.561 +03:00 [Information] Request finished in 145.6994ms 404 
2017-12-18 21:59:16.445 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 21:59:16.445 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjIyNTYxLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.00hgHckfGhI82Nb6wSIucELn8uu7i1OPazx-zrIsaEU".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:42:41', Current time: '12/18/2017 18:59:16'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 21:59:16.447 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 18:42:41', Current time: '12/18/2017 18:59:16'."
2017-12-18 21:59:16.447 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 21:59:16.487 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 21:59:16.519 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 21:59:16.524 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 21:59:16.529 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:59:16.531 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 21:59:16.550 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 21:59:16.550 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:59:16.551 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:59:16.553 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:59:16.578 +03:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 21:59:16.602 +03:00 [Debug] A data reader was disposed.
2017-12-18 21:59:16.602 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:59:16.602 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 21:59:16.635 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 21:59:16.639 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 21:59:16.639 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 21:59:16.639 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 21:59:16.652 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 162.2409ms
2017-12-18 21:59:16.653 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" completed keep alive response.
2017-12-18 21:59:16.653 +03:00 [Information] Request finished in 208.4293ms 200 text/plain; charset=utf-8
2017-12-18 21:59:37.205 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 21:59:37.214 +03:00 [Information] Successfully validated the token.
2017-12-18 21:59:37.215 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 21:59:37.216 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 21:59:37.216 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"34171578-756c-467a-93cb-c203dce4bf8e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:59:37.216 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"080ffee2-7279-4d8e-b2d0-88774f0a3cfe"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 21:59:37.218 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 21:59:37.224 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 21:59:37.225 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:00:26.945 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 49727.4627ms
2017-12-18 22:00:26.946 +03:00 [Error] An unhandled exception has occurred while executing the request
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 46
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-12-18 22:00:27.004 +03:00 [Debug] Connection id ""0HLA695FJU6RI"" completed keep alive response.
2017-12-18 22:00:27.004 +03:00 [Information] Request finished in 49798.2656ms 500 text/html; charset=utf-8
2017-12-18 22:00:30.437 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:00:30.437 +03:00 [Information] Successfully validated the token.
2017-12-18 22:00:30.438 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:00:30.438 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:00:30.439 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"34171578-756c-467a-93cb-c203dce4bf8e"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:00:30.440 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"080ffee2-7279-4d8e-b2d0-88774f0a3cfe"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:00:30.440 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:00:30.442 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:00:30.442 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:03:05.282 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:03:05.316 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:03:05.324 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:03:05.334 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:03:05.337 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:03:05.338 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:03:05.339 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:03:05.339 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:03:05.342 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:03:05.344 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:03:05.345 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:03:05.659 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:03:05.826 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:03:05.854 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:03:05.884 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.936 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.936 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.936 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.938 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.939 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.943 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:03:05.963 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:03:05.964 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.964 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:05.999 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:03:06.010 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:03:06.036 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:03:06.042 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:06.042 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:06.060 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:03:06.062 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:03:06.067 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:03:06.067 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:06.067 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:03:06.072 +03:00 [Debug] Hosting starting
2017-12-18 22:03:06.125 +03:00 [Debug] Hosting started
2017-12-18 22:03:06.125 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:03:06.125 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:03:06.125 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:03:06.361 +03:00 [Debug] Connection id ""0HLA697SCQ6HD"" started.
2017-12-18 22:03:06.361 +03:00 [Debug] Connection id ""0HLA697SCQ6HE"" started.
2017-12-18 22:03:06.384 +03:00 [Debug] Connection id ""0HLA697SCQ6HD"" reset.
2017-12-18 22:03:06.384 +03:00 [Debug] Connection id ""0HLA697SCQ6HD"" disconnecting.
2017-12-18 22:03:06.385 +03:00 [Debug] Connection id ""0HLA697SCQ6HD"" sending FIN.
2017-12-18 22:03:06.395 +03:00 [Debug] Connection id ""0HLA697SCQ6HD"" stopped.
2017-12-18 22:03:06.440 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:03:06.504 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:03:06.574 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:03:06.581 +03:00 [Debug] Connection id ""0HLA697SCQ6HE"" completed keep alive response.
2017-12-18 22:03:06.582 +03:00 [Information] Request finished in 144.7038ms 404 
2017-12-18 22:03:06.621 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:03:06.621 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:03:06.624 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:03:06.625 +03:00 [Debug] Connection id ""0HLA697SCQ6HE"" completed keep alive response.
2017-12-18 22:03:06.625 +03:00 [Information] Request finished in 4.1912ms 404 
2017-12-18 22:08:57.338 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:08:57.386 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:08:57.393 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:08:57.401 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:08:57.403 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:08:57.403 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:08:57.404 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:08:57.405 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:08:57.407 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:08:57.409 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:08:57.410 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:08:57.646 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:08:57.758 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:08:57.782 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:08:57.804 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.858 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.858 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.858 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.860 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.860 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.864 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:08:57.885 +03:00 [Information] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:08:57.886 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.886 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.913 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:08:57.921 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:08:57.940 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:08:57.945 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.945 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.956 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:08:57.957 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:08:57.962 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:08:57.962 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.962 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:08:57.966 +03:00 [Debug] Hosting starting
2017-12-18 22:08:58.022 +03:00 [Debug] Hosting started
2017-12-18 22:08:58.022 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:08:58.022 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:08:58.022 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:08:58.137 +03:00 [Debug] Connection id ""0HLA69B57K2KI"" started.
2017-12-18 22:08:58.137 +03:00 [Debug] Connection id ""0HLA69B57K2KJ"" started.
2017-12-18 22:08:58.158 +03:00 [Debug] Connection id ""0HLA69B57K2KJ"" reset.
2017-12-18 22:08:58.159 +03:00 [Debug] Connection id ""0HLA69B57K2KJ"" disconnecting.
2017-12-18 22:08:58.161 +03:00 [Debug] Connection id ""0HLA69B57K2KJ"" sending FIN.
2017-12-18 22:08:58.169 +03:00 [Debug] Connection id ""0HLA69B57K2KJ"" stopped.
2017-12-18 22:08:58.195 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:08:58.254 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:08:58.319 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:08:58.325 +03:00 [Debug] Connection id ""0HLA69B57K2KI"" completed keep alive response.
2017-12-18 22:08:58.326 +03:00 [Information] Request finished in 132.113ms 404 
2017-12-18 22:08:58.360 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:08:58.361 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:08:58.361 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:08:58.362 +03:00 [Debug] Connection id ""0HLA69B57K2KI"" completed keep alive response.
2017-12-18 22:08:58.362 +03:00 [Information] Request finished in 2.3983ms 404 
2017-12-18 22:08:58.509 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:08:58.582 +03:00 [Information] Successfully validated the token.
2017-12-18 22:08:58.585 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:08:58.586 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:08:58.595 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"ccf593c5-686e-4bd9-b9a5-3ab923a46bfc"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:08:58.595 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"dcf42dcf-a407-4789-9074-515a6780c0e3"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:08:58.622 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:08:58.628 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:08:58.642 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:16:35.878 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:16:35.911 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:16:35.918 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:16:35.925 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:16:35.927 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:16:35.928 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:16:35.929 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:16:35.930 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:16:35.932 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:16:35.935 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:16:35.935 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:16:36.173 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:16:36.288 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:16:36.312 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:16:36.333 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.387 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.387 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.387 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.389 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.390 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.394 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:16:36.416 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:16:36.416 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.416 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.444 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:16:36.454 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:16:36.476 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:16:36.481 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.481 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.492 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:16:36.494 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:16:36.499 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:16:36.499 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.499 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:16:36.504 +03:00 [Debug] Hosting starting
2017-12-18 22:16:36.555 +03:00 [Debug] Hosting started
2017-12-18 22:16:36.555 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:16:36.555 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:16:36.555 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:16:36.725 +03:00 [Debug] Connection id ""0HLA69FDT1UGJ"" started.
2017-12-18 22:16:36.725 +03:00 [Debug] Connection id ""0HLA69FDT1UGK"" started.
2017-12-18 22:16:36.749 +03:00 [Debug] Connection id ""0HLA69FDT1UGJ"" reset.
2017-12-18 22:16:36.749 +03:00 [Debug] Connection id ""0HLA69FDT1UGJ"" disconnecting.
2017-12-18 22:16:36.754 +03:00 [Debug] Connection id ""0HLA69FDT1UGJ"" sending FIN.
2017-12-18 22:16:36.764 +03:00 [Debug] Connection id ""0HLA69FDT1UGJ"" stopped.
2017-12-18 22:16:36.796 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:16:36.850 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:16:36.915 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:16:36.922 +03:00 [Debug] Connection id ""0HLA69FDT1UGK"" completed keep alive response.
2017-12-18 22:16:36.923 +03:00 [Information] Request finished in 128.5841ms 404 
2017-12-18 22:16:36.952 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:16:36.953 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:16:36.953 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:16:36.953 +03:00 [Debug] Connection id ""0HLA69FDT1UGK"" completed keep alive response.
2017-12-18 22:16:36.953 +03:00 [Information] Request finished in 0.7118ms 404 
2017-12-18 22:17:05.429 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:17:05.496 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjI0MTU2LCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.nn1H5tuT6qJZasNJyGg6o_pxfdr-8-QJQA7Fu0Tgd00".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:09:16', Current time: '12/18/2017 19:17:05'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 22:17:05.531 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:09:16', Current time: '12/18/2017 19:17:05'."
2017-12-18 22:17:05.532 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:17:05.544 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"7ce44360-f461-495e-bdab-2fd1ae569dc9"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:17:05.544 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"49cea0db-0c98-48c2-af0b-44a2333dac20"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:17:05.571 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:17:05.578 +03:00 [Information] Authorization failed for user: null.
2017-12-18 22:17:05.578 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 22:17:05.581 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 22:17:05.586 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 22:17:05.589 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 15.3402ms
2017-12-18 22:17:05.589 +03:00 [Debug] Connection id ""0HLA69FDT1UGK"" completed keep alive response.
2017-12-18 22:17:05.589 +03:00 [Information] Request finished in 159.6309ms 401 
2017-12-18 22:17:17.608 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 22:17:17.608 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjI0MTU2LCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.nn1H5tuT6qJZasNJyGg6o_pxfdr-8-QJQA7Fu0Tgd00".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:09:16', Current time: '12/18/2017 19:17:17'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 22:17:17.609 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:09:16', Current time: '12/18/2017 19:17:17'."
2017-12-18 22:17:17.610 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 22:17:17.625 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 22:17:17.662 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 22:17:17.665 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:17:17.669 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:17:17.671 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:17:17.704 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:17:17.704 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:17:17.705 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:17:17.706 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:17:17.729 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:17:17.751 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:17:17.751 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:17:17.752 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:17:17.786 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:17:17.790 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:17:17.790 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 22:17:17.790 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:17:17.802 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 177.0492ms
2017-12-18 22:17:17.803 +03:00 [Debug] Connection id ""0HLA69FDT1UGK"" completed keep alive response.
2017-12-18 22:17:17.803 +03:00 [Information] Request finished in 195.596ms 200 text/plain; charset=utf-8
2017-12-18 22:17:36.094 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:17:36.103 +03:00 [Information] Successfully validated the token.
2017-12-18 22:17:36.104 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:17:36.104 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:17:36.104 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"7ce44360-f461-495e-bdab-2fd1ae569dc9"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:17:36.104 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"49cea0db-0c98-48c2-af0b-44a2333dac20"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:17:36.105 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:17:36.105 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:17:36.106 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:18:17.928 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:18:17.963 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:18:17.971 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:18:17.980 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:18:17.982 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:18:17.982 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:18:17.983 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:18:17.984 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:18:17.986 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:18:17.989 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:18:17.989 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:18:21.694 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:18:21.820 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:18:21.846 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:18:21.866 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.919 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.919 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.919 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.921 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.922 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.926 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:18:21.947 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:18:21.947 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.948 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:21.976 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:18:21.985 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:18:22.006 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:18:22.010 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:22.010 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:22.021 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:18:22.023 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:18:22.027 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:18:22.027 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:22.027 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:18:22.032 +03:00 [Debug] Hosting starting
2017-12-18 22:18:22.078 +03:00 [Debug] Hosting started
2017-12-18 22:18:22.078 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:18:22.078 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:18:22.078 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:18:22.232 +03:00 [Debug] Connection id ""0HLA69GDB821M"" started.
2017-12-18 22:18:22.232 +03:00 [Debug] Connection id ""0HLA69GDB821N"" started.
2017-12-18 22:18:22.252 +03:00 [Debug] Connection id ""0HLA69GDB821M"" reset.
2017-12-18 22:18:22.252 +03:00 [Debug] Connection id ""0HLA69GDB821M"" disconnecting.
2017-12-18 22:18:22.254 +03:00 [Debug] Connection id ""0HLA69GDB821M"" sending FIN.
2017-12-18 22:18:22.260 +03:00 [Debug] Connection id ""0HLA69GDB821M"" stopped.
2017-12-18 22:18:22.291 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:18:22.345 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:18:22.410 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:18:22.418 +03:00 [Debug] Connection id ""0HLA69GDB821N"" completed keep alive response.
2017-12-18 22:18:22.419 +03:00 [Information] Request finished in 129.3995ms 404 
2017-12-18 22:18:22.447 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:18:22.447 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:18:22.448 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:18:22.448 +03:00 [Debug] Connection id ""0HLA69GDB821N"" completed keep alive response.
2017-12-18 22:18:22.448 +03:00 [Information] Request finished in 0.7465ms 404 
2017-12-18 22:18:26.014 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:18:26.089 +03:00 [Information] Successfully validated the token.
2017-12-18 22:18:26.092 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:18:26.093 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:18:26.102 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"4c18f26e-6cbd-426b-83b3-0bdad063eb99"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:18:26.102 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"c20bd234-3800-4c03-bb7b-aa5ee57b2beb"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:18:26.128 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:18:26.135 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:18:26.145 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:18:33.489 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 7358.4138ms
2017-12-18 22:18:33.489 +03:00 [Error] An unhandled exception has occurred: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:18:40.914 +03:00 [Debug] Connection id ""0HLA69GDB821N"" completed keep alive response.
2017-12-18 22:18:40.914 +03:00 [Information] Request finished in 14899.6811ms 500 text/html
2017-12-18 22:20:16.712 +03:00 [Debug] Connection id ""0HLA69GDB821N"" received FIN.
2017-12-18 22:20:16.712 +03:00 [Debug] Connection id ""0HLA69GDB821N"" disconnecting.
2017-12-18 22:20:16.713 +03:00 [Debug] Connection id ""0HLA69GDB821N"" sending FIN.
2017-12-18 22:20:16.713 +03:00 [Debug] Connection id ""0HLA69GDB821N"" stopped.
2017-12-18 22:21:06.603 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:21:06.637 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:21:06.644 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:21:06.653 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:21:06.655 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:21:06.655 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:21:06.656 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:21:06.656 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:21:06.658 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:21:06.661 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:21:06.661 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:21:08.425 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:21:08.551 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:21:08.574 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:21:08.594 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.648 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.649 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.649 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.651 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.651 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.656 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:21:08.679 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:21:08.679 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.679 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.712 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:21:08.720 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:21:08.741 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:21:08.745 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.745 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.757 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:21:08.758 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:21:08.763 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:21:08.763 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.764 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:21:08.768 +03:00 [Debug] Hosting starting
2017-12-18 22:21:08.829 +03:00 [Debug] Hosting started
2017-12-18 22:21:08.829 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:21:08.829 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:21:08.829 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:21:09.004 +03:00 [Debug] Connection id ""0HLA69HV1MTHM"" started.
2017-12-18 22:21:09.004 +03:00 [Debug] Connection id ""0HLA69HV1MTHL"" started.
2017-12-18 22:21:09.025 +03:00 [Debug] Connection id ""0HLA69HV1MTHL"" reset.
2017-12-18 22:21:09.025 +03:00 [Debug] Connection id ""0HLA69HV1MTHL"" disconnecting.
2017-12-18 22:21:09.026 +03:00 [Debug] Connection id ""0HLA69HV1MTHL"" sending FIN.
2017-12-18 22:21:09.037 +03:00 [Debug] Connection id ""0HLA69HV1MTHL"" stopped.
2017-12-18 22:21:09.064 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:21:09.130 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:21:09.200 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:21:09.207 +03:00 [Debug] Connection id ""0HLA69HV1MTHM"" completed keep alive response.
2017-12-18 22:21:09.208 +03:00 [Information] Request finished in 145.188ms 404 
2017-12-18 22:21:09.245 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:21:09.246 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:21:09.246 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:21:09.246 +03:00 [Debug] Connection id ""0HLA69HV1MTHM"" completed keep alive response.
2017-12-18 22:21:09.246 +03:00 [Information] Request finished in 0.7039ms 404 
2017-12-18 22:21:13.158 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:21:13.233 +03:00 [Information] Successfully validated the token.
2017-12-18 22:21:13.235 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:21:13.237 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:21:13.247 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"6f688844-89ec-4a9b-b128-a00820dfba1c"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:21:13.247 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"f0bf6d4a-cd37-4bb3-905b-990704e773b5"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:21:13.272 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:21:13.280 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:21:13.293 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:21:17.893 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 4618.775ms
2017-12-18 22:21:17.894 +03:00 [Error] An unhandled exception has occurred: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:21:25.514 +03:00 [Debug] Connection id ""0HLA69HV1MTHM"" completed keep alive response.
2017-12-18 22:21:25.515 +03:00 [Information] Request finished in 12356.6153ms 500 text/html
2017-12-18 22:23:05.857 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:23:05.892 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:23:05.899 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:23:05.908 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:23:05.910 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:23:05.911 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:23:05.912 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:23:05.912 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:23:05.915 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:23:05.918 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:23:05.918 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:23:06.169 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:23:06.282 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:23:06.304 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:23:06.327 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.391 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.392 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.392 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.394 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.394 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.399 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:23:06.432 +03:00 [Information] Executed DbCommand ("34"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:23:06.433 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.433 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.463 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:23:06.470 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:23:06.492 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:23:06.496 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.496 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.507 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:23:06.509 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:23:06.514 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:23:06.514 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.514 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:23:06.518 +03:00 [Debug] Hosting starting
2017-12-18 22:23:06.576 +03:00 [Debug] Hosting started
2017-12-18 22:23:06.577 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:23:06.577 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:23:06.577 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:23:06.809 +03:00 [Debug] Connection id ""0HLA69J255UR2"" started.
2017-12-18 22:23:06.809 +03:00 [Debug] Connection id ""0HLA69J255UR3"" started.
2017-12-18 22:23:06.829 +03:00 [Debug] Connection id ""0HLA69J255UR2"" reset.
2017-12-18 22:23:06.830 +03:00 [Debug] Connection id ""0HLA69J255UR2"" disconnecting.
2017-12-18 22:23:06.831 +03:00 [Debug] Connection id ""0HLA69J255UR2"" sending FIN.
2017-12-18 22:23:06.838 +03:00 [Debug] Connection id ""0HLA69J255UR2"" stopped.
2017-12-18 22:23:06.870 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:23:06.933 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:23:07.003 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:23:07.009 +03:00 [Debug] Connection id ""0HLA69J255UR3"" completed keep alive response.
2017-12-18 22:23:07.010 +03:00 [Information] Request finished in 141.1034ms 404 
2017-12-18 22:23:07.035 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:23:07.035 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:23:07.035 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:23:07.035 +03:00 [Debug] Connection id ""0HLA69J255UR3"" completed keep alive response.
2017-12-18 22:23:07.035 +03:00 [Information] Request finished in 0.6912ms 404 
2017-12-18 22:23:20.336 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:23:20.419 +03:00 [Information] Successfully validated the token.
2017-12-18 22:23:20.421 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:23:20.423 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:23:20.433 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"d62abfeb-d00e-48b9-adde-b3177332a7ac"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:23:20.434 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"0a457bf9-3778-4e31-8681-43454c665fcd"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:23:20.463 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:23:20.470 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:23:20.480 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:23:25.399 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 4932.735ms
2017-12-18 22:23:25.399 +03:00 [Error] An unhandled exception has occurred: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:23:25.459 +03:00 [Debug] Connection id ""0HLA69J255UR3"" completed keep alive response.
2017-12-18 22:23:25.459 +03:00 [Information] Request finished in 5122.8944ms 500 text/html
2017-12-18 22:26:02.863 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:26:02.903 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:26:02.911 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:26:02.922 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:26:02.926 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:26:02.927 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:26:02.928 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:26:02.929 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:26:02.932 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:26:02.937 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:26:02.938 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:26:03.191 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:26:03.305 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:26:03.332 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:26:03.361 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.417 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.418 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.418 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.420 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.420 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.425 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:26:03.447 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:26:03.447 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.447 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.481 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:26:03.489 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:26:03.511 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:26:03.516 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.516 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.527 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:26:03.529 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:26:03.533 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:26:03.533 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.533 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:03.538 +03:00 [Debug] Hosting starting
2017-12-18 22:26:03.588 +03:00 [Debug] Hosting started
2017-12-18 22:26:03.588 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:26:03.588 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:26:03.588 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:26:03.672 +03:00 [Debug] Connection id ""0HLA69KMRSD5Q"" started.
2017-12-18 22:26:03.672 +03:00 [Debug] Connection id ""0HLA69KMRSD5P"" started.
2017-12-18 22:26:03.692 +03:00 [Debug] Connection id ""0HLA69KMRSD5Q"" reset.
2017-12-18 22:26:03.692 +03:00 [Debug] Connection id ""0HLA69KMRSD5Q"" disconnecting.
2017-12-18 22:26:03.693 +03:00 [Debug] Connection id ""0HLA69KMRSD5Q"" sending FIN.
2017-12-18 22:26:03.695 +03:00 [Debug] Connection id ""0HLA69KMRSD5Q"" stopped.
2017-12-18 22:26:03.733 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:26:03.791 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:26:03.863 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:26:03.869 +03:00 [Debug] Connection id ""0HLA69KMRSD5P"" completed keep alive response.
2017-12-18 22:26:03.870 +03:00 [Information] Request finished in 139.2653ms 404 
2017-12-18 22:26:03.921 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:26:03.924 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:26:03.925 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:26:03.925 +03:00 [Debug] Connection id ""0HLA69KMRSD5P"" completed keep alive response.
2017-12-18 22:26:03.925 +03:00 [Information] Request finished in 3.7045ms 404 
2017-12-18 22:26:07.788 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:26:07.864 +03:00 [Information] Successfully validated the token.
2017-12-18 22:26:07.867 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:26:07.869 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:26:07.879 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"746b58ee-cce2-4f9e-8603-618223893176"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:26:07.879 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"6f5ad3e0-f2e4-4a37-be4a-b0a3ae7f21fd"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:26:07.905 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:26:07.912 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:26:07.923 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:26:12.757 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 4849.1197ms
2017-12-18 22:26:12.758 +03:00 [Error] An unhandled exception has occurred: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:26:12.822 +03:00 [Debug] Connection id ""0HLA69KMRSD5P"" completed keep alive response.
2017-12-18 22:26:12.822 +03:00 [Information] Request finished in 5033.6461ms 500 text/html
2017-12-18 22:26:34.817 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:26:34.853 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:26:34.859 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:26:34.868 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:26:34.871 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:26:34.872 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:26:34.873 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:26:34.874 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:26:34.876 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:26:34.879 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:26:34.880 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:26:35.181 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:26:35.299 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:26:35.325 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:26:35.351 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.404 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.404 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.404 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.406 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.407 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.411 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:26:35.433 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:26:35.434 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.434 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.464 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:26:35.473 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:26:35.493 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:26:35.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.498 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.509 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:26:35.511 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:26:35.515 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:26:35.515 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.515 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:35.520 +03:00 [Debug] Hosting starting
2017-12-18 22:26:35.578 +03:00 [Debug] Hosting started
2017-12-18 22:26:35.578 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:26:35.578 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:26:35.578 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:26:35.814 +03:00 [Debug] Connection id ""0HLA69L0EDDJE"" started.
2017-12-18 22:26:35.814 +03:00 [Debug] Connection id ""0HLA69L0EDDJD"" started.
2017-12-18 22:26:35.837 +03:00 [Debug] Connection id ""0HLA69L0EDDJE"" reset.
2017-12-18 22:26:35.837 +03:00 [Debug] Connection id ""0HLA69L0EDDJE"" disconnecting.
2017-12-18 22:26:35.838 +03:00 [Debug] Connection id ""0HLA69L0EDDJF"" started.
2017-12-18 22:26:35.839 +03:00 [Debug] Connection id ""0HLA69L0EDDJE"" sending FIN.
2017-12-18 22:26:35.846 +03:00 [Debug] Connection id ""0HLA69L0EDDJE"" stopped.
2017-12-18 22:26:35.883 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:26:35.883 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:26:35.956 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:26:36.038 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:26:36.046 +03:00 [Debug] Connection id ""0HLA69L0EDDJD"" completed keep alive response.
2017-12-18 22:26:36.047 +03:00 [Information] Request finished in 165.8965ms 404 
2017-12-18 22:26:36.078 +03:00 [Information] Successfully validated the token.
2017-12-18 22:26:36.080 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:26:36.082 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:26:36.087 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:26:36.088 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:26:36.088 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:26:36.088 +03:00 [Debug] Connection id ""0HLA69L0EDDJD"" completed keep alive response.
2017-12-18 22:26:36.088 +03:00 [Information] Request finished in 0.8558ms 404 
2017-12-18 22:26:36.097 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"c2291b7a-f431-43a7-8dee-b23ce79e621b"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:26:36.097 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"b24fded2-15d7-4906-b442-ea9b423ba528"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:26:36.120 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:26:36.127 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:26:36.136 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:26:36.140 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:26:36.145 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:26:36.147 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:26:36.165 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:26:36.165 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.165 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.167 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:26:36.194 +03:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:26:36.219 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:26:36.220 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.220 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.234 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:26:36.239 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:26:36.239 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:26:36.239 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:26:36.256 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:26:36.257 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].BlockerId == __userId_0
join User u in DbSet<User>
on [b].UnWantedId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:26:36.268 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
            WHERE [b].[BlockerId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:26:36.268 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.268 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.269 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 22:26:36.271 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[UnWantedId] = [u].[UserID]
WHERE [b].[BlockerId] = @__userId_0"
2017-12-18 22:26:36.271 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:26:36.271 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.271 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:26:36.279 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 156.2783ms
2017-12-18 22:26:36.280 +03:00 [Debug] Connection id ""0HLA69L0EDDJF"" completed keep alive response.
2017-12-18 22:26:36.280 +03:00 [Information] Request finished in 400.0901ms 200 application/json; charset=utf-8
2017-12-18 22:31:04.470 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:31:04.509 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:31:04.517 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:31:04.526 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:31:04.528 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:31:04.529 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:31:04.530 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:31:04.530 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:31:04.533 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:31:04.535 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:31:04.536 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:31:04.609 +03:00 [Fatal] Application startup exception
System.Exception: Could not resolve a service of type 'Microsoft.Extensions.Logging.Logger`1[[Armut.Sample.Messaging.Model.Message, Armut.Sample.Messaging, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' for the parameter 'logger' of method 'Configure' on type 'Armut.Sample.Messaging.Startup'. ---> System.InvalidOperationException: No service for type 'Microsoft.Extensions.Logging.Logger`1[Armut.Sample.Messaging.Model.Message]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.ApplicationInsights.HostingStartup.ApplicationInsightsLoggerStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.ApplicationInsights.AspNetCore.ApplicationInsightsStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass3_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2017-12-18 22:31:04.685 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:31:04.799 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:31:04.823 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:31:04.847 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.909 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.909 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.910 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.912 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.913 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.918 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:31:04.954 +03:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:31:04.954 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.954 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:04.986 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:31:04.995 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:31:05.018 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:31:05.022 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:05.023 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:05.035 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:31:05.036 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:31:05.041 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:31:05.041 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:05.041 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:31:05.050 +03:00 [Debug] Hosting starting
2017-12-18 22:31:05.116 +03:00 [Debug] Hosting started
2017-12-18 22:31:05.116 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:31:05.116 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:31:05.116 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:31:05.138 +03:00 [Debug] Connection id ""0HLA69NGMSM6L"" started.
2017-12-18 22:31:05.138 +03:00 [Debug] Connection id ""0HLA69NGMSM6M"" started.
2017-12-18 22:31:05.159 +03:00 [Debug] Connection id ""0HLA69NGMSM6L"" reset.
2017-12-18 22:31:05.159 +03:00 [Debug] Connection id ""0HLA69NGMSM6L"" disconnecting.
2017-12-18 22:31:05.160 +03:00 [Debug] Connection id ""0HLA69NGMSM6L"" sending FIN.
2017-12-18 22:31:05.170 +03:00 [Debug] Connection id ""0HLA69NGMSM6L"" stopped.
2017-12-18 22:31:05.198 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:31:05.238 +03:00 [Debug] Connection id ""0HLA69NGMSM6M"" completed keep alive response.
2017-12-18 22:31:05.240 +03:00 [Information] Request finished in 43.2478ms 500 text/html; charset=utf-8
2017-12-18 22:31:05.286 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:31:05.296 +03:00 [Debug] Connection id ""0HLA69NGMSM6M"" completed keep alive response.
2017-12-18 22:31:05.300 +03:00 [Information] Request finished in 13.7153ms 500 text/html; charset=utf-8
2017-12-18 22:34:11.835 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:34:11.869 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:34:11.875 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:34:11.883 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:34:11.885 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:34:11.885 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:34:11.886 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:34:11.886 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:34:11.888 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:34:11.891 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:34:11.892 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:34:12.130 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:34:12.248 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:34:12.274 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:34:12.298 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.352 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.352 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.353 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.354 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.355 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.360 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:34:12.381 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:34:12.382 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.382 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.410 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:34:12.418 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:34:12.439 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:34:12.443 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.443 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.458 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:34:12.459 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:34:12.465 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:34:12.465 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.465 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:12.470 +03:00 [Debug] Hosting starting
2017-12-18 22:34:12.534 +03:00 [Debug] Hosting started
2017-12-18 22:34:12.535 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:34:12.535 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:34:12.535 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:34:12.607 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" started.
2017-12-18 22:34:12.607 +03:00 [Debug] Connection id ""0HLA69P8INFFU"" started.
2017-12-18 22:34:12.627 +03:00 [Debug] Connection id ""0HLA69P8INFFU"" reset.
2017-12-18 22:34:12.627 +03:00 [Debug] Connection id ""0HLA69P8INFFU"" disconnecting.
2017-12-18 22:34:12.634 +03:00 [Debug] Connection id ""0HLA69P8INFFU"" sending FIN.
2017-12-18 22:34:12.641 +03:00 [Debug] Connection id ""0HLA69P8INFFU"" stopped.
2017-12-18 22:34:12.667 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:34:12.733 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:34:12.801 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:34:12.809 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:34:12.809 +03:00 [Information] Request finished in 143.8882ms 404 
2017-12-18 22:34:12.841 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:34:12.842 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:34:12.842 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:34:12.842 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:34:12.842 +03:00 [Information] Request finished in 0.7655ms 404 
2017-12-18 22:34:35.515 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:34:35.579 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjI1MjM3LCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.qkrfku8KGO8bpVrCws3DLvwnaGh1ciQUo9xWmNJZ274".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:27:17', Current time: '12/18/2017 19:34:35'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 22:34:35.615 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:27:17', Current time: '12/18/2017 19:34:35'."
2017-12-18 22:34:35.617 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:34:35.627 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"7e153b2e-8dd2-431d-82c0-09f2bcdb00eb"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:34:35.627 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"ef6b0bf3-8baf-4980-b326-e6845878ea81"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:34:35.655 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:34:35.662 +03:00 [Information] Authorization failed for user: null.
2017-12-18 22:34:35.663 +03:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2017-12-18 22:34:35.666 +03:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2017-12-18 22:34:35.671 +03:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2017-12-18 22:34:35.674 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 16.3986ms
2017-12-18 22:34:35.674 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:34:35.674 +03:00 [Information] Request finished in 159.7021ms 401 
2017-12-18 22:34:45.825 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 22:34:45.825 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjI1MjM3LCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.qkrfku8KGO8bpVrCws3DLvwnaGh1ciQUo9xWmNJZ274".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:27:17', Current time: '12/18/2017 19:34:45'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 22:34:45.826 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:27:17', Current time: '12/18/2017 19:34:45'."
2017-12-18 22:34:45.826 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 22:34:45.842 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 22:34:45.876 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 22:34:45.879 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:34:45.883 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:34:45.885 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:34:45.910 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:34:45.910 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:45.911 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:45.912 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:34:45.939 +03:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:34:45.961 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:34:45.961 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:45.961 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:45.995 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:34:45.999 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:34:45.999 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 22:34:46.000 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:34:46.010 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 168.448ms
2017-12-18 22:34:46.011 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:34:46.012 +03:00 [Information] Request finished in 186.7572ms 200 text/plain; charset=utf-8
2017-12-18 22:34:54.657 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 22:34:54.666 +03:00 [Information] Successfully validated the token.
2017-12-18 22:34:54.667 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:34:54.668 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 22:34:54.668 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 22:34:54.673 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 22:34:54.673 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:34:54.674 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:54.674 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:54.675 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:34:54.676 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:34:54.676 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:34:54.676 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:54.676 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:34:54.683 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:34:54.684 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:34:54.684 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 22:34:54.684 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:34:54.684 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 15.9304ms
2017-12-18 22:34:54.684 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:34:54.684 +03:00 [Information] Request finished in 26.8102ms 200 text/plain; charset=utf-8
2017-12-18 22:35:14.679 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/blocking  
2017-12-18 22:35:14.679 +03:00 [Information] Successfully validated the token.
2017-12-18 22:35:14.679 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:35:14.679 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:35:14.679 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"7e153b2e-8dd2-431d-82c0-09f2bcdb00eb"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:35:14.679 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"ef6b0bf3-8baf-4980-b326-e6845878ea81"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:35:14.679 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"
2017-12-18 22:35:14.682 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:35:14.683 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" with arguments (null) - ModelState is Valid
2017-12-18 22:35:20.117 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)" in 5437.91ms
2017-12-18 22:35:20.118 +03:00 [Error] An unhandled exception has occurred: Object reference not set to an instance of an object.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:35:20.137 +03:00 [Fatal] <h1>Error: Object reference not set to an instance of an object.</h1>   at Armut.Sample.Messaging.Controllers.BlockingController.Get() in C:\Users\ilker\source\repos\Armut.Sample.Messaging\Armut.Sample.Messaging\Controllers\BlockingController.cs:line 47
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>d__6.MoveNext()
2017-12-18 22:35:20.150 +03:00 [Debug] Connection id ""0HLA69P8INFFV"" completed keep alive response.
2017-12-18 22:35:20.150 +03:00 [Information] Request finished in 5470.9984ms 500 text/html
2017-12-18 22:51:18.605 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:51:18.633 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:51:18.638 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:51:18.645 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:51:18.646 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:51:18.646 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:51:18.647 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:51:18.647 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:51:18.649 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:51:18.652 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:51:18.652 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:51:18.738 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:51:18.829 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:51:18.847 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:51:18.853 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.883 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.883 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.883 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.885 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.885 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.889 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:51:18.908 +03:00 [Information] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:51:18.908 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.908 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.930 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:51:18.937 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:51:18.952 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:51:18.956 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.956 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.967 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:51:18.968 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:51:18.972 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:51:18.972 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.972 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:18.976 +03:00 [Debug] Hosting starting
2017-12-18 22:51:19.004 +03:00 [Debug] Hosting started
2017-12-18 22:51:19.004 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:51:19.004 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:51:19.004 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:51:19.017 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" started.
2017-12-18 22:51:19.052 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 22:51:19.114 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6Ik1hcnR5IiwiZXhwIjoxNTEzNjI2Mjk0LCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.XUbiH4ErfWMAXMe-4Y9sUg3EUUz-pFnus6EzGV-7A_o".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:44:54', Current time: '12/18/2017 19:51:19'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 22:51:19.128 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 19:44:54', Current time: '12/18/2017 19:51:19'."
2017-12-18 22:51:19.169 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 22:51:19.195 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 22:51:19.224 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 22:51:19.227 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:51:19.230 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:51:19.232 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:51:19.247 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:51:19.248 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:19.248 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:19.249 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:51:19.271 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:51:19.291 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:51:19.291 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:19.291 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:51:19.316 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:51:19.320 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:51:19.320 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 22:51:19.320 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:51:19.327 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 129.2561ms
2017-12-18 22:51:19.327 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:51:19.328 +03:00 [Information] Request finished in 276.5594ms 200 text/plain; charset=utf-8
2017-12-18 22:51:55.865 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?username=rick&body=helehele  
2017-12-18 22:51:55.873 +03:00 [Information] Successfully validated the token.
2017-12-18 22:51:55.874 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:51:55.874 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:51:55.875 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"1cbb2f4b-c706-46e5-8b93-e93d73a90b42"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:51:55.876 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:51:55.876 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:51:55.876 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:51:55.877 +03:00 [Information] Request finished in 11.9064ms 404 
2017-12-18 22:52:03.992 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?username=rick&body=helehele  0
2017-12-18 22:52:03.992 +03:00 [Information] Successfully validated the token.
2017-12-18 22:52:03.992 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:52:03.992 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:52:03.995 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:52:04.000 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:52:04.001 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["helehele", ""]) - ModelState is Valid
2017-12-18 22:52:04.002 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 22:52:04.004 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 22:52:04.005 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 9.9533ms
2017-12-18 22:52:04.005 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:52:04.005 +03:00 [Information] Request finished in 12.9935ms 400 
2017-12-18 22:52:18.177 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?username=ric  0
2017-12-18 22:52:18.177 +03:00 [Information] Successfully validated the token.
2017-12-18 22:52:18.177 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:52:18.177 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:52:18.177 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:52:18.177 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:52:18.178 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 22:52:18.178 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 22:52:18.178 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 22:52:18.178 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 0.7329ms
2017-12-18 22:52:18.178 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:52:18.178 +03:00 [Information] Request finished in 1.5634ms 400 
2017-12-18 22:52:22.852 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?username=rick  0
2017-12-18 22:52:22.852 +03:00 [Information] Successfully validated the token.
2017-12-18 22:52:22.852 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:52:22.852 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:52:22.852 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:52:22.852 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:52:22.852 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 22:52:22.853 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 22:52:22.853 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 22:52:22.853 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 0.3187ms
2017-12-18 22:52:22.853 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:52:22.853 +03:00 [Information] Request finished in 0.9167ms 400 
2017-12-18 22:52:59.248 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?username=  0
2017-12-18 22:52:59.248 +03:00 [Information] Successfully validated the token.
2017-12-18 22:52:59.248 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:52:59.248 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:52:59.249 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:52:59.249 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:52:59.249 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", ""]) - ModelState is Valid
2017-12-18 22:52:59.249 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 22:52:59.249 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 22:52:59.249 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 0.2943ms
2017-12-18 22:52:59.249 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:52:59.249 +03:00 [Information] Request finished in 0.9273ms 400 
2017-12-18 22:53:28.507 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:53:28.507 +03:00 [Information] Successfully validated the token.
2017-12-18 22:53:28.507 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:53:28.507 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:53:28.507 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:53:28.508 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:53:28.508 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:53:28.508 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:53:28.509 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.509 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.509 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.511 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.511 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:53:28.511 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.511 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.513 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.513 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.513 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.513 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.513 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:53:28.513 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.513 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.520 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:53:28.521 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:53:28.530 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:53:28.531 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.531 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.531 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:53:28.565 +03:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:53:28.565 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:53:28.565 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.565 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.565 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.565 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.565 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.565 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:53:28.566 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:53:28.566 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.566 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.603 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.603 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.610 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:53:28.624 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:53:28.745 +03:00 [Information] Executed DbCommand ("121"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:53:28.749 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:53:28.750 +03:00 [Debug] Committing transaction.
2017-12-18 22:53:28.750 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.750 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:53:28.750 +03:00 [Debug] Disposing transaction.
2017-12-18 22:53:28.751 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:53:28.751 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:53:28.751 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:53:28.751 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:53:28.764 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 256.7206ms
2017-12-18 22:53:28.764 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:53:28.764 +03:00 [Information] Request finished in 257.669ms 200 application/json; charset=utf-8
2017-12-18 22:54:06.629 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=Marty&body=merhaba  0
2017-12-18 22:54:06.629 +03:00 [Information] Successfully validated the token.
2017-12-18 22:54:06.629 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:54:06.629 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:54:06.629 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:54:06.629 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:54:06.629 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "Marty"]) - ModelState is Valid
2017-12-18 22:54:06.630 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:54:06.630 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.630 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.630 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.631 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.631 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:54:06.631 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.631 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.632 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.632 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.632 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.632 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.632 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:54:06.632 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.632 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.632 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.633 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.633 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:54:06.634 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:54:06.634 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:54:06.634 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.635 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.635 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.635 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.635 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.635 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:54:06.635 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:54:06.635 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.635 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:54:06.637 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult".
2017-12-18 22:54:06.637 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:54:06.637 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:54:06.637 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:54:06.638 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 8.9617ms
2017-12-18 22:54:06.638 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:54:06.638 +03:00 [Information] Request finished in 9.7061ms 400 application/json; charset=utf-8
2017-12-18 22:54:55.330 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/blocking?username=rick  0
2017-12-18 22:54:55.330 +03:00 [Information] Successfully validated the token.
2017-12-18 22:54:55.330 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:54:55.330 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:54:55.331 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fbb91e3d-6ca6-480a-8922-d708ed00b119"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:54:55.331 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"' with id '"76710f83-5744-4902-8594-adecc0af41f2"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:54:55.331 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"d4bebf53-ce08-44d5-8b03-444930f73896"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:54:55.331 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:54:55.331 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:54:55.331 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:54:55.331 +03:00 [Information] Request finished in 0.78ms 404 
2017-12-18 22:55:02.505 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/blocking?username=rick  0
2017-12-18 22:55:02.505 +03:00 [Information] Successfully validated the token.
2017-12-18 22:55:02.505 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:55:02.505 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Blocking"'.
2017-12-18 22:55:02.505 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Get (Armut.Sample.Messaging)"' with id '"fbb91e3d-6ca6-480a-8922-d708ed00b119"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:55:02.505 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.BlockingController.Delete (Armut.Sample.Messaging)"' with id '"d4bebf53-ce08-44d5-8b03-444930f73896"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:55:02.507 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)"
2017-12-18 22:55:02.507 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:55:02.507 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 22:55:02.508 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:55:02.508 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.508 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.508 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:02.510 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:02.510 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:02.510 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.510 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.511 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.511 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.511 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:02.512 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:02.512 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:02.512 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.512 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.520 +03:00 [Debug] Compiling query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 && [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 22:55:02.521 +03:00 [Debug] Optimized query model: "
"'"(from Blocking b in DbSet<Blocking>
where [b].BlockerId == __blocking_BlockerId_0 && [b].UnWantedId == __blocking_UnWantedId_1
select [b]).Any()"'
2017-12-18 22:55:02.522 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [Blocking] AS [b]
                            WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:55:02.522 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.522 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.522 +03:00 [Debug] Executing DbCommand [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:55:02.524 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__blocking_BlockerId_0='?', @__blocking_UnWantedId_1='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Blocking] AS [b]
        WHERE ([b].[BlockerId] = @__blocking_BlockerId_0) AND ([b].[UnWantedId] = @__blocking_UnWantedId_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:55:02.525 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:02.525 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.525 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.531 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.531 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.532 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:55:02.532 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 22:55:02.533 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?', @p1='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Blocking] ([BlockerId], [UnWantedId])
VALUES (@p0, @p1);"
2017-12-18 22:55:02.533 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:02.534 +03:00 [Debug] Committing transaction.
2017-12-18 22:55:02.534 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.534 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:02.534 +03:00 [Debug] Disposing transaction.
2017-12-18 22:55:02.534 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkResult".
2017-12-18 22:55:02.534 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 200
2017-12-18 22:55:02.534 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.BlockingController.Put (Armut.Sample.Messaging)" in 27.6627ms
2017-12-18 22:55:02.534 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:55:02.534 +03:00 [Information] Request finished in 29.8268ms 200 
2017-12-18 22:55:10.885 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:55:10.885 +03:00 [Information] Successfully validated the token.
2017-12-18 22:55:10.885 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:55:10.885 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:55:10.886 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"1cbb2f4b-c706-46e5-8b93-e93d73a90b42"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:55:10.886 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:55:10.886 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:55:10.886 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:55:10.886 +03:00 [Information] Request finished in 0.5346ms 404 
2017-12-18 22:55:39.785 +03:00 [Information] Request starting HTTP/1.1 PUT http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:55:39.785 +03:00 [Information] Successfully validated the token.
2017-12-18 22:55:39.785 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:55:39.785 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:55:39.785 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"1cbb2f4b-c706-46e5-8b93-e93d73a90b42"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:55:39.785 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:55:39.785 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:55:39.785 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:55:39.785 +03:00 [Information] Request finished in 0.5693ms 404 
2017-12-18 22:55:46.496 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:55:46.496 +03:00 [Information] Successfully validated the token.
2017-12-18 22:55:46.496 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:55:46.496 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:55:46.496 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:55:46.496 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:55:46.497 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:55:46.497 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:55:46.497 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.497 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.497 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.499 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.499 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:46.499 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.499 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.499 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.499 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.499 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.500 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.500 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:46.500 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.500 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.500 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.500 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.500 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:55:46.502 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:55:46.502 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:46.502 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.502 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.502 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.502 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.502 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.502 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:55:46.503 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:46.503 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.503 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.504 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.504 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.504 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:55:46.504 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:55:46.506 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:55:46.506 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:55:46.508 +03:00 [Debug] Committing transaction.
2017-12-18 22:55:46.508 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.509 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:55:46.509 +03:00 [Debug] Disposing transaction.
2017-12-18 22:55:46.509 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:55:46.509 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:55:46.509 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:55:46.509 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:55:46.509 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 12.5956ms
2017-12-18 22:55:46.509 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:55:46.509 +03:00 [Information] Request finished in 13.2087ms 200 application/json; charset=utf-8
2017-12-18 22:56:00.122 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:56:00.123 +03:00 [Information] Successfully validated the token.
2017-12-18 22:56:00.123 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:56:00.123 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:56:00.123 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:56:00.123 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:56:00.123 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:56:00.123 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:56:00.124 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.124 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.124 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.124 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.124 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:00.124 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.124 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.124 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.125 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.125 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:00.125 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.125 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:00.126 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:00.126 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:00.126 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.126 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.126 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.126 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.126 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.126 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:00.126 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:00.126 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.126 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.127 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.127 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.127 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:56:00.127 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:00.128 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:00.128 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:00.131 +03:00 [Debug] Committing transaction.
2017-12-18 22:56:00.131 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.131 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:00.131 +03:00 [Debug] Disposing transaction.
2017-12-18 22:56:00.131 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:56:00.131 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:56:00.131 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:56:00.131 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:56:00.131 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 8.2909ms
2017-12-18 22:56:00.131 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:56:00.131 +03:00 [Information] Request finished in 8.9079ms 200 application/json; charset=utf-8
2017-12-18 22:56:03.505 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:56:03.505 +03:00 [Information] Successfully validated the token.
2017-12-18 22:56:03.505 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:56:03.505 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:56:03.505 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:56:03.505 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:56:03.505 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:56:03.506 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:56:03.506 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.506 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.506 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.506 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.506 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:03.506 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.506 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.507 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.507 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:03.507 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.507 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:03.508 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:03.508 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:03.508 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.508 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.508 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.508 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.508 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.508 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:03.508 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:03.508 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.508 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.509 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.509 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.509 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:56:03.509 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:03.509 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:03.509 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:03.519 +03:00 [Debug] Committing transaction.
2017-12-18 22:56:03.519 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.519 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:03.519 +03:00 [Debug] Disposing transaction.
2017-12-18 22:56:03.519 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:56:03.519 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:56:03.519 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:56:03.519 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:56:03.519 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 14.3045ms
2017-12-18 22:56:03.519 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:56:03.519 +03:00 [Information] Request finished in 14.9049ms 200 application/json; charset=utf-8
2017-12-18 22:56:04.541 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:56:04.541 +03:00 [Information] Successfully validated the token.
2017-12-18 22:56:04.542 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:56:04.542 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:56:04.542 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:56:04.542 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:56:04.542 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:56:04.542 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:56:04.543 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.543 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.543 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.543 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.543 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:04.543 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.543 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.544 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.544 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:04.544 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.544 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.545 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:04.545 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:04.545 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:04.545 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.545 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.545 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.545 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.545 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.545 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:04.545 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:04.546 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.546 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.546 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.546 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.546 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:56:04.546 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:04.547 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:04.547 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:04.548 +03:00 [Debug] Committing transaction.
2017-12-18 22:56:04.549 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.549 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:04.549 +03:00 [Debug] Disposing transaction.
2017-12-18 22:56:04.549 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:56:04.549 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:56:04.549 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:56:04.549 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:56:04.549 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 7.1939ms
2017-12-18 22:56:04.549 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:56:04.549 +03:00 [Information] Request finished in 7.8136ms 200 application/json; charset=utf-8
2017-12-18 22:56:05.340 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:56:05.341 +03:00 [Information] Successfully validated the token.
2017-12-18 22:56:05.341 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:56:05.341 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:56:05.341 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:56:05.341 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:56:05.341 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:56:05.341 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:56:05.342 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.342 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.342 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.342 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.342 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:05.342 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.342 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.343 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.343 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:05.343 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.343 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:05.344 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:05.344 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:05.344 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.344 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.344 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.344 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.344 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.344 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:05.344 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:05.344 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.345 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.345 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.345 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.345 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:56:05.345 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:05.346 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:05.346 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:05.348 +03:00 [Debug] Committing transaction.
2017-12-18 22:56:05.348 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.348 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:05.348 +03:00 [Debug] Disposing transaction.
2017-12-18 22:56:05.348 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:56:05.348 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:56:05.348 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:56:05.348 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:56:05.348 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 7.3095ms
2017-12-18 22:56:05.348 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:56:05.348 +03:00 [Information] Request finished in 8.0129ms 200 application/json; charset=utf-8
2017-12-18 22:56:06.124 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 22:56:06.124 +03:00 [Information] Successfully validated the token.
2017-12-18 22:56:06.124 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:56:06.124 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:56:06.124 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:56:06.124 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:56:06.124 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 22:56:06.125 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:56:06.125 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.125 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.125 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.125 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.126 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:06.126 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.126 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.126 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:06.126 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.126 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:06.127 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:56:06.127 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:06.127 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.127 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.128 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:56:06.128 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:06.128 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.128 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.128 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.128 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.128 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 22:56:06.128 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:06.129 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 22:56:06.129 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:56:06.131 +03:00 [Debug] Committing transaction.
2017-12-18 22:56:06.131 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.131 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:56:06.131 +03:00 [Debug] Disposing transaction.
2017-12-18 22:56:06.131 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:56:06.131 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:56:06.131 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:56:06.131 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:56:06.131 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 6.8437ms
2017-12-18 22:56:06.131 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" completed keep alive response.
2017-12-18 22:56:06.131 +03:00 [Information] Request finished in 7.4369ms 200 application/json; charset=utf-8
2017-12-18 22:57:58.487 +03:00 [Debug] Connection id ""0HLA6A2QFB4PD"" started.
2017-12-18 22:57:58.488 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" received FIN.
2017-12-18 22:57:58.488 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=rick&password=asdasd12321  
2017-12-18 22:57:58.488 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" disconnecting.
2017-12-18 22:57:58.488 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" sending FIN.
2017-12-18 22:57:58.488 +03:00 [Information] Successfully validated the token.
2017-12-18 22:57:58.489 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:57:58.489 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 22:57:58.489 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 22:57:58.489 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["rick", "asdasd12321"]) - ModelState is Valid
2017-12-18 22:57:58.489 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:57:58.490 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:57:58.490 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:57:58.490 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:57:58.491 +03:00 [Debug] Connection id ""0HLA6A2QFB4PC"" stopped.
2017-12-18 22:57:58.494 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:57:58.494 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:57:58.494 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:57:58.494 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:57:58.500 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 22:57:58.500 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:57:58.500 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 22:57:58.500 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:57:58.500 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 11.5982ms
2017-12-18 22:57:58.501 +03:00 [Debug] Connection id ""0HLA6A2QFB4PD"" completed keep alive response.
2017-12-18 22:57:58.501 +03:00 [Information] Request finished in 12.5325ms 200 text/plain; charset=utf-8
2017-12-18 22:58:24.738 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?receiver=Marty&body=merhaba  
2017-12-18 22:58:24.738 +03:00 [Information] Successfully validated the token.
2017-12-18 22:58:24.738 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:58:24.739 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:58:24.739 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"1cbb2f4b-c706-46e5-8b93-e93d73a90b42"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:58:24.739 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:58:24.739 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:58:24.739 +03:00 [Debug] Connection id ""0HLA6A2QFB4PD"" completed keep alive response.
2017-12-18 22:58:24.739 +03:00 [Information] Request finished in 0.585ms 404 
2017-12-18 22:58:45.347 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 22:58:45.382 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 22:58:45.389 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 22:58:45.396 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 22:58:45.398 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:58:45.399 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 22:58:45.400 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 22:58:45.401 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 22:58:45.403 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 22:58:45.406 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 22:58:45.407 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 22:58:45.651 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 22:58:45.775 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 22:58:45.798 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:58:45.818 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.871 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.871 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.872 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.874 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.874 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.879 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:58:45.908 +03:00 [Information] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 22:58:45.908 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.908 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.938 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:58:45.946 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 22:58:45.966 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:58:45.970 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.970 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.981 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:58:45.983 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 22:58:45.988 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:58:45.988 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.988 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:58:45.993 +03:00 [Debug] Hosting starting
2017-12-18 22:58:46.040 +03:00 [Debug] Hosting started
2017-12-18 22:58:46.040 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 22:58:46.040 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 22:58:46.040 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 22:58:46.227 +03:00 [Debug] Connection id ""0HLA6A6VO8L4B"" started.
2017-12-18 22:58:46.227 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" started.
2017-12-18 22:58:46.247 +03:00 [Debug] Connection id ""0HLA6A6VO8L4B"" reset.
2017-12-18 22:58:46.247 +03:00 [Debug] Connection id ""0HLA6A6VO8L4B"" disconnecting.
2017-12-18 22:58:46.248 +03:00 [Debug] Connection id ""0HLA6A6VO8L4B"" sending FIN.
2017-12-18 22:58:46.251 +03:00 [Debug] Connection id ""0HLA6A6VO8L4B"" stopped.
2017-12-18 22:58:46.288 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 22:58:46.354 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:58:46.420 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:58:46.427 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" completed keep alive response.
2017-12-18 22:58:46.427 +03:00 [Information] Request finished in 140.7291ms 404 
2017-12-18 22:58:46.457 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 22:58:46.458 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 22:58:46.458 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:58:46.458 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" completed keep alive response.
2017-12-18 22:58:46.458 +03:00 [Information] Request finished in 1.6557ms 404 
2017-12-18 22:58:48.894 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?receiver=Marty&body=merhaba  
2017-12-18 22:58:48.970 +03:00 [Information] Successfully validated the token.
2017-12-18 22:58:48.972 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:58:48.974 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:58:48.985 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"560d332c-6c8b-4a0b-ad05-865dda725abe"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 22:58:48.988 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 22:58:48.989 +03:00 [Debug] Request did not match any routes.
2017-12-18 22:58:48.989 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" completed keep alive response.
2017-12-18 22:58:48.989 +03:00 [Information] Request finished in 95.3279ms 404 
2017-12-18 22:59:01.469 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=Marty&body=merhaba  0
2017-12-18 22:59:01.469 +03:00 [Information] Successfully validated the token.
2017-12-18 22:59:01.469 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 22:59:01.469 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 22:59:01.508 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 22:59:01.516 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 22:59:01.555 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "Marty"]) - ModelState is Valid
2017-12-18 22:59:04.664 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 22:59:04.668 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:59:04.670 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 22:59:04.687 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:59:04.687 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.687 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.689 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:59:04.710 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:59:04.730 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:59:04.730 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.731 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.738 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.739 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.739 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:59:04.740 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 22:59:04.740 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:59:04.740 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.740 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.748 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:59:04.749 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 22:59:04.760 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 22:59:04.760 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.761 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.761 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:59:04.763 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 22:59:04.764 +03:00 [Debug] A data reader was disposed.
2017-12-18 22:59:04.764 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.764 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 22:59:04.765 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 22:59:04.769 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 22:59:04.770 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 22:59:04.770 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 22:59:04.790 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 3279.3532ms
2017-12-18 22:59:04.791 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" completed keep alive response.
2017-12-18 22:59:04.791 +03:00 [Information] Request finished in 3322.0468ms 404 application/json; charset=utf-8
2017-12-18 23:00:15.483 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" received FIN.
2017-12-18 23:00:15.484 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" disconnecting.
2017-12-18 23:00:15.484 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" started.
2017-12-18 23:00:15.484 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" sending FIN.
2017-12-18 23:00:15.485 +03:00 [Debug] Connection id ""0HLA6A6VO8L4C"" stopped.
2017-12-18 23:00:15.486 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=ilkercig&body=merhaba  0
2017-12-18 23:00:15.486 +03:00 [Information] Successfully validated the token.
2017-12-18 23:00:15.486 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:00:15.486 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:00:15.487 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:00:15.487 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:00:15.491 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "ilkercig"]) - ModelState is Valid
2017-12-18 23:00:15.491 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:00:15.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.499 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.499 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:15.501 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:15.501 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:15.501 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.501 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.501 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.501 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.501 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:15.503 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:15.503 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:15.503 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.503 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.504 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.504 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.504 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:15.506 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:15.506 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:15.506 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.506 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:15.506 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.NotFoundObjectResult".
2017-12-18 23:00:15.507 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:00:15.507 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:00:15.507 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:00:15.507 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 20.2532ms
2017-12-18 23:00:15.507 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:00:15.509 +03:00 [Information] Request finished in 21.5975ms 404 application/json; charset=utf-8
2017-12-18 23:00:49.487 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=zatsu&body=merhaba  0
2017-12-18 23:00:49.488 +03:00 [Information] Successfully validated the token.
2017-12-18 23:00:49.488 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:00:49.488 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:00:49.488 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:00:49.488 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:00:49.488 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "zatsu"]) - ModelState is Valid
2017-12-18 23:00:49.488 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:00:49.489 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.489 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.489 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.490 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.490 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:49.490 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.490 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.491 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.491 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:49.491 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.491 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.492 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:49.493 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:49.493 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:49.493 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.493 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.493 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.493 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.494 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.494 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:49.494 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:49.494 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.494 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.544 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.544 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.546 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:00:49.567 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:00:49.574 +03:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:00:49.580 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:49.582 +03:00 [Debug] Committing transaction.
2017-12-18 23:00:49.582 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.582 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:49.582 +03:00 [Debug] Disposing transaction.
2017-12-18 23:00:49.584 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:00:49.584 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:00:49.584 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:00:49.584 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:00:49.591 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 103.3611ms
2017-12-18 23:00:49.591 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:00:49.592 +03:00 [Information] Request finished in 104.2824ms 200 application/json; charset=utf-8
2017-12-18 23:00:52.490 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=zatsu&body=merhaba  0
2017-12-18 23:00:52.490 +03:00 [Information] Successfully validated the token.
2017-12-18 23:00:52.490 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:00:52.490 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:00:52.490 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:00:52.490 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:00:52.490 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "zatsu"]) - ModelState is Valid
2017-12-18 23:00:52.491 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:00:52.491 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.491 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.491 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.492 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.493 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:52.493 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.493 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.493 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.493 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.493 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.493 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.493 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:52.493 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.493 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.494 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.494 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.494 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:52.495 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:00:52.495 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:52.495 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.495 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.496 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.496 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.496 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.496 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:00:52.496 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:52.496 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.496 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.498 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.498 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.498 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:00:52.499 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:00:52.501 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:00:52.502 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:00:52.502 +03:00 [Debug] Committing transaction.
2017-12-18 23:00:52.502 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.502 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:00:52.502 +03:00 [Debug] Disposing transaction.
2017-12-18 23:00:52.502 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:00:52.502 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:00:52.502 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:00:52.502 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:00:52.503 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 12.4897ms
2017-12-18 23:00:52.503 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:00:52.503 +03:00 [Information] Request finished in 13.1683ms 200 application/json; charset=utf-8
2017-12-18 23:01:03.179 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=zatsu&body=  0
2017-12-18 23:01:03.180 +03:00 [Information] Successfully validated the token.
2017-12-18 23:01:03.180 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:01:03.180 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:01:03.180 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:01:03.180 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:01:03.180 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["", "zatsu"]) - ModelState is Valid
2017-12-18 23:01:03.180 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 23:01:03.183 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 23:01:03.183 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 2.8943ms
2017-12-18 23:01:03.183 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:01:03.183 +03:00 [Information] Request finished in 3.5545ms 400 
2017-12-18 23:01:51.896 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=zatsu&body=helle  0
2017-12-18 23:01:51.896 +03:00 [Information] Successfully validated the token.
2017-12-18 23:01:51.896 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:01:51.896 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:01:51.896 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:01:51.896 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:01:51.896 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["helle", "zatsu"]) - ModelState is Valid
2017-12-18 23:01:51.897 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:01:51.897 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.897 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.897 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.899 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.899 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:01:51.899 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.899 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.899 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.899 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.899 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.901 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.901 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:01:51.901 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.901 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.901 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.901 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.901 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:01:51.903 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:01:51.904 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:01:51.904 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.904 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.904 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.904 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.904 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.906 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:01:51.906 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:01:51.906 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.906 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.906 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.906 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.907 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:01:51.907 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:01:51.909 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:01:51.909 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:01:51.911 +03:00 [Debug] Committing transaction.
2017-12-18 23:01:51.911 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.911 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:01:51.911 +03:00 [Debug] Disposing transaction.
2017-12-18 23:01:51.911 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:01:51.911 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:01:51.911 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:01:51.911 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:01:51.911 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 15.2467ms
2017-12-18 23:01:51.912 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:01:51.912 +03:00 [Information] Request finished in 16.017ms 200 application/json; charset=utf-8
2017-12-18 23:02:15.715 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/view?messageId=5018  0
2017-12-18 23:02:15.715 +03:00 [Information] Successfully validated the token.
2017-12-18 23:02:15.715 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:02:15.715 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view"'.
2017-12-18 23:02:15.715 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)"' with id '"fe33e98c-0f05-4920-90a5-ddc4f80ea209"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 23:02:15.715 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 23:02:15.715 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:02:15.716 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:02:15.716 +03:00 [Information] Request finished in 0.6789ms 404 
2017-12-18 23:02:21.716 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view?messageId=5018  
2017-12-18 23:02:21.716 +03:00 [Information] Successfully validated the token.
2017-12-18 23:02:21.716 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:02:21.716 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view"'.
2017-12-18 23:02:21.718 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)"
2017-12-18 23:02:21.718 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:02:21.719 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)" with arguments (["5018"]) - ModelState is Valid
2017-12-18 23:02:21.719 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:02:21.726 +03:00 [Debug] Compiling query model: "
"'"(from Message e in DbSet<Message>
where Property([e], \"MessageID\") == __get_Item_0
select [e]).FirstOrDefault()"'
2017-12-18 23:02:21.729 +03:00 [Debug] Optimized query model: "
"'"(from Message e in DbSet<Message>
where Property([e], \"MessageID\") == __get_Item_0
select [e]).FirstOrDefault()"'
2017-12-18 23:02:21.734 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ToSequence(Message FirstOrDefault(IEnumerable<Message> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(1) [e].[MessageID], [e].[Body], [e].[Read], [e].[ReceiveTime], [e].[ReceiverId], [e].[SenderId], [e].[SentTime]
                        FROM [Message] AS [e]
                        WHERE [e].[MessageID] = @__get_Item_0, 
                    shaper: BufferedEntityShaper<Message>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:02:21.734 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.734 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.734 +03:00 [Debug] Executing DbCommand [Parameters=["@__get_Item_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[MessageID], [e].[Body], [e].[Read], [e].[ReceiveTime], [e].[ReceiverId], [e].[SenderId], [e].[SentTime]
FROM [Message] AS [e]
WHERE [e].[MessageID] = @__get_Item_0"
2017-12-18 23:02:21.752 +03:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__get_Item_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[MessageID], [e].[Body], [e].[Read], [e].[ReceiveTime], [e].[ReceiverId], [e].[SenderId], [e].[SentTime]
FROM [Message] AS [e]
WHERE [e].[MessageID] = @__get_Item_0"
2017-12-18 23:02:21.758 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:02:21.758 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.758 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.759 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.759 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.759 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:02:21.761 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:02:21.761 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:02:21.761 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.761 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.766 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.766 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.766 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:02:21.766 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:02:21.767 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:02:21.767 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.767 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:02:21.767 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:02:21.767 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:02:21.767 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 23:02:21.767 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:02:21.767 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)" in 48.7757ms
2017-12-18 23:02:21.767 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" completed keep alive response.
2017-12-18 23:02:21.767 +03:00 [Information] Request finished in 51.553ms 200 text/plain; charset=utf-8
2017-12-18 23:04:16.214 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" received FIN.
2017-12-18 23:04:16.214 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" disconnecting.
2017-12-18 23:04:16.214 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" sending FIN.
2017-12-18 23:04:16.214 +03:00 [Debug] Connection id ""0HLA6A6VO8L4D"" stopped.
2017-12-18 23:04:52.352 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" started.
2017-12-18 23:04:52.353 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=zatsu&password=132123ds  
2017-12-18 23:04:52.353 +03:00 [Information] Successfully validated the token.
2017-12-18 23:04:52.353 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:04:52.353 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 23:04:52.355 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 23:04:52.355 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["zatsu", "132123ds"]) - ModelState is Valid
2017-12-18 23:04:52.356 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:04:52.357 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:04:52.357 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:04:52.357 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:04:52.359 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:04:52.359 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:04:52.359 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:04:52.359 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:04:52.377 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:04:52.377 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:04:52.378 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 23:04:52.378 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:04:52.378 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 22.6429ms
2017-12-18 23:04:52.378 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" completed keep alive response.
2017-12-18 23:04:52.379 +03:00 [Information] Request finished in 25.8596ms 200 text/plain; charset=utf-8
2017-12-18 23:05:23.208 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view?messageId=5018  
2017-12-18 23:05:23.208 +03:00 [Information] Successfully validated the token.
2017-12-18 23:05:23.208 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:05:23.208 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view"'.
2017-12-18 23:05:23.208 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)"
2017-12-18 23:05:23.208 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:05:23.208 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)" with arguments (["5018"]) - ModelState is Valid
2017-12-18 23:05:23.209 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:05:23.209 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.210 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.210 +03:00 [Debug] Executing DbCommand [Parameters=["@__get_Item_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[MessageID], [e].[Body], [e].[Read], [e].[ReceiveTime], [e].[ReceiverId], [e].[SenderId], [e].[SentTime]
FROM [Message] AS [e]
WHERE [e].[MessageID] = @__get_Item_0"
2017-12-18 23:05:23.211 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__get_Item_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[MessageID], [e].[Body], [e].[Read], [e].[ReceiveTime], [e].[ReceiverId], [e].[SenderId], [e].[SentTime]
FROM [Message] AS [e]
WHERE [e].[MessageID] = @__get_Item_0"
2017-12-18 23:05:23.211 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:05:23.211 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.211 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.211 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.211 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.212 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:05:23.213 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:05:23.213 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:05:23.213 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.213 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.217 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.217 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.218 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:05:23.223 +03:00 [Debug] Executing DbCommand [Parameters=["@p6='?', @p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Body] = @p0, [Read] = @p1, [ReceiveTime] = @p2, [ReceiverId] = @p3, [SenderId] = @p4, [SentTime] = @p5
WHERE [MessageID] = @p6;
SELECT @@ROWCOUNT;"
2017-12-18 23:05:23.275 +03:00 [Information] Executed DbCommand ("51"ms) [Parameters=["@p6='?', @p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Body] = @p0, [Read] = @p1, [ReceiveTime] = @p2, [ReceiverId] = @p3, [SenderId] = @p4, [SentTime] = @p5
WHERE [MessageID] = @p6;
SELECT @@ROWCOUNT;"
2017-12-18 23:05:23.275 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:05:23.275 +03:00 [Debug] Committing transaction.
2017-12-18 23:05:23.276 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.276 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:05:23.276 +03:00 [Debug] Disposing transaction.
2017-12-18 23:05:23.276 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:05:23.276 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:05:23.276 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 23:05:23.276 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:05:23.276 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewMessage (Armut.Sample.Messaging)" in 67.7334ms
2017-12-18 23:05:23.276 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" completed keep alive response.
2017-12-18 23:05:23.276 +03:00 [Information] Request finished in 68.3821ms 200 text/plain; charset=utf-8
2017-12-18 23:06:40.278 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" received FIN.
2017-12-18 23:06:40.278 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" disconnecting.
2017-12-18 23:06:40.278 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" sending FIN.
2017-12-18 23:06:40.279 +03:00 [Debug] Connection id ""0HLA6A6VO8L4E"" stopped.
2017-12-18 23:06:40.279 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" started.
2017-12-18 23:06:40.279 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread  
2017-12-18 23:06:40.279 +03:00 [Information] Successfully validated the token.
2017-12-18 23:06:40.279 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:06:40.280 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 23:06:40.281 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:06:40.282 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:06:40.282 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 23:06:40.283 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 23:06:40.283 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 23:06:40.283 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 1.6361ms
2017-12-18 23:06:40.283 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" completed keep alive response.
2017-12-18 23:06:40.283 +03:00 [Information] Request finished in 4.0629ms 400 
2017-12-18 23:06:56.562 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 23:06:56.563 +03:00 [Information] Successfully validated the token.
2017-12-18 23:06:56.563 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:06:56.563 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 23:06:56.563 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:06:56.563 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:06:56.563 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 23:06:56.564 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:06:56.564 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.565 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.567 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:06:56.568 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:06:56.568 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:06:56.568 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.568 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.569 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.569 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.569 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:06:56.569 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:06:56.569 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:06:56.569 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.569 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.575 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:06:56.576 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:06:56.581 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
            FROM [Message] AS [l]
            WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
            ORDER BY [l].[SentTime], 
        shaper: TypedProjectionShaper<ValueBufferShaper, ValueBuffer, Message>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:06:56.581 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.581 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.581 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:06:56.601 +03:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:06:56.602 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:06:56.602 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.602 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.602 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:06:56.603 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:06:56.605 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:06:56.605 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.605 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.605 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:06:56.610 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:06:56.611 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:06:56.611 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.611 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.611 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.611 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.611 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:06:56.613 +03:00 [Debug] Executing DbCommand [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;"
2017-12-18 23:06:56.616 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p2='?', @p0='?', @p1='?', @p5='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [Read] = @p0, [ReceiveTime] = @p1
WHERE [MessageID] = @p2;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [Read] = @p3, [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;"
2017-12-18 23:06:56.616 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:06:56.616 +03:00 [Debug] Committing transaction.
2017-12-18 23:06:56.616 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.616 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:06:56.616 +03:00 [Debug] Disposing transaction.
2017-12-18 23:06:56.617 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:06:56.617 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:06:56.617 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:06:56.617 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:06:56.619 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 56.4074ms
2017-12-18 23:06:56.619 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" completed keep alive response.
2017-12-18 23:06:56.620 +03:00 [Information] Request finished in 57.3197ms 200 application/json; charset=utf-8
2017-12-18 23:08:20.647 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" received FIN.
2017-12-18 23:08:20.647 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" disconnecting.
2017-12-18 23:08:20.647 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" sending FIN.
2017-12-18 23:08:20.647 +03:00 [Debug] Connection id ""0HLA6A6VO8L4G"" started.
2017-12-18 23:08:20.647 +03:00 [Debug] Connection id ""0HLA6A6VO8L4F"" stopped.
2017-12-18 23:08:20.649 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender  
2017-12-18 23:08:20.649 +03:00 [Information] Successfully validated the token.
2017-12-18 23:08:20.649 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:08:20.649 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 23:08:20.650 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:08:20.650 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:08:20.650 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 23:08:20.650 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 23:08:20.650 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 23:08:20.650 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 0.3643ms
2017-12-18 23:08:20.650 +03:00 [Debug] Connection id ""0HLA6A6VO8L4G"" completed keep alive response.
2017-12-18 23:08:20.650 +03:00 [Information] Request finished in 2.302ms 400 
2017-12-18 23:09:51.043 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 23:09:51.088 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 23:09:51.095 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 23:09:51.103 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 23:09:51.107 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:09:51.107 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 23:09:51.108 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:09:51.109 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 23:09:51.111 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 23:09:51.114 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 23:09:51.115 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 23:09:51.352 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 23:09:51.473 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 23:09:51.495 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:09:51.516 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.582 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.582 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.583 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.585 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.586 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.591 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:09:51.612 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:09:51.612 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.612 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.638 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:09:51.646 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:09:51.666 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:09:51.670 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.670 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.683 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:09:51.684 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:09:51.689 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:09:51.689 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.689 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:09:51.694 +03:00 [Debug] Hosting starting
2017-12-18 23:09:51.742 +03:00 [Debug] Hosting started
2017-12-18 23:09:51.742 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 23:09:51.742 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 23:09:51.742 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 23:09:51.946 +03:00 [Debug] Connection id ""0HLA6AD65272J"" started.
2017-12-18 23:09:51.946 +03:00 [Debug] Connection id ""0HLA6AD65272K"" started.
2017-12-18 23:09:51.968 +03:00 [Debug] Connection id ""0HLA6AD65272K"" reset.
2017-12-18 23:09:51.968 +03:00 [Debug] Connection id ""0HLA6AD65272K"" disconnecting.
2017-12-18 23:09:51.993 +03:00 [Debug] Connection id ""0HLA6AD65272K"" sending FIN.
2017-12-18 23:09:52.001 +03:00 [Debug] Connection id ""0HLA6AD65272K"" stopped.
2017-12-18 23:09:52.029 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 23:09:52.084 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:09:52.152 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:09:52.159 +03:00 [Debug] Connection id ""0HLA6AD65272J"" completed keep alive response.
2017-12-18 23:09:52.159 +03:00 [Information] Request finished in 132.1667ms 404 
2017-12-18 23:09:52.186 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 23:09:52.186 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:09:52.186 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:09:52.186 +03:00 [Debug] Connection id ""0HLA6AD65272J"" completed keep alive response.
2017-12-18 23:09:52.186 +03:00 [Information] Request finished in 0.6798ms 404 
2017-12-18 23:10:04.257 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender  
2017-12-18 23:10:04.330 +03:00 [Information] Successfully validated the token.
2017-12-18 23:10:04.333 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:10:04.334 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 23:10:04.391 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:10:04.398 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:10:04.428 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments ([""]) - ModelState is Valid
2017-12-18 23:10:04.429 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.BadRequestResult".
2017-12-18 23:10:04.433 +03:00 [Information] Executing HttpStatusCodeResult, setting HTTP status code 400
2017-12-18 23:10:04.436 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 42.4458ms
2017-12-18 23:10:04.438 +03:00 [Debug] Connection id ""0HLA6AD65272J"" completed keep alive response.
2017-12-18 23:10:04.439 +03:00 [Information] Request finished in 181.2755ms 400 
2017-12-18 23:10:34.672 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/all?sender=rick  
2017-12-18 23:10:34.672 +03:00 [Information] Successfully validated the token.
2017-12-18 23:10:34.673 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:10:34.673 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/all"'.
2017-12-18 23:10:34.675 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewAllMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:10:34.675 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:10:34.685 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewAllMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 23:10:34.687 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:10:34.694 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:10:34.696 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:10:34.713 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:10:34.713 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.713 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.715 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:34.738 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:34.760 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:34.761 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.761 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.768 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.768 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.768 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:34.769 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:34.769 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:34.769 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.769 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.777 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where True && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:10:34.779 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where True && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:10:34.786 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
            FROM [Message] AS [l]
            WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
            ORDER BY [l].[SentTime], 
        shaper: TypedProjectionShaper<ValueBufferShaper, ValueBuffer, Message>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:10:34.786 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.787 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.787 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:34.795 +03:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:34.798 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:34.798 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.798 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.798 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where True && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:10:34.799 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where True && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:10:34.802 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:10:34.802 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.802 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.802 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:34.820 +03:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE ([l].[SenderId] = @__senderId_0) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:34.835 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:34.835 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.835 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.852 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.852 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.853 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:10:34.870 +03:00 [Debug] Executing DbCommand [Parameters=["@p1='?', @p0='?', @p3='?', @p2='?', @p5='?', @p4='?', @p7='?', @p6='?', @p9='?', @p8='?', @p11='?', @p10='?', @p13='?', @p12='?', @p15='?', @p14='?', @p17='?', @p16='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [ReceiveTime] = @p0
WHERE [MessageID] = @p1;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p2
WHERE [MessageID] = @p3;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p6
WHERE [MessageID] = @p7;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p8
WHERE [MessageID] = @p9;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p10
WHERE [MessageID] = @p11;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p12
WHERE [MessageID] = @p13;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p14
WHERE [MessageID] = @p15;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p16
WHERE [MessageID] = @p17;
SELECT @@ROWCOUNT;"
2017-12-18 23:10:34.886 +03:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p1='?', @p0='?', @p3='?', @p2='?', @p5='?', @p4='?', @p7='?', @p6='?', @p9='?', @p8='?', @p11='?', @p10='?', @p13='?', @p12='?', @p15='?', @p14='?', @p17='?', @p16='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Message] SET [ReceiveTime] = @p0
WHERE [MessageID] = @p1;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p2
WHERE [MessageID] = @p3;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p4
WHERE [MessageID] = @p5;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p6
WHERE [MessageID] = @p7;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p8
WHERE [MessageID] = @p9;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p10
WHERE [MessageID] = @p11;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p12
WHERE [MessageID] = @p13;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p14
WHERE [MessageID] = @p15;
SELECT @@ROWCOUNT;

UPDATE [Message] SET [ReceiveTime] = @p16
WHERE [MessageID] = @p17;
SELECT @@ROWCOUNT;"
2017-12-18 23:10:34.887 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:34.888 +03:00 [Debug] Committing transaction.
2017-12-18 23:10:34.888 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.888 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:34.888 +03:00 [Debug] Disposing transaction.
2017-12-18 23:10:34.890 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewAllMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:10:34.893 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:10:34.894 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:10:34.894 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:10:34.919 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewAllMessagesBySender (Armut.Sample.Messaging)" in 243.9323ms
2017-12-18 23:10:34.920 +03:00 [Debug] Connection id ""0HLA6AD65272J"" completed keep alive response.
2017-12-18 23:10:34.920 +03:00 [Information] Request finished in 248.2711ms 200 application/json; charset=utf-8
2017-12-18 23:10:44.563 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/view/unread?sender=rick  
2017-12-18 23:10:44.563 +03:00 [Information] Successfully validated the token.
2017-12-18 23:10:44.563 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:10:44.563 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/view/unread"'.
2017-12-18 23:10:44.563 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)"
2017-12-18 23:10:44.563 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:10:44.564 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" with arguments (["rick"]) - ModelState is Valid
2017-12-18 23:10:44.564 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:10:44.564 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.564 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.564 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:44.565 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:44.565 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:44.565 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.565 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.565 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.565 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.565 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:44.565 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:10:44.565 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:44.565 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.566 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.566 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:10:44.567 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select new Message{ 
    Body = [l].Body, 
    ReceiverId = [l].ReceiverId, 
    SenderId = [l].SenderId, 
    SentTime = [l].SentTime 
}
"'
2017-12-18 23:10:44.569 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
            FROM [Message] AS [l]
            WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
            ORDER BY [l].[SentTime], 
        shaper: TypedProjectionShaper<ValueBufferShaper, ValueBuffer, Message>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:10:44.570 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.570 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.570 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:44.573 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[Body], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:44.574 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:44.574 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.574 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.574 +03:00 [Debug] Compiling query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:10:44.575 +03:00 [Debug] Optimized query model: "
"'"from Message l in DbSet<Message>
where False || !([l].Read) && [l].SenderId == __senderId_0 && [l].ReceiverId == [l].ReceiverId
order by [l].SentTime asc
select [l]"'
2017-12-18 23:10:44.577 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<Message> _InterceptExceptions(
    source: IEnumerable<Message> _TrackEntities(
        results: IEnumerable<Message> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
                FROM [Message] AS [l]
                WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
                ORDER BY [l].[SentTime], 
            shaper: UnbufferedEntityShaper<Message>), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: Message }, 
        entityAccessors: List<Func<Message, object>> 
        { 
            Func<Message, Message>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:10:44.577 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.577 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.577 +03:00 [Debug] Executing DbCommand [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:44.579 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__senderId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [l].[MessageID], [l].[Body], [l].[Read], [l].[ReceiveTime], [l].[ReceiverId], [l].[SenderId], [l].[SentTime]
FROM [Message] AS [l]
WHERE (([l].[Read] = 0) AND ([l].[SenderId] = @__senderId_0)) AND ([l].[ReceiverId] = [l].[ReceiverId])
ORDER BY [l].[SentTime]"
2017-12-18 23:10:44.579 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:10:44.579 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.579 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:10:44.580 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:10:44.580 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:10:44.580 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:10:44.580 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:10:44.580 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.ViewUnreadMessagesBySender (Armut.Sample.Messaging)" in 16.7554ms
2017-12-18 23:10:44.580 +03:00 [Debug] Connection id ""0HLA6AD65272J"" completed keep alive response.
2017-12-18 23:10:44.580 +03:00 [Information] Request finished in 17.5913ms 200 application/json; charset=utf-8
2017-12-18 23:15:51.105 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 23:15:51.139 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 23:15:51.146 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 23:15:51.154 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 23:15:51.156 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:15:51.156 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 23:15:51.157 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:15:51.158 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 23:15:51.160 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 23:15:51.163 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 23:15:51.164 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 23:15:51.369 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 23:15:51.488 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 23:15:51.510 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:15:51.529 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.585 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.585 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.585 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.587 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.588 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.592 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:15:51.616 +03:00 [Information] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:15:51.616 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.616 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.646 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:15:51.655 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:15:51.679 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:15:51.686 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.686 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.701 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:15:51.703 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:15:51.708 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:15:51.708 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.708 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:15:51.714 +03:00 [Debug] Hosting starting
2017-12-18 23:15:51.769 +03:00 [Debug] Hosting started
2017-12-18 23:15:51.769 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 23:15:51.769 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 23:15:51.769 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 23:15:51.809 +03:00 [Debug] Connection id ""0HLA6AGHCVGAN"" started.
2017-12-18 23:15:51.809 +03:00 [Debug] Connection id ""0HLA6AGHCVGAO"" started.
2017-12-18 23:15:51.831 +03:00 [Debug] Connection id ""0HLA6AGHCVGAO"" reset.
2017-12-18 23:15:51.831 +03:00 [Debug] Connection id ""0HLA6AGHCVGAO"" disconnecting.
2017-12-18 23:15:51.832 +03:00 [Debug] Connection id ""0HLA6AGHCVGAO"" sending FIN.
2017-12-18 23:15:51.834 +03:00 [Debug] Connection id ""0HLA6AGHCVGAO"" stopped.
2017-12-18 23:15:51.875 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 23:15:51.936 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:15:52.006 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:15:52.012 +03:00 [Debug] Connection id ""0HLA6AGHCVGAN"" completed keep alive response.
2017-12-18 23:15:52.013 +03:00 [Information] Request finished in 139.7335ms 404 
2017-12-18 23:15:52.047 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 23:15:52.049 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:15:52.049 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:15:52.050 +03:00 [Debug] Connection id ""0HLA6AGHCVGAN"" completed keep alive response.
2017-12-18 23:15:52.051 +03:00 [Information] Request finished in 3.9083ms 404 
2017-12-18 23:16:15.147 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/register?UserName=Yeni&EmailAddress=madrty@gmail.com&Password=131412  
2017-12-18 23:16:15.224 +03:00 [Information] Successfully validated the token.
2017-12-18 23:16:15.227 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:16:15.229 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 23:16:15.239 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"' with id '"a54f92eb-a330-46b1-a72b-a62338bb5fdf"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 23:16:15.243 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 23:16:15.243 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:16:15.243 +03:00 [Debug] Connection id ""0HLA6AGHCVGAN"" completed keep alive response.
2017-12-18 23:16:15.243 +03:00 [Information] Request finished in 96.7171ms 404 
2017-12-18 23:16:31.018 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=Yeni&EmailAddress=madrty@gmail.com&Password=131412  0
2017-12-18 23:16:31.019 +03:00 [Information] Successfully validated the token.
2017-12-18 23:16:31.019 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:16:31.019 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 23:16:31.078 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 23:16:31.120 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:16:31.124 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 23:16:31.125 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 23:16:31.135 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:16:31.135 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.135 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.137 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:16:31.170 +03:00 [Information] Executed DbCommand ("34"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:16:31.171 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:16:31.171 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.171 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.181 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 23:16:31.229 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.230 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.230 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:16:31.245 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 23:16:31.250 +03:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 23:16:31.256 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:16:31.257 +03:00 [Debug] Committing transaction.
2017-12-18 23:16:31.257 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.257 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:16:31.257 +03:00 [Debug] Disposing transaction.
2017-12-18 23:17:29.053 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 23:17:29.088 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 23:17:29.095 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 23:17:29.103 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 23:17:29.105 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:17:29.105 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 23:17:29.106 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:17:29.106 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 23:17:29.108 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 23:17:29.111 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 23:17:29.112 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 23:17:29.383 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 23:17:29.502 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 23:17:29.524 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:17:29.545 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.596 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.596 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.597 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.598 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.599 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.603 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:17:29.625 +03:00 [Information] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:17:29.625 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.625 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.653 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:17:29.661 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:17:29.681 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:17:29.686 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.686 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.697 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:17:29.698 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:17:29.703 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:17:29.703 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.703 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:17:29.707 +03:00 [Debug] Hosting starting
2017-12-18 23:17:29.753 +03:00 [Debug] Hosting started
2017-12-18 23:17:29.753 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 23:17:29.753 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 23:17:29.753 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 23:17:29.933 +03:00 [Debug] Connection id ""0HLA6AHEKOKT4"" started.
2017-12-18 23:17:29.933 +03:00 [Debug] Connection id ""0HLA6AHEKOKT3"" started.
2017-12-18 23:17:29.953 +03:00 [Debug] Connection id ""0HLA6AHEKOKT4"" reset.
2017-12-18 23:17:29.953 +03:00 [Debug] Connection id ""0HLA6AHEKOKT4"" disconnecting.
2017-12-18 23:17:29.954 +03:00 [Debug] Connection id ""0HLA6AHEKOKT4"" sending FIN.
2017-12-18 23:17:29.962 +03:00 [Debug] Connection id ""0HLA6AHEKOKT4"" stopped.
2017-12-18 23:17:29.989 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 23:17:30.038 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:17:30.104 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:17:30.110 +03:00 [Debug] Connection id ""0HLA6AHEKOKT3"" completed keep alive response.
2017-12-18 23:17:30.110 +03:00 [Information] Request finished in 123.2756ms 404 
2017-12-18 23:17:30.138 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 23:17:30.138 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:17:30.138 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:17:30.140 +03:00 [Debug] Connection id ""0HLA6AHEKOKT3"" completed keep alive response.
2017-12-18 23:17:30.140 +03:00 [Information] Request finished in 1.7777ms 404 
2017-12-18 23:18:23.520 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=Yeni&EmailAddress=madrty@gmail.com&Password=131412  0
2017-12-18 23:18:23.592 +03:00 [Information] Successfully validated the token.
2017-12-18 23:18:23.594 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:18:23.596 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 23:18:23.654 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 23:18:23.700 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:18:23.704 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 23:18:23.708 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __user_UserName_0 || [u].EmailAddress == __user_EmailAddress_1
select [u]).Any()"'
2017-12-18 23:18:23.718 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u]
                            WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:18:23.718 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:23.718 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:23.720 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:18:23.744 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:18:23.745 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:18:23.745 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:23.745 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:23.753 +03:00 [Debug] Request was short circuited at action filter '"Armut.Sample.Messaging.Filters.ValidationActionFilterAttribute"'.
2017-12-18 23:18:23.761 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:18:23.761 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:18:23.761 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:18:23.785 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 129.1525ms
2017-12-18 23:18:23.786 +03:00 [Debug] Connection id ""0HLA6AHEKOKT3"" completed keep alive response.
2017-12-18 23:18:23.786 +03:00 [Information] Request finished in 266.4961ms 400 application/json; charset=utf-8
2017-12-18 23:18:33.573 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/register?UserName=Ye3ni&EmailAddress=m4adrty@gmail.com&Password=131412  0
2017-12-18 23:18:33.573 +03:00 [Information] Successfully validated the token.
2017-12-18 23:18:33.574 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:18:33.574 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/register"'.
2017-12-18 23:18:33.574 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)"
2017-12-18 23:18:33.582 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:18:33.583 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.583 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.583 +03:00 [Debug] Executing DbCommand [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:18:33.584 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_UserName_0='?' (Size = 100), @__user_EmailAddress_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE ([u].[UserName] = @__user_UserName_0) OR ([u].[EmailAddress] = @__user_EmailAddress_1))
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:18:33.584 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:18:33.584 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.584 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.590 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" with arguments (["Armut.Sample.Messaging.Model.User"]) - ModelState is Valid
2017-12-18 23:18:33.632 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.632 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.634 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:18:33.650 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 23:18:33.652 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [User] ([EmailAddress], [Password], [UserName])
VALUES (@p0, @p1, @p2);
SELECT [UserID]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [UserID] = scope_identity();"
2017-12-18 23:18:33.657 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:18:33.658 +03:00 [Debug] Committing transaction.
2017-12-18 23:18:33.658 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.658 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:18:33.658 +03:00 [Debug] Disposing transaction.
2017-12-18 23:18:33.659 +03:00 [Information] User Registered with Id: 3012
2017-12-18 23:18:33.660 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:18:33.660 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:18:33.662 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:18:33.662 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:18:33.668 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Register (Armut.Sample.Messaging)" in 93.354ms
2017-12-18 23:18:33.668 +03:00 [Debug] Connection id ""0HLA6AHEKOKT3"" completed keep alive response.
2017-12-18 23:18:33.668 +03:00 [Information] Request finished in 94.7589ms 200 application/json; charset=utf-8
2017-12-18 23:20:47.888 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 23:20:47.933 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 23:20:47.939 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 23:20:47.948 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 23:20:47.950 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:20:47.950 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 23:20:47.951 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:20:47.951 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 23:20:47.953 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 23:20:47.956 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 23:20:47.957 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 23:20:48.179 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 23:20:48.304 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 23:20:48.329 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:20:48.348 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.400 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.401 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.401 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.403 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.403 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.408 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:20:48.429 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:20:48.429 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.429 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.463 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:20:48.470 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:20:48.491 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:20:48.495 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.495 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.506 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:20:48.507 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:20:48.512 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:20:48.512 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.512 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:20:48.516 +03:00 [Debug] Hosting starting
2017-12-18 23:20:48.562 +03:00 [Debug] Hosting started
2017-12-18 23:20:48.562 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 23:20:48.562 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 23:20:48.562 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 23:20:48.689 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIP"" started.
2017-12-18 23:20:48.689 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIO"" started.
2017-12-18 23:20:48.712 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIO"" reset.
2017-12-18 23:20:48.712 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIO"" disconnecting.
2017-12-18 23:20:48.717 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIO"" sending FIN.
2017-12-18 23:20:48.723 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIO"" stopped.
2017-12-18 23:20:48.750 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 23:20:48.811 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:20:48.892 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:20:48.902 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIP"" completed keep alive response.
2017-12-18 23:20:48.903 +03:00 [Information] Request finished in 154.0172ms 404 
2017-12-18 23:20:48.936 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 23:20:48.936 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:20:48.937 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:20:48.937 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIP"" completed keep alive response.
2017-12-18 23:20:48.938 +03:00 [Information] Request finished in 1.9664ms 404 
2017-12-18 23:20:56.817 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/user/login?UserName=Marty&password=131412  0
2017-12-18 23:20:56.875 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InphdHN1IiwiZXhwIjoxNTEzNjI4MDkyLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.ojx6vHpyM1uTPEG7SFDMKBwA4LtQvpYtZCqvChtUzCM".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:20:56'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 23:20:56.900 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:20:56'."
2017-12-18 23:20:56.902 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 23:20:56.913 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"' with id '"1e0c8c9a-0348-433c-8fdc-2c3d9c5faad8"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 23:20:56.917 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 23:20:56.918 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:20:56.918 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIP"" completed keep alive response.
2017-12-18 23:20:56.919 +03:00 [Information] Request finished in 101.8094ms 404 
2017-12-18 23:21:03.067 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 23:21:03.068 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InphdHN1IiwiZXhwIjoxNTEzNjI4MDkyLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.ojx6vHpyM1uTPEG7SFDMKBwA4LtQvpYtZCqvChtUzCM".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:21:03'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 23:21:03.069 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:21:03'."
2017-12-18 23:21:03.069 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 23:21:03.108 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 23:21:03.149 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 23:21:03.155 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:21:03.160 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:21:03.162 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:21:03.179 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:21:03.180 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:21:03.180 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:21:03.182 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:21:03.205 +03:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:21:03.232 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:21:03.232 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:21:03.232 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:21:03.253 +03:00 [Information] User Logged in with Id: 2011
2017-12-18 23:21:03.269 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:21:03.274 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:21:03.275 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 23:21:03.275 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:21:03.288 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 177.8115ms
2017-12-18 23:21:03.289 +03:00 [Debug] Connection id ""0HLA6AJ9S7TIP"" completed keep alive response.
2017-12-18 23:21:03.289 +03:00 [Information] Request finished in 222.0706ms 200 text/plain; charset=utf-8
2017-12-18 23:30:07.620 +03:00 [Information] User profile is available. Using '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2017-12-18 23:30:07.663 +03:00 [Debug] Reading data from file '"C:\Users\ilker\AppData\Local\ASP.NET\DataProtection-Keys\key-3c6a002c-337b-483d-8e48-19244a8bde3c.xml"'.
2017-12-18 23:30:07.671 +03:00 [Debug] Found key {3c6a002c-337b-483d-8e48-19244a8bde3c}.
2017-12-18 23:30:07.681 +03:00 [Debug] Considering key {3c6a002c-337b-483d-8e48-19244a8bde3c} with expiration date 2018-03-13 17:54:12Z as default key.
2017-12-18 23:30:07.683 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:30:07.683 +03:00 [Debug] Decrypting secret element using Windows DPAPI.
2017-12-18 23:30:07.684 +03:00 [Debug] Forwarded activator type request from "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60" to "Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60"
2017-12-18 23:30:07.685 +03:00 [Debug] Opening CNG algorithm '"AES"' from provider 'null' with chaining mode CBC.
2017-12-18 23:30:07.687 +03:00 [Debug] Opening CNG algorithm '"SHA256"' from provider 'null' with HMAC.
2017-12-18 23:30:07.690 +03:00 [Debug] Using key {3c6a002c-337b-483d-8e48-19244a8bde3c} as the default key.
2017-12-18 23:30:07.690 +03:00 [Debug] Key ring with default key {3c6a002c-337b-483d-8e48-19244a8bde3c} was loaded during application startup.
2017-12-18 23:30:07.916 +03:00 [Debug] An 'IServiceProvider' was created for internal use by Entity Framework.
2017-12-18 23:30:08.039 +03:00 [Warning] The 'bool' property '"Read"' on entity type '"Message"' is configured with a database-generated default. This default will always be used when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead so that the default will only be used when the property value is 'null'.
2017-12-18 23:30:08.067 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:30:08.089 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.139 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.139 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.140 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.141 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.142 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.146 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:30:08.166 +03:00 [Information] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0"
2017-12-18 23:30:08.167 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.167 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.199 +03:00 [Debug] Compiling query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:30:08.207 +03:00 [Debug] Optimized query model: "
"'"(from User <generated>_1 in DbSet<User>
select [<generated>_1]).Any()"'
2017-12-18 23:30:08.234 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<bool> _InterceptExceptions(
    source: IEnumerable<bool> _ToSequence(bool GetResult(
            valueBuffers: IEnumerable<ValueBuffer> _Query(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT CASE
                        WHEN EXISTS (
                            SELECT 1
                            FROM [User] AS [u])
                        THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
                    END), 
            throwOnNullResult: False)), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:30:08.238 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.238 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.251 +03:00 [Debug] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:30:08.253 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END"
2017-12-18 23:30:08.258 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:08.259 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.259 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:08.266 +03:00 [Debug] Hosting starting
2017-12-18 23:30:08.335 +03:00 [Debug] Hosting started
2017-12-18 23:30:08.335 +03:00 [Debug] Loaded hosting startup assembly "Armut.Sample.Messaging"
2017-12-18 23:30:08.335 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.Server.IISIntegration"
2017-12-18 23:30:08.335 +03:00 [Debug] Loaded hosting startup assembly "Microsoft.AspNetCore.ApplicationInsights.HostingStartup"
2017-12-18 23:30:08.479 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" started.
2017-12-18 23:30:08.479 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O4"" started.
2017-12-18 23:30:08.503 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O4"" reset.
2017-12-18 23:30:08.504 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O4"" disconnecting.
2017-12-18 23:30:08.505 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O4"" sending FIN.
2017-12-18 23:30:08.518 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O4"" stopped.
2017-12-18 23:30:08.558 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/values  
2017-12-18 23:30:08.623 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:30:08.693 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:30:08.703 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" completed keep alive response.
2017-12-18 23:30:08.704 +03:00 [Information] Request finished in 147.8672ms 404 
2017-12-18 23:30:08.748 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/favicon.ico  
2017-12-18 23:30:08.750 +03:00 [Debug] AuthenticationScheme: "Bearer" was not authenticated.
2017-12-18 23:30:08.751 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:30:08.751 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" completed keep alive response.
2017-12-18 23:30:08.751 +03:00 [Information] Request finished in 3.1699ms 404 
2017-12-18 23:30:18.079 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/user/login?UserName=Marty&password=131412  
2017-12-18 23:30:18.143 +03:00 [Information] Failed to validate the token "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InphdHN1IiwiZXhwIjoxNTEzNjI4MDkyLCJpc3MiOiJBcm11dC5TYW1wbGUuTWVzc2FnaW5nIiwiYXVkIjoiQXJtdXQuU2FtcGxlLk1lc3NhZ2luZyJ9.ojx6vHpyM1uTPEG7SFDMKBwA4LtQvpYtZCqvChtUzCM".
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:30:18'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2017-12-18 23:30:18.175 +03:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/18/2017 20:14:52', Current time: '12/18/2017 20:30:18'."
2017-12-18 23:30:18.176 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/User/login"'.
2017-12-18 23:30:18.221 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)"
2017-12-18 23:30:18.256 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" with arguments (["Marty", "131412"]) - ModelState is Valid
2017-12-18 23:30:18.260 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:30:18.267 +03:00 [Debug] Compiling query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:30:18.269 +03:00 [Debug] Optimized query model: "
"'"(from User u in DbSet<User>
where [u].UserName == __username_0
select [u]).SingleOrDefault()"'
2017-12-18 23:30:18.295 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _TrackEntities(
        results: IEnumerable<User> _ToSequence(User SingleOrDefault(IEnumerable<User> _ShapedQuery(
                    queryContext: queryContext, 
                    shaperCommandContext: SelectExpression: 
                        SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
                        FROM [User] AS [u]
                        WHERE [u].[UserName] = @__username_0, 
                    shaper: UnbufferedEntityShaper<User>))), 
        queryContext: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:30:18.296 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:18.296 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:18.299 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:18.328 +03:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:18.358 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:18.358 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:18.359 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:18.381 +03:00 [Information] User Logged in with Id: 2011
2017-12-18 23:30:18.395 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:30:18.399 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:30:18.399 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
2017-12-18 23:30:18.400 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:30:18.412 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.UserController.Login (Armut.Sample.Messaging)" in 188.2282ms
2017-12-18 23:30:18.413 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" completed keep alive response.
2017-12-18 23:30:18.413 +03:00 [Information] Request finished in 333.5464ms 200 text/plain; charset=utf-8
2017-12-18 23:30:40.941 +03:00 [Information] Request starting HTTP/1.1 GET http://localhost:42775/api/message/send?receiver=rick&body=merhaba  
2017-12-18 23:30:40.950 +03:00 [Information] Successfully validated the token.
2017-12-18 23:30:40.951 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:30:40.952 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:30:40.952 +03:00 [Debug] Action '"Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"' with id '"c4bc7e39-732b-43ff-8b59-12a138d97377"' did not match the constraint '"Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint"'
2017-12-18 23:30:40.954 +03:00 [Debug] No actions matched the current request. Route values: []
2017-12-18 23:30:40.954 +03:00 [Debug] Request did not match any routes.
2017-12-18 23:30:40.954 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" completed keep alive response.
2017-12-18 23:30:40.954 +03:00 [Information] Request finished in 12.4761ms 404 
2017-12-18 23:30:51.500 +03:00 [Information] Request starting HTTP/1.1 POST http://localhost:42775/api/message/send?receiver=rick&body=merhaba  0
2017-12-18 23:30:51.501 +03:00 [Information] Successfully validated the token.
2017-12-18 23:30:51.501 +03:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2017-12-18 23:30:51.501 +03:00 [Debug] Request successfully matched the route with name 'null' and template '"api/Message/send"'.
2017-12-18 23:30:51.503 +03:00 [Debug] Executing action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)"
2017-12-18 23:30:51.510 +03:00 [Information] Authorization was successful for user: null.
2017-12-18 23:30:51.511 +03:00 [Information] Executing action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" with arguments (["merhaba", "rick"]) - ModelState is Valid
2017-12-18 23:30:51.513 +03:00 [Information] Entity Framework Core "2.0.1-rtm-125" initialized '"MessagingContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2017-12-18 23:30:51.514 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.514 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.514 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.516 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.516 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.516 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.516 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.517 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.517 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.517 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.519 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.519 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.519 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.519 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.527 +03:00 [Debug] Compiling query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 23:30:51.529 +03:00 [Debug] Optimized query model: "
"'"from Blocking b in DbSet<Blocking>
where [b].UnWantedId == __userId_0
join User u in DbSet<User>
on [b].BlockerId equals [u].UserID
select new User{ 
    UserID = [u].UserID, 
    UserName = [u].UserName, 
    EmailAddress = [u].EmailAddress 
}
"'
2017-12-18 23:30:51.540 +03:00 [Debug] "(QueryContext queryContext) => IEnumerable<User> _InterceptExceptions(
    source: IEnumerable<User> _ShapedQuery(
        queryContext: queryContext, 
        shaperCommandContext: SelectExpression: 
            SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
            FROM [Blocking] AS [b]
            INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
            WHERE [b].[UnWantedId] = @__userId_0, 
        shaper: TypedProjectionShaper<TypedCompositeShaper<ValueBufferShaper, ValueBuffer, ValueBufferShaper, ValueBuffer, TransparentIdentifier<ValueBuffer, ValueBuffer>>, TransparentIdentifier<ValueBuffer, ValueBuffer>, User>), 
    contextType: Armut.Sample.Messaging.Data.MessagingContext, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: queryContext)"
2017-12-18 23:30:51.540 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.540 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.541 +03:00 [Debug] Executing DbCommand [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:30:51.543 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[UserID], [u].[UserName], [u].[EmailAddress]
FROM [Blocking] AS [b]
INNER JOIN [User] AS [u] ON [b].[BlockerId] = [u].[UserID]
WHERE [b].[UnWantedId] = @__userId_0"
2017-12-18 23:30:51.543 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.543 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.543 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.543 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.543 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.543 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.544 +03:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.545 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.545 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.545 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.595 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.596 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.597 +03:00 [Debug] Beginning transaction with isolation level '"ReadCommitted"'.
2017-12-18 23:30:51.613 +03:00 [Debug] Executing DbCommand [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:30:51.615 +03:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 500), @p1='?', @p2='?', @p3='?', @p4='?'"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Message] ([Body], [ReceiveTime], [ReceiverId], [SenderId], [SentTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [MessageID], [Read]
FROM [Message]
WHERE @@ROWCOUNT = 1 AND [MessageID] = scope_identity();"
2017-12-18 23:30:51.620 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.622 +03:00 [Debug] Committing transaction.
2017-12-18 23:30:51.622 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.623 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.623 +03:00 [Debug] Disposing transaction.
2017-12-18 23:30:51.624 +03:00 [Debug] Opening connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.624 +03:00 [Debug] Opened connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.624 +03:00 [Debug] Executing DbCommand [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.625 +03:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__username_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [u].[UserID], [u].[EmailAddress], [u].[Password], [u].[UserName]
FROM [User] AS [u]
WHERE [u].[UserName] = @__username_0"
2017-12-18 23:30:51.625 +03:00 [Debug] A data reader was disposed.
2017-12-18 23:30:51.625 +03:00 [Debug] Closing connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.626 +03:00 [Debug] Closed connection to database '"Armut.Sample.Messaging"' on server '"(localdb)\mssqllocaldb"'.
2017-12-18 23:30:51.626 +03:00 [Information] Message sent to user 2011 
 Message Body: "merhaba" 
 from user 2011
2017-12-18 23:30:51.627 +03:00 [Debug] Executed action method "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult".
2017-12-18 23:30:51.627 +03:00 [Debug] No information found on request to perform content negotiation.
2017-12-18 23:30:51.627 +03:00 [Debug] Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.JsonOutputFormatter"' and content type '"application/json"' to write the response.
2017-12-18 23:30:51.627 +03:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2017-12-18 23:30:51.644 +03:00 [Information] Executed action "Armut.Sample.Messaging.Controllers.MessageController.SendMessage (Armut.Sample.Messaging)" in 140.3602ms
2017-12-18 23:30:51.644 +03:00 [Debug] Connection id ""0HLA6AOGMQ2O3"" completed keep alive response.
2017-12-18 23:30:51.646 +03:00 [Information] Request finished in 145.0896ms 200 application/json; charset=utf-8
